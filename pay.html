<!DOCTYPE html>
<html lang="cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、简介与准入开通 | 微信开放文档</title>
    <meta name="description" content="微信开发者平台文档">
    <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">
  <meta name="keywords" content="微信官方文档">
  <link rel="shortcut icon" type="image/x-icon" href="https://res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico">
  <link rel="mask-icon" color="#4C4C4C" href="https://res.wx.qq.com/a/wx_fed/assets/res/MjliNWVm.svg">
  <link rel="apple-touch-icon-precomposed" href="https://res.wx.qq.com/a/wx_fed/assets/res/OTE0YTAw.png">
  <script>
(function () {
  'use strict';

  const SCRIPT_URLs = [
      'https://dldir1.qq.com/WechatWebDev/devPlatform/px.min.js',
      'https://dev.weixin.qq.com/platform-console/proxy/assets/tel/px.min.js',
  ];
  const param = {
      maskMode: 'no-mask', // 隐私策略, all-mask 或 no-mask, 详见：https://dev.weixin.qq.com/docs/analysis/sdk/docs.html
      recordCanvas: false,  // 若要采集canvas, 设为true
      projectId: 'wxef34f91ddab0c534-0HLdQNKAk-dzsFsA', // 项目 ID，需替换为体验分析项目 ID
      iframe: false, // 是否采集 iframe 页面
      console: true, // 是否采集 console 输出的错误日志
      network: true, // 是否采集网络错误
  };
  function loadScript(url) {
      return new Promise((resolve, reject) => {
          const scriptEle = document.createElement('script');
          scriptEle.type = 'text/javascript';
          scriptEle.async = true;
          scriptEle.src = url;
          scriptEle.onload = () => {
              resolve(url);
          };
          scriptEle.onerror = () => {
              reject(new Error('Script load error'));
          };
          document.head.appendChild(scriptEle);
      });
  }
  async function main() {
      try {
          sessionStorage.setItem('wxobs_start_timestamp', String(Date.now()));
          const fastestUrl = await Promise.race(SCRIPT_URLs.map(url => loadScript(url)));
          window.__startPX && window.__startPX(param);
      }
      catch (error) {
          console.error('Error loading scripts:', error);
      }
  }
  main();

})();
        </script>
    
    <link rel="preload" href="https://res.wx.qq.com/wxdoc/dist/assets/css/0.styles.c868877f.css" as="style"><link rel="preload" href="https://res.wx.qq.com/wxdoc/dist/assets/js/app.5befb301.js" as="script"><link rel="preload" href="https://res.wx.qq.com/wxdoc/dist/assets/js/3580.9421c50c.js" as="script">
    <link rel="stylesheet" href="https://res.wx.qq.com/wxdoc/dist/assets/css/0.styles.c868877f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="theme-container"><header class="navbar navbar_with-link"><div class="navbar__left"><a href="/doc/" class="home-link"><div class="logo__wrp"><span class="logo__icon"></span></div></a> <span class="dot"></span> <div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item selected"><!----> <a href="/miniprogram/dev/framework/" class="nav-link external">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/minigame/introduction/" class="nav-link external">
  小游戏
</a></li><li class="dropdown-item"><!----> <a href="/doc/subscription/guide/" class="nav-link external">
  公众号
</a></li><li class="dropdown-item"><!----> <a href="/doc/service/guide/" class="nav-link external">
  服务号
</a></li><li class="dropdown-item"><!----> <a href="/doc/oplatform/open/intro.html" class="nav-link external">
  开放平台
</a></li><li class="dropdown-item"><!----> <a href="https://work.weixin.qq.com/api/doc" class="nav-link external">
  企业微信
</a></li><li class="dropdown-item"><!----> <a href="https://pay.weixin.qq.com/doc/v3/merchant/4012062524" class="nav-link external">
  微信支付
</a></li><li class="dropdown-item"><!----> <a href="/doc/channels/" class="nav-link external">
  视频号
</a></li><li class="dropdown-item"><!----> <a href="/doc/store/shop/" class="nav-link external">
  微信小店
</a></li><li class="dropdown-item"><!----> <a href="/doc/aispeech/platform/INTRODUCTION.html" class="nav-link external">
  智能对话
</a></li><li class="dropdown-item"><!----> <a href="/doc/xwei/xiaowei-introduction/Introduction.html" class="nav-link external">
  腾讯小微
</a></li></ul></div></div> <div class="navbar__center"><nav class="nav-links"><div class="nav-item selected"><a href="/miniprogram/dev/framework/" class="nav-link external">
  开发
</a></div><div class="nav-item"><a href="/miniprogram/introduction/" class="nav-link external">
  介绍
</a></div><div class="nav-item"><a href="/miniprogram/design/" class="nav-link external">
  设计
</a></div><div class="nav-item"><a href="/miniprogram/product/" class="nav-link external">
  运营
</a></div><div class="nav-item"><a href="/miniprogram/analysis/wedata/intro/" class="nav-link external">
  数据
</a></div><div class="nav-item"><a href="/miniprogram/security/basic/" class="nav-link external">
  安全
</a></div></nav></div> <div class="navbar__right"><nav class="nav-links"><div class="nav-item community-item"><a href="https://developers.weixin.qq.com/community/develop/mixflow" target="_blank" class="nav-link external">
  社区
</a></div><div class="nav-item community-item"><a href="https://developers.weixin.qq.com/community/business" target="_blank" class="nav-link external">
  学堂
</a></div></nav> <ul class="lang-tab"><li class="lang-tab__icon"><img src="https://res.wx.qq.com/t/components/icons/base/translate_regular.svg"></li></ul> <div class="search__wrp-flex"><div class="search__input"><div class="weui-desktop-search"><button class="weui-desktop-icon-btn weui-desktop-search__btn weui-desktop-icon-btn__width"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.4529 16.4014C14.2428 17.4001 12.6915 18 11 18C7.134 18 4 14.866 4 11C4 7.134 7.134 4 11 4C14.866 4 18 7.134 18 11C18 12.7425 17.3633 14.3363 16.3099 15.5614L20.4243 19.6757L19.5757 20.5243L15.4529 16.4014ZM16.8 11C16.8 14.2033 14.2033 16.8 11 16.8C7.79674 16.8 5.2 14.2033 5.2 11C5.2 7.79676 7.79674 5.20001 11 5.20001C14.2033 5.20001 16.8 7.79676 16.8 11Z" fill="black"></path></svg></button></div> <a href="javascript:;" class="search-back__btn">取消</a></div> <div class="reco-list__wrp" style="display:none;"><ul class="reco__list"></ul> <div class="show-more"><a href="/doc/search?source=more&amp;query=&amp;doc_type=miniprogram&amp;jumpbackUrl=%2Fdoc%2F" class="reco-item__link">查看更多 </a></div></div> <div class="reco-list__wrp" style="display:none;"><div class="show-more"><a href="/doc/search?source=more&amp;query=&amp;doc_type=miniprogram&amp;jumpbackUrl=%2Fdoc%2F" class="reco-item__link">在小程序下暂无结果，查看其它业务相关内容 &gt; </a></div></div></div></div></header> <div class="subnavbar"><ul class="subnavbar__list"><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/framework/" target="_self">指南</a> <!----></div> <!----></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/reference/" target="_self">框架</a> <!----></div> <!----></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/component/" target="_self">组件</a> <!----></div> <!----></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/api/" target="_self">API</a> <!----></div> <!----></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/server/API/" target="_self">服务端</a> <!----></div> <!----></li><li class="subnavbar__item selected dropdown-subnavbar" style="display:;"><div class="dropdown-subnavbar-title"><a>平台能力 · 行业能力</a> <span class="arrow right dropdown-subnavbar-select"></span></div> <ul class="dropdown-subnavbar-ul"><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/industry/" target="_self" class="nav-link external">
            行业能力
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/business-capabilities/" target="_self" class="nav-link external">
            商业能力
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/miniapp/intro/intro" target="_self" class="nav-link external">
            多端能力
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/service-market/" target="_self" class="nav-link external">
            服务市场
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/cityservice/" target="_self" class="nav-link external">
            城市服务
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/charge/" target="_self" class="nav-link external">
            付费能力
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/platform-capabilities/extended/" target="_self" class="nav-link external">
            拓展能力
          </a></li></ul></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/devtools/devtools" target="_self">工具</a> <!----></div> <!----></li><li class="subnavbar__item dropdown-subnavbar" style="display:;"><div class="dropdown-subnavbar-title"><a>云服务</a> <span class="arrow right dropdown-subnavbar-select"></span></div> <ul class="dropdown-subnavbar-ul"><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/wxcloudservice/wxcloud/basis/getting-started" target="_self" class="nav-link external">
            云开发
          </a></li><li class="dropdown-item" style="display:;"><a href="/miniprogram/dev/wxcloudservice/wxcloudrun/src/" target="_self" class="nav-link external">
            云托管
          </a></li></ul></li><li class="subnavbar__item" style="display:;"><div class="dropdown-subnavbar-title"><a href="/miniprogram/dev/framework/release/" target="_self">更新日志</a> <!----></div> <!----></li></ul></div> <div class="mobile-links__wrp"><div class="mobile-links_mobile"><a href="javascript:;" class="mobile-links__btn">开发</a></div> <div class="mobile-links__panel"><div class="links-panel__bd"><nav class="nav-links"><div class="nav-item selected"><a href="/miniprogram/dev/framework/" class="nav-link external">
  开发
</a></div><div class="nav-item"><a href="/miniprogram/introduction/" class="nav-link external">
  介绍
</a></div><div class="nav-item"><a href="/miniprogram/design/" class="nav-link external">
  设计
</a></div><div class="nav-item"><a href="/miniprogram/product/" class="nav-link external">
  运营
</a></div><div class="nav-item"><a href="/miniprogram/analysis/wedata/intro/" class="nav-link external">
  数据
</a></div><div class="nav-item"><a href="/miniprogram/security/basic/" class="nav-link external">
  安全
</a></div></nav></div> <div class="links-panel__ft"><ul class="lang-tab"><li class="lang-tab__icon"><img src="https://res.wx.qq.com/t/components/icons/base/translate_regular.svg"></li></ul></div></div> <div><div class="weui-mask" style="display:none;"></div> <div class="weui-actionsheet "><!----> <div class="weui-actionsheet__menu"><div class="weui-actionsheet__cell">中文</div><div class="weui-actionsheet__cell">EN</div></div> <div class="weui-actionsheet__action"><div class="weui-actionsheet__cell">取消</div></div></div></div></div> <a href="javascript:;" class="mobile-search-btn"></a> <div class="main-container" style="margin-top:144px;"><div class="main-contontaier__bd" style="min-height:0px;"><div class="sidebar__wrp"><div class="sidebar-cell_mobile"><li class="subnavbar__item selected"><a href="javascript:;" target="_self">平台能力</a></li></div> <aside class="sidebar" style="top:144px;"> <div class="TreeNavigation"><div class="NavigationLevel NavigationLevel--level-0"><ul><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/guarantee/comment.html" class="NavigationItem__router-link">
      小程序评价
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/guarantee/comment.html" class="NavigationItem__router-link">
      服务端接口
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/guarantee/comment.html" class="NavigationItem__router-link">
      交易评价-评价管理接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/guarantee/comment-order.html" class="NavigationItem__router-link">
      交易评价-交易信息回传接口
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/live-player-plugin.html" class="NavigationItem__router-link">
      小程序直播
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/live-player-plugin.html" class="NavigationItem__router-link">
      接入说明
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/component-api.html" class="NavigationItem__router-link">
      组件接口
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/studio-api.html" class="NavigationItem__router-link">
      服务端接口
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/studio-api.html" class="NavigationItem__router-link">
      直播间接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/commodity-api.html" class="NavigationItem__router-link">
      商品管理接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/role-manage.html" class="NavigationItem__router-link">
      成员管理接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/subscribe-api.html" class="NavigationItem__router-link">
      长期订阅相关接口
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/other-abilities.html" class="NavigationItem__router-link">
      其他能力
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/liveplayer/update-log.html" class="NavigationItem__router-link">
      版本更新日志
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/trace/introduction.html" class="NavigationItem__router-link">
      微信可回溯
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/student.html" class="NavigationItem__router-link">
      微信学生身份快速验证
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/introduction.html" class="NavigationItem__router-link">
      微信物流服务
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/introduction.html" class="NavigationItem__router-link">
      微信物流服务（商家查看）
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/introduction.html" class="NavigationItem__router-link">
      快递接口
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-4"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/introduction.html" class="NavigationItem__router-link">
      文档说明
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/introduction.html" class="NavigationItem__router-link">
      产品简介
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-4"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/protocolrules.html" class="NavigationItem__router-link">
      接口规则
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/protocolrules.html" class="NavigationItem__router-link">
      协议规则
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/expressinfo.html" class="NavigationItem__router-link">
      快递公司信息
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/interface_and_event.html" class="NavigationItem__router-link">
      相关接口和事件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express-download.html" class="NavigationItem__router-link">
      下载打单软件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/qa.html" class="NavigationItem__router-link">
      常见问题
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/express_sanbox.html" class="NavigationItem__router-link">
      沙盒测试
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/contact.html" class="NavigationItem__router-link">
      联系我们
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/freight_insurance.html" class="NavigationItem__router-link">
      无忧退货（运费险）
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/intracity_service.html" class="NavigationItem__router-link">
      同城配送
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/express_search.html" class="NavigationItem__router-link">
      查询组件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/business/express_open_msg.html" class="NavigationItem__router-link">
      消息组件
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/delivery/logistics-helper.html" class="NavigationItem__router-link">
      微信物流服务（运力方查看）
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/delivery/logistics-helper.html" class="NavigationItem__router-link">
      批量下单（原物流助手）
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/delivery/single-delivery.html" class="NavigationItem__router-link">
      散单寄件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/delivery/scan_search_delivery.html" class="NavigationItem__router-link">
      扫一扫查快递
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/express/delivery/msgs-push/description.html" class="NavigationItem__router-link">
      手机号物流消息推送
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/imitation-native-jump.html" class="NavigationItem__router-link">
      乘车码
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/imitation-native-jump.html" class="NavigationItem__router-link">
      仿原生跳转
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/create-code.html" class="NavigationItem__router-link">
      生码
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/scan-code-to-pay.html" class="NavigationItem__router-link">
      扫码支付
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/user-registration-contract.html" class="NavigationItem__router-link">
      用户注册签约（可选)
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/user-cancellation.html" class="NavigationItem__router-link">
      用户解约（可选）
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/contract-status.html" class="NavigationItem__router-link">
      用户签约状态查询
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/payment-in-arrears.html" class="NavigationItem__router-link">
      欠费支付
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/check-route.html" class="NavigationItem__router-link">
      查询线路接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/set-route.html" class="NavigationItem__router-link">
      设置线路接口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/ridecode/query-list-arrears-users.html" class="NavigationItem__router-link">
      查询欠费用户列表
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html" aria-current="page" class="NavigationItem__router-link router-link-exact-active router-link-active">
      小程序B2b门店助手
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#一、简介与准入开通" class="NavigationItem__router-link">
      简介与准入开通
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#二、开发指引" class="NavigationItem__router-link">
      开发指引
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-门店认证授权" class="NavigationItem__router-link">
      门店认证授权
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-1-申请添加插件" class="NavigationItem__router-link">
      申请添加插件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-2-配置插件" class="NavigationItem__router-link">
      配置插件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-3-代码中添加插件入口" class="NavigationItem__router-link">
      代码中添加插件入口
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-4-获取插件授权信息" class="NavigationItem__router-link">
      获取插件授权信息
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-5-插件返回的授权信息" class="NavigationItem__router-link">
      插件返回的授权信息
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-6-预录入门店信息api" class="NavigationItem__router-link">
      预录入门店信息api
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-7-门店信息查询api" class="NavigationItem__router-link">
      门店信息查询api
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-8-全量授权门店查询api" class="NavigationItem__router-link">
      全量授权门店查询api
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_1-9-常见QA" class="NavigationItem__router-link">
      常见QA
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_2-消息触达" class="NavigationItem__router-link">
      消息触达
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_2-1-模板消息交互说明" class="NavigationItem__router-link">
      模板消息交互说明
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_2-2-模板消息列表及下发api" class="NavigationItem__router-link">
      模板消息列表及下发api
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_2-3-错误码说明" class="NavigationItem__router-link">
      错误码说明
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_2-4-消息效果数据api" class="NavigationItem__router-link">
      消息效果数据api
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-B2b支付" class="NavigationItem__router-link">
      B2b支付
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-1-申请商户号" class="NavigationItem__router-link">
      申请商户号
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-2-报名技术服务费优惠活动" class="NavigationItem__router-link">
      报名技术服务费优惠活动
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-3-支付与退款" class="NavigationItem__router-link">
      支付与退款（接口）
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-4-查看账单" class="NavigationItem__router-link">
      查看账单
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-5-提现" class="NavigationItem__router-link">
      提现
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-6-分账" class="NavigationItem__router-link">
      分账
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/B2b_store_assistant.html#_3-7-合单支付" class="NavigationItem__router-link">
      合单支付
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/mini-drama/mini_drama.html" class="NavigationItem__router-link">
      短剧小程序
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/mini-drama/mini_drama.html" class="NavigationItem__router-link">
      短剧媒资管理
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html" class="NavigationItem__router-link">
      短剧播放器
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#介绍" class="NavigationItem__router-link">
      介绍
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#接入流程" class="NavigationItem__router-link">
      接入流程
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#基础接入" class="NavigationItem__router-link">
      基础接入
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#插件如何引入" class="NavigationItem__router-link">
      插件引入
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-4"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#插件接入流程" class="NavigationItem__router-link">
      插件接入流程
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#跳转到播放器页面" class="NavigationItem__router-link">
      跳转到播放器页面
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#监听播放页加载" class="NavigationItem__router-link">
      监听播放页加载
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#实现后台接口初始化剧集状态" class="NavigationItem__router-link">
      实现后台接口初始化剧集状态
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#解锁剧集" class="NavigationItem__router-link">
      解锁剧集
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#充值组件" class="NavigationItem__router-link">
      充值组件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#数据加密方案" class="NavigationItem__router-link">
      数据加密方案
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#其它开放接口" class="NavigationItem__router-link">
      其它开放接口
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#暂停-继续播放" class="NavigationItem__router-link">
      暂停/继续播放
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#获取剧目信息" class="NavigationItem__router-link">
      获取剧目信息
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#更换剧目" class="NavigationItem__router-link">
      更换剧目
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#数据上报" class="NavigationItem__router-link">
      数据上报
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#自定义返回按钮" class="NavigationItem__router-link">
      自定义返回按钮
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#路由跳转" class="NavigationItem__router-link">
      路由跳转
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#防录屏-截屏" class="NavigationItem__router-link">
      防录屏/截屏
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#设置免费剧集列表" class="NavigationItem__router-link">
      设置免费剧集列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#设置用广告解锁剧集" class="NavigationItem__router-link">
      设置用广告解锁剧集
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#退出横屏" class="NavigationItem__router-link">
      退出横屏
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#设置剧集未解锁时的视频预览" class="NavigationItem__router-link">
      设置剧集未解锁时的视频预览
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#播放原始视频" class="NavigationItem__router-link">
      播放原始视频
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#最近观看组件" class="NavigationItem__router-link">
      最近观看组件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#刷剧组件" class="NavigationItem__router-link">
      刷剧组件
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#运营能力" class="NavigationItem__router-link">
      运营能力
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#分享" class="NavigationItem__router-link">
      分享
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#侧边运营位" class="NavigationItem__router-link">
      侧边运营位
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#自定义开放区域" class="NavigationItem__router-link">
      自定义开放区域
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#公众号联动" class="NavigationItem__router-link">
      公众号联动
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#推荐位" class="NavigationItem__router-link">
      推荐位
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#短剧上架" class="NavigationItem__router-link">
      短剧上架
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#短剧变现类型" class="NavigationItem__router-link">
      短剧变现类型
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#批处理短剧合作推广计划" class="NavigationItem__router-link">
      批处理短剧合作推广计划
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#常见问题" class="NavigationItem__router-link">
      常见问题
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#版本更新日志" class="NavigationItem__router-link">
      版本更新日志
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/videoplayer.html#附录" class="NavigationItem__router-link">
      附录
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-1"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html" class="NavigationItem__router-link">
      小说小程序
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html" class="NavigationItem__router-link">
      小说官方阅读器
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#介绍" class="NavigationItem__router-link">
      介绍
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#效果示例" class="NavigationItem__router-link">
      效果示例
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#代码示例" class="NavigationItem__router-link">
      代码示例
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#接入流程" class="NavigationItem__router-link">
      接入流程
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#添加插件" class="NavigationItem__router-link">
      添加插件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#插件初始化" class="NavigationItem__router-link">
      插件初始化
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#跳转插件页" class="NavigationItem__router-link">
      跳转插件页
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#章节解锁组件" class="NavigationItem__router-link">
      章节解锁组件
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-4"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#章节解锁链路" class="NavigationItem__router-link">
      章节解锁链路
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#消息推送" class="NavigationItem__router-link">
      消息推送
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#消息格式" class="NavigationItem__router-link">
      消息格式
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#接口列表" class="NavigationItem__router-link">
      接口列表
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#基础" class="NavigationItem__router-link">
      基础
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#分享" class="NavigationItem__router-link">
      分享
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#读后推荐" class="NavigationItem__router-link">
      读后推荐
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#书架" class="NavigationItem__router-link">
      书架
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#活动运营位" class="NavigationItem__router-link">
      活动运营位
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#目录" class="NavigationItem__router-link">
      目录
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#章节解锁" class="NavigationItem__router-link">
      章节解锁
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#事件" class="NavigationItem__router-link">
      事件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#自定义段落" class="NavigationItem__router-link">
      自定义段落
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#广告" class="NavigationItem__router-link">
      广告
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#全屏组件" class="NavigationItem__router-link">
      全屏组件
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#跳转小程序" class="NavigationItem__router-link">
      跳转小程序
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#路由" class="NavigationItem__router-link">
      路由
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#附录" class="NavigationItem__router-link">
      附录
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel.html#更新记录" class="NavigationItem__router-link">
      更新记录
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-2"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html" class="NavigationItem__router-link">
      小说作品管理
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#作品管理" class="NavigationItem__router-link">
      作品管理
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#创建作品" class="NavigationItem__router-link">
      创建作品
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#编辑作品" class="NavigationItem__router-link">
      编辑作品
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#删除作品" class="NavigationItem__router-link">
      删除作品
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#获取作品列表" class="NavigationItem__router-link">
      获取作品列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#获取作品信息" class="NavigationItem__router-link">
      获取作品信息
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#上传章节" class="NavigationItem__router-link">
      上传章节
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#批量上传章节" class="NavigationItem__router-link">
      批量上传章节
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#删除章节" class="NavigationItem__router-link">
      删除章节
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#替换章节" class="NavigationItem__router-link">
      替换章节
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#获取章节列表" class="NavigationItem__router-link">
      获取章节列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#获取章节信息" class="NavigationItem__router-link">
      获取章节信息
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#调整章节顺序" class="NavigationItem__router-link">
      调整章节顺序
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#调整章节相对顺序" class="NavigationItem__router-link">
      调整章节相对顺序
    <!----></a> <!----> <!----></span></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#作品提审" class="NavigationItem__router-link">
      作品提审
    <!----></a> <!----> <!----></span></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#小说授权" class="NavigationItem__router-link">
      小说授权
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#新增账号-小说授权" class="NavigationItem__router-link">
      新增账号-小说授权
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#查看主授权关系列表" class="NavigationItem__router-link">
      查看主授权关系列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#查看被授权关系列表" class="NavigationItem__router-link">
      查看被授权关系列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#删除指定的授权关系" class="NavigationItem__router-link">
      删除指定的授权关系
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#账号授权" class="NavigationItem__router-link">
      账号授权
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#新增账号-账号授权" class="NavigationItem__router-link">
      新增账号-账号授权
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#查看账号主授权关系列表" class="NavigationItem__router-link">
      查看账号主授权关系列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#查看账号被授权关系列表" class="NavigationItem__router-link">
      查看账号被授权关系列表
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#删除指定的账号授权关系" class="NavigationItem__router-link">
      删除指定的账号授权关系
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#事件通知" class="NavigationItem__router-link">
      事件通知
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#审核状态事件" class="NavigationItem__router-link">
      审核状态事件
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#预览设置" class="NavigationItem__router-link">
      预览设置
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#预览设置修改" class="NavigationItem__router-link">
      预览设置修改
    <!----></a> <!----> <!----></span></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#预览设置获取" class="NavigationItem__router-link">
      预览设置获取
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#运营能力" class="NavigationItem__router-link">
      运营能力
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#读后推荐" class="NavigationItem__router-link">
      读后推荐
    <!----></a> <!----> <!----></span></li></ul></div></li><li><div class="NavigationLevel NavigationLevel--closed NavigationLevel--level-3"><div class="NavigationLevel__parent"><span class="NavigationToggle NavigationToggle--closed"><span class="NavigationToggle__icon NavigationToggle__icon--closed"></span></span> <span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#附录" class="NavigationItem__router-link">
      附录
    <!----></a> <!----> <!----></span></div> <ul class="NavigationLevel__children"><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/novel-api.html#常见错误码" class="NavigationItem__router-link">
      常见错误码
    <!----></a> <!----> <!----></span></li></ul></div></li></ul></div></li></ul></div></li><li><span class="NavigationItem"><!----> <a href="/miniprogram/dev/platform-capabilities/industry/finance-license-flag/introduction.html" class="NavigationItem__router-link">
      金融业持牌机构认证标签
    <!----></a> <!----> <!----></span></li></ul></div></div> </aside></div> <div class="page__wrp"><main class="page"><div class="page-inner" style="min-height:0px;"> <div id="docContent"><div class="Breadcrumb"></div> <div class="content custom"><h1 id="一、简介与准入开通"><a href="#一、简介与准入开通" class="header-anchor">#</a> 一、简介与准入开通</h1> <h2 id="_1-功能简介"><a href="#_1-功能简介" class="header-anchor">#</a> 1. 功能简介</h2> <p>小程序B2b门店助手是由微信官方提供的，帮助品牌商或经销商连接并管理终端门店的免费工具。品牌商或经销商小程序接入后，经用户（门店）认证授权，可帮助品牌商或经销商：</p> <p>1）便捷获取门店真实信息<br>
2）针对门店进行促销、活动以及订单等场景的消息触达<br>
3）获取B2b支付能力</p> <p>详情可参考<a href="https://docs.qq.com/slide/DTERERU50RlFQV1Bm" target="_blank" rel="noopener noreferrer">小程序B2b门店助手产品功能介绍<span></span></a></p> <h2 id="_2-准入规则"><a href="#_2-准入规则" class="header-anchor">#</a> 2. 准入规则</h2> <p>小程序的服务类目含有：商家自营-B2b(商品批发/门店管理)。具体类目请参考<a href="https://developers.weixin.qq.com/minigame/product/material/" target="_blank" rel="noopener noreferrer">小程序商家适用类目<span></span></a></p> <h2 id="_3-开通流程"><a href="#_3-开通流程" class="header-anchor">#</a> 3. 开通流程</h2> <p><strong>方式1：小程序后台开通</strong></p> <p>成功申请开通类目（商家自营-B2b(商品批发/门店管理)）的小程序，登录小程序后台（mp.weixin.qq.com），按照“侧边栏-功能-门店助手”的路径，申请开通门店助手功能权限。</p> <p><strong>方式2：服务商代开通</strong></p> <p>Step1、服务商需通过<a href="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/operation/authorization/authorization_management.html" target="_blank" rel="noopener noreferrer">第三方平台账号<span></span></a>,获取小程序的门店助手功能<a href="https://developers.weixin.qq.com/doc/oplatform/Third-party_Platforms/2.0/product/miniprogram_authority.html" target="_blank" rel="noopener noreferrer">权限集<span></span></a>（权限集ID：158，权限集名称：小程序B2b门店助手）<br>
Step2、服务商获得权限集授权后，可通过使用authorizer_access_token代商家调用。成功开通后，服务商即可代小程序开发所有门店助手相关功能。</p> <p><strong>注意事项</strong></p> <p>1）该接口所属权限集 id 为 158<br>
2）服务商获得权限集授权后，可通过使用 authorizer_access_token 代商家调用</p> <p><strong>调用方式</strong></p> <p><strong>HTTPS 调用</strong></p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/retailbusinessapply?access_token=AUTHORIZER_ACCESS_TOKEN
</code></pre></div><p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>access_token</td> <td>string</td> <td>是</td> <td>接口调用凭证，该参数为 URL 参数，非 Body 参数。使用 <a href="https://developers.weixin.qq.com/doc/oplatform/openApi/OpenApiDoc/ticket-token/getAuthorizerAccessToken.html" target="_blank" rel="noopener noreferrer">authorizer_access_token<span></span></a></td></tr> <tr><td>goods_type_list</td> <td>array&lt;string&gt;</td> <td>是</td> <td>主营商品类型。<br>可选项：<code>&quot;食品&quot;</code>, <code>&quot;饮料&quot;</code>, <code>&quot;乳制品&quot;</code>, <code>&quot;酒水&quot;</code>, <code>&quot;生鲜果蔬&quot;</code>, <code>&quot;调味品&quot;</code>, <code>&quot;日化个护&quot;</code>, <code>&quot;文具&quot;</code>, <code>&quot;鞋服/配饰&quot;</code>, <code>&quot;家居&quot;</code>, <code>&quot;母婴/玩具&quot;</code>, <code>&quot;数码3C&quot;</code>, <code>&quot;其他&quot;</code></td></tr> <tr><td>goods_sale_list</td> <td>array&lt;string&gt;</td> <td>是</td> <td>主要线下销售渠道。<br>可选项：<code>&quot;杂货店&quot;</code>, <code>&quot;便利店&quot;</code>, <code>&quot;超市&quot;</code>, <code>&quot;餐饮店&quot;</code>, <code>&quot;母婴店&quot;</code>, <code>&quot;烟酒店&quot;</code>, <code>&quot;其他&quot;</code></td></tr> <tr><td>cover_num</td> <td>string</td> <td>是</td> <td>门店覆盖数。<br>可选项：<code>&quot;0-5千&quot;</code>, <code>&quot;5千-1万&quot;</code>, <code>&quot;1万-10万&quot;</code>, <code>&quot;10万-50万&quot;</code>, <code>&quot;50万以上&quot;</code></td></tr> <tr><td>service_list</td> <td>array&lt;string&gt;</td> <td>是</td> <td>所需服务类型。<br>可选项：<code>&quot;门店订货&quot;</code>, <code>&quot;门店促销&quot;</code>, <code>&quot;门店活动执行&quot;</code>, <code>&quot;门店直播&quot;</code>, <code>&quot;其他&quot;</code></td></tr> <tr><td>description</td> <td>string</td> <td>是</td> <td>小程序方案概述。长度限制：21-100字</td></tr> <tr><td>contact_name</td> <td>string</td> <td>是</td> <td>联系人姓名。长度限制：1-7字。</td></tr> <tr><td>contact_phone</td> <td>string</td> <td>是</td> <td>联系人手机号</td></tr> <tr><td>contact_email</td> <td>string</td> <td>是</td> <td>联系人邮箱</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>errcode</td> <td>number</td> <td>错误码。</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误原因。</td></tr></tbody></table></div><p><strong>调用示例</strong></p> <p><strong>请求数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;goods_type_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;食品&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;其他&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;goods_sale_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;杂货店&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;便利店&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;超市&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cover_num&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0-5千&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;service_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;门店订货&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;使用订货功能，线上下单、配送到店；小程序开发者可以通过消息能力，发送新品上线、活动消息等到小店，引导其跳转到小程序内查看活动信息或者订货&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13712345678&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan@qq.com&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>常见错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>说明</th></tr></thead> <tbody><tr><td>0</td> <td>成功开通</td></tr> <tr><td>9404201</td> <td>无效的主营商品类型</td></tr> <tr><td>9404202</td> <td>无效的主要线下销售渠道</td></tr> <tr><td>9404203</td> <td>无效的门店覆盖数</td></tr> <tr><td>9404204</td> <td>无效的所需服务类型</td></tr> <tr><td>9404205</td> <td>无效的小程序方案概述</td></tr> <tr><td>9404206</td> <td>无效的联系人姓名</td></tr> <tr><td>9404207</td> <td>无效的联系人手机号</td></tr> <tr><td>9404208</td> <td>无效的联系人邮箱</td></tr> <tr><td>9404209</td> <td>该账号不满足申请条件</td></tr> <tr><td>9404210</td> <td>已申请，请耐心等待</td></tr></tbody></table></div><h1 id="二、开发指引"><a href="#二、开发指引" class="header-anchor">#</a> 二、开发指引</h1> <h2 id="_1-门店认证授权"><a href="#_1-门店认证授权" class="header-anchor">#</a> 1. 门店认证授权</h2> <p><strong>引用门店助手插件，引导用户完成认证授权</strong></p> <p>在小程序的流程设计中，引导用户进入”小程序门店助手“插件页面，完成门店认证授权流程。只有对完成门店信息授权的用户，开发者方可适用门店助手的能力，包括：<br>
1）获取门店真实信息<br>
2）针对门店进行促销、活动以及订单等场景的消息触达<br>
3）获取B2b支付能力</p> <p>示例：<br> <img src="https://res8.wxqcloud.qq.com.cn/wxdoc/c3792ac7-6c4c-48d4-a78d-6bb82c2d9f6a.jpg" alt="B2b 小程序引用插件" style="zoom:40%;"></p> <h3 id="_1-1-申请添加插件"><a href="#_1-1-申请添加插件" class="header-anchor">#</a> <span id="申请添加插件">1.1 申请添加插件</span></h3> <p><strong>方式1：小程序后台页面申请</strong></p> <p>登录小程序后台（mp.weixin.qq.com），选择菜单“设置-第三方设置-插件管理-添加插件”，搜索“小程序门店助手”并申请添加。</p> <p><strong>方式2：开发者工具引用</strong></p> <p>使用开发者工具运行小程序，并引入插件，在调试器中会提示“添加插件”，点击添加插件，前往小程序管理后台确认即可.</p> <h3 id="_1-2-配置插件"><a href="#_1-2-配置插件" class="header-anchor">#</a> <span id="配置插件">1.2 配置插件</span></h3> <p>在小程序app.json中配置</p> <p><strong>重要提醒：version可以填写具体版本号，建议直接填写latest以自动获取最新版插件</strong></p> <p>注意：“自定义插件名”代表之后使用时需要配置的，文档中使用了&quot;bb-plugin&quot;作为演示。
还需要添加 permission 字段来允许使用定位信息，才可以选择门店地址。</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;pages&quot;: [
    &quot;pages/index/index&quot;
  ],
  &quot;plugins&quot;: {
    &quot;自定义插件名&quot;: {
      &quot;version&quot;: &quot;latest&quot;,
      &quot;provider&quot;: &quot;wx69b7451feb427f0e&quot;
    }
  },
  &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;,
  &quot;permission&quot;: {
    &quot;scope.userLocation&quot;: {
      &quot;desc&quot;: &quot;你的位置信息将用于小程序定位&quot;
    }
  }
}
</code></pre></div><h3 id="_1-3-代码中添加插件入口"><a href="#_1-3-代码中添加插件入口" class="header-anchor">#</a> 1.3 代码中添加插件入口</h3> <p>页面中会出现“打开插件”的导航，点击可跳转门店认证插件。</p> <p>示例中的“bb-plugin”就是在app.json里面配置的自定义的插件名。</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--index.wxml--&gt;
&lt;navigator url=&quot;plugin://bb-plugin/info-regist&quot;&gt;
  打开插件
&lt;/navigator&gt;
</code></pre></div><h3 id="_1-4-获取插件授权信息"><a href="#_1-4-获取插件授权信息" class="header-anchor">#</a> 1.4 获取插件授权信息</h3> <p>备注：若用户未向该小程序授权门店认证信息，则会返回错误信息“门店未对品牌授权”。</p> <div class="language- extra-class"><pre class="language-text"><code>const plugin = requirePlugin(&quot;bb-plugin&quot;); // 引入插件

Page({
  data: {

  },
  onShow(){
    plugin.getRetailInfo({
      success: (value) =&gt; {
        console.log(value)
      }
    })
  }
});

// value 结构如下
{
    &quot;status&quot;: true,
    &quot;errorMsg&quot;: &quot;成功&quot;,
    &quot;data&quot;: {
        &quot;isEnableUsePlugin&quot;: true,
        &quot;isGrantRetailInfo&quot;: true,
        &quot;phone&quot;: &quot;18888888888&quot;,
        &quot;retailName&quot;: &quot;测试门店名称 A&quot;
        &quot;storeType&quot;: &quot;超市&quot;,
        &quot;storeAddress&quot;: &quot;广东省广州市海珠区创意大道&quot;,
        &quot;businessName&quot;: &quot;测试企业名称 B&quot;,
        &quot;businessId&quot;: &quot;223345jjj123445C&quot;,
        &quot;managerName&quot;: &quot;路人甲&quot;,
        &quot;openid&quot;: &quot;ooo999=ssssdxdf&quot;
    }
}
</code></pre></div><h3 id="_1-5-插件返回的授权信息"><a href="#_1-5-插件返回的授权信息" class="header-anchor">#</a> 1.5 插件返回的授权信息</h3> <p><strong>返回结构体字段：</strong></p> <div class="table-wrp"><table><thead><tr><th>参数意义</th> <th>返回参数</th> <th>备注</th></tr></thead> <tbody><tr><td>调用状态</td> <td>status</td> <td>若未授权则为 false</td></tr> <tr><td>返回数据</td> <td>data</td> <td></td></tr> <tr><td>错误信息</td> <td>errorMsg</td> <td></td></tr></tbody></table></div><p><strong>返回数据字段：</strong></p> <div class="table-wrp"><table><thead><tr><th>参数意义</th> <th>参数名称</th> <th>类型</th></tr></thead> <tbody><tr><td>该小程序是否允许使用此插件</td> <td>isEnableUsePlugin</td> <td>boolean</td></tr> <tr><td>该小程序是否已被授权</td> <td>isGrantRetailInfo</td> <td>boolean</td></tr> <tr><td>门店登记手机号</td> <td>phone</td> <td>string</td></tr> <tr><td>门店名称</td> <td>retailName</td> <td>string</td></tr> <tr><td>门店类型</td> <td>storeType</td> <td>string</td></tr> <tr><td>门店地址</td> <td>storeAddress</td> <td>string</td></tr> <tr><td>企业名称</td> <td>businessName</td> <td>string</td></tr> <tr><td>营业执照注册号</td> <td>businessId</td> <td>string</td></tr> <tr><td>经营者姓名</td> <td>managerName</td> <td>string</td></tr> <tr><td>用于发送消息的id</td> <td>openid</td> <td>string</td></tr></tbody></table></div><h3 id="_1-6-预录入门店信息api"><a href="#_1-6-预录入门店信息api" class="header-anchor">#</a> 1.6 预录入门店信息api</h3> <p><strong>接口功能</strong>：通过本API可提前预录入门店信息。<br> <strong>场景说明</strong>：对于已提前预录入门店信息的用户，在登录小程序进行门店认证授权流程时，会默认拉起展示预录入的门店信息，用户一键确认即可完成认证授权，减少用户操作成本，提示认证授权成功率。</p> <img src="https://res8.wxqcloud.qq.com.cn/wxdoc/31bfd281-2c1c-4c5e-a0e0-113491a11644.png" alt="B2b 预录入信息" style="zoom:40%;"> <p><strong>调用方式:</strong></p> <p>HTTPS 调用</p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/batchcreateretail?access_token=ACCESS_TOKEN
</code></pre></div><p>如调用本接口返回错误码4：地址解析失败，可将导入失败的地址数据传入地址解析接口（<a href="https://lbs.qq.com/service/webService/webServiceGuide/webServiceGeocoder" target="_blank" rel="noopener noreferrer">地址解析接口文档<span></span></a>），获取标准化的省、市、区后重新导入。<br>
附：<a href="https://docs.qq.com/sheet/DVVlmWWxMb2N2eEJC?tab=BB08J2" target="_blank" rel="noopener noreferrer">门店助手有效地址组合<span></span></a></p> <p><strong>请求参数说明：</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>access_token</td> <td>string</td> <td>是</td> <td>接口调用凭证，该参数为 URL 参数，非 Body 参数。使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" target="_blank" rel="noopener noreferrer">getAccessToken<span></span></a> 或者 <a href="https://developers.weixin.qq.com/doc/oplatform/openApi/OpenApiDoc/ticket-token/getAuthorizerAccessToken.html" target="_blank" rel="noopener noreferrer">authorizer_access_token<span></span></a></td></tr> <tr><td>retail_info_list</td> <td>array&lt;RetailInfo&gt;</td> <td>是</td> <td>门店信息列表。每次调用最多可导入 100 个门店</td></tr></tbody></table></div><p><strong>RetailInfo</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>mobile_phone</td> <td>string</td> <td>是</td> <td>手机号</td></tr> <tr><td>retail_name</td> <td>string</td> <td>是</td> <td>门店名称。长度限制 1-100 个字符，一个中文字等于 2 个字符</td></tr> <tr><td>retail_type</td> <td>string</td> <td>否</td> <td>一级门店类型。可选项：<code>&quot;杂货店&quot;</code>、<code>&quot;便利店&quot;</code>、<code>&quot;超市&quot;</code>、<code>&quot;餐饮店&quot;</code>、<code>&quot;母婴店&quot;</code>、<code>&quot;烟酒店&quot;</code>、<code>&quot;其他&quot;</code></td></tr> <tr><td>sub_retail_type</td> <td>string</td> <td>否</td> <td>二级门店类型。一级类型为 <code>&quot;其他&quot;</code> 时必填</td></tr> <tr><td>address_province</td> <td>string</td> <td>是</td> <td>门店地址，省</td></tr> <tr><td>address_city</td> <td>string</td> <td>是</td> <td>门店地址，市</td></tr> <tr><td>address_region</td> <td>string</td> <td>是</td> <td>门店地址，区县</td></tr> <tr><td>address_street</td> <td>string</td> <td>是</td> <td>门店地址，街道详细地址</td></tr> <tr><td>registration_number</td> <td>string</td> <td>否</td> <td>营业执照注册号</td></tr> <tr><td>biz_name</td> <td>string</td> <td>否</td> <td>企业名称</td></tr> <tr><td>corporation_name</td> <td>string</td> <td>否</td> <td>法人姓名</td></tr> <tr><td>latitude</td> <td>number</td> <td>否</td> <td>纬度</td></tr> <tr><td>longitude</td> <td>number</td> <td>否</td> <td>经度</td></tr> <tr><td>business_type</td> <td>array&lt;string&gt;</td> <td>否</td> <td>一级主营商品。可选项：<code>&quot;食品饮料&quot;</code>, <code>&quot;餐饮&quot;</code>, <code>&quot;生鲜果蔬（含鲜花）&quot;</code>, <code>&quot;烟酒&quot;</code>, <code>&quot;鞋服内衣&quot;</code>, <code>&quot;个护美妆&quot;</code>, <code>&quot;3C数码&quot;</code>, <code>&quot;家用电器&quot;</code>, <code>&quot;汽修/汽配&quot;</code>, <code>&quot;医药/医疗器械&quot;</code>, <code>&quot;家装/五金/建材&quot;</code>, <code>&quot;家居家纺&quot;</code>, <code>&quot;文具玩具&quot;</code>, <code>&quot;母婴&quot;</code>, <code>&quot;宠物&quot;</code>, <code>&quot;其他&quot;</code></td></tr> <tr><td>other_business_type</td> <td>string</td> <td>否</td> <td>二级主营商品。一级主营商品包含 <code>&quot;其他&quot;</code> 时必填</td></tr></tbody></table></div><p><strong>请求示例：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;retail_info_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;mobile_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12345678910&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三烧烤店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;餐饮店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_province&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广东省&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广州市&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_region&quot;</span><span class="token operator">:</span> <span class="token string">&quot;海珠区&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新港中路397号TIT创意园&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.32531</span><span class="token punctuation">,</span>
            <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">23.0996132</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;mobile_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a123456789&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;便利店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_province&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广东省&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广州市&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_region&quot;</span><span class="token operator">:</span> <span class="token string">&quot;海珠区&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;address_street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;新港中路397号TIT创意园&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;registration_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;biz_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;corporation_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回数据示例：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;num_success&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;num_failure&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;failure_record_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;mobile_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a123456789&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;registration_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;failure_code&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>errcode返回值及含义：</strong></p> <div class="table-wrp"><table><thead><tr><th>返回值</th> <th>含义</th></tr></thead> <tbody><tr><td>-1</td> <td>系统繁忙，请稍后重试</td></tr> <tr><td>0</td> <td>成功</td></tr> <tr><td>40001</td> <td>token 无效</td></tr> <tr><td>48001</td> <td>小程序无该 api 权限，反馈给对接人开通</td></tr> <tr><td>9404000</td> <td>上传数量过多</td></tr> <tr><td>9404001</td> <td>门店信息参数缺失</td></tr></tbody></table></div><p><strong>failure_code含义：</strong></p> <div class="table-wrp"><table><thead><tr><th>返回值</th> <th>含义</th></tr></thead> <tbody><tr><td>2</td> <td>无效的手机号</td></tr> <tr><td>3</td> <td>无效的门店类型</td></tr> <tr><td>4</td> <td>地址解析失败</td></tr> <tr><td>5</td> <td>手机号已被录入门店信息</td></tr> <tr><td>6</td> <td>无效的门店名称（长度限制为 1-100 个字符，一个中文字等于 2 个字符）</td></tr> <tr><td>7</td> <td>无效的主营商品</td></tr></tbody></table></div><h3 id="_1-7-门店信息查询api"><a href="#_1-7-门店信息查询api" class="header-anchor">#</a> 1.7 门店信息查询api</h3> <p><strong>接口功能：查询已完成门店认证授权用户的门店信息</strong></p> <p><strong>调用方式:</strong></p> <p>HTTPS 调用</p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/getretailinfo?access_token=ACCESS_TOKEN
</code></pre></div><p><strong>请求参数说明：</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>access_token</td> <td>string</td> <td>是</td> <td>接口调用凭证，该参数为 URL 参数，非 Body 参数。使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" target="_blank" rel="noopener noreferrer">getAccessToken<span></span></a> 或者 <a href="https://developers.weixin.qq.com/doc/oplatform/openApi/OpenApiDoc/ticket-token/getAuthorizerAccessToken.html" target="_blank" rel="noopener noreferrer">authorizer_access_token<span></span></a></td></tr> <tr><td>openid</td> <td>string</td> <td>否</td> <td>门店管理员/员工 openid。与手机号二选一，若都填写，优先使用 openid</td></tr> <tr><td>mobile_phone</td> <td>string</td> <td>否</td> <td>手机号</td></tr></tbody></table></div><p><strong>响应参数说明：</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>mobile_phone</td> <td>string</td> <td>手机号</td></tr> <tr><td>retail_type</td> <td>string</td> <td>一级门店类型</td></tr> <tr><td>sub_retail_type</td> <td>string</td> <td>二级门店类型</td></tr> <tr><td>retail_address</td> <td>string</td> <td>门店地址</td></tr> <tr><td>retail_name</td> <td>string</td> <td>门店名称</td></tr> <tr><td>identification</td> <td>string</td> <td>营业执照注册号</td></tr> <tr><td>principal</td> <td>string</td> <td>企业名称</td></tr> <tr><td>legal_person_name</td> <td>string</td> <td>法人姓名</td></tr> <tr><td>openid</td> <td>string</td> <td>门店管理员/员工 openid。手机号查询时返回管理员 openid</td></tr> <tr><td>role</td> <td>number</td> <td>角色。1：管理员，2：员工。手机号查询时返回管理员</td></tr> <tr><td>status</td> <td>number</td> <td>认证状态。1：已完成认证</td></tr> <tr><td>auth_time</td> <td>number</td> <td>认证时间戳</td></tr> <tr><td>grant_time</td> <td>number</td> <td>授权时间戳</td></tr> <tr><td>longitude</td> <td>number</td> <td>经度。门店定位信息，若门店未提交定位信息，则返回值里无该字段</td></tr> <tr><td>latitude</td> <td>number</td> <td>纬度。门店定位信息，若门店未提交定位信息，则返回值里无该字段</td></tr> <tr><td>business_type</td> <td>array&lt;string&gt;</td> <td>一级主营商品</td></tr> <tr><td>other_business_type</td> <td>string</td> <td>二级主营商品</td></tr> <tr><td>staff_list</td> <td>Staff</td> <td>员工列表，包含管理员</td></tr></tbody></table></div><p><strong>Staff</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>openid</td> <td>string</td> <td>管理员/员工 openid</td></tr> <tr><td>role</td> <td>number</td> <td>角色。1：管理员，2：员工</td></tr> <tr><td>create_time</td> <td>number</td> <td>员工加入时间，管理员无该字段</td></tr></tbody></table></div><p><strong>请求示例：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;openid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxx&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回数据示例：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;mobile_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12345678910&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;餐饮店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;sub_retail_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广东省广州市海珠区新港中路397号TIT创意园&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;retail_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三烧烤店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;identification&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100000000000000001&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;principal&quot;</span><span class="token operator">:</span> <span class="token string">&quot;广州张三烧烤店&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;legal_person_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张*&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;openid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;auth_time&quot;</span><span class="token operator">:</span> <span class="token number">1655458898</span><span class="token punctuation">,</span>
            <span class="token property">&quot;grant_time&quot;</span><span class="token operator">:</span> <span class="token number">1655458909</span><span class="token punctuation">,</span>
            <span class="token property">&quot;longitude&quot;</span><span class="token operator">:</span> <span class="token number">113.32531</span><span class="token punctuation">,</span>
            <span class="token property">&quot;latitude&quot;</span><span class="token operator">:</span> <span class="token number">23.0996132</span><span class="token punctuation">,</span>
            <span class="token property">&quot;business_type&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;食品饮料&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;餐饮&quot;</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>errcode返回值及含义：</strong></p> <div class="table-wrp"><table><thead><tr><th>返回值</th> <th>含义</th></tr></thead> <tbody><tr><td>-1</td> <td>系统繁忙，请稍后重试</td></tr> <tr><td>0</td> <td>成功</td></tr> <tr><td>40001</td> <td>token 无效</td></tr> <tr><td>48001</td> <td>小程序无该api权限，反馈给对接人开通</td></tr> <tr><td>9404101</td> <td>非法参数</td></tr> <tr><td>9404102</td> <td>该店主不存在、未认证或者未授权给你</td></tr> <tr><td>9404103</td> <td>请求过于频繁，请稍后重试</td></tr></tbody></table></div><h3 id="_1-8-全量授权门店查询api"><a href="#_1-8-全量授权门店查询api" class="header-anchor">#</a> 1.8 全量授权门店查询api</h3> <p><strong>调用方式</strong></p> <p>HTTPS 调用</p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/getretailopenidlist?access_token=ACCESS_TOKEN
</code></pre></div><p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>access_token</td> <td>string</td> <td>是</td> <td>接口调用凭证，该参数为 URL 参数，非 Body 参数。使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" target="_blank" rel="noopener noreferrer">getAccessToken<span></span></a> 或者 <a href="https://developers.weixin.qq.com/doc/oplatform/openApi/OpenApiDoc/ticket-token/getAuthorizerAccessToken.html" target="_blank" rel="noopener noreferrer">authorizer_access_token<span></span></a></td></tr> <tr><td>limit</td> <td>number</td> <td>是</td> <td>分页拉取最大返回结果数。取值范围：1-100</td></tr> <tr><td>page_context</td> <td>string</td> <td>是</td> <td>分页上下文。每轮遍历的首次调用传空值，后续调用填上一次调用返回参数的 <code>page_context</code></td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>errcode</td> <td>number</td> <td>错误码。</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误原因。</td></tr> <tr><td>openid_list</td> <td>array&lt;string&gt;</td> <td>openid 列表</td></tr> <tr><td>page_context</td> <td>string</td> <td>分页上下文</td></tr></tbody></table></div><p><strong>调用示例</strong></p> <p><strong>请求数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token property">&quot;page_context&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;openid_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;openid1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;openid2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;page_context&quot;</span><span class="token operator">:</span> <span class="token string">&quot;page_context1&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>常见错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>说明</th></tr></thead> <tbody><tr><td>0</td> <td>成功</td></tr> <tr><td>9404151</td> <td>无效的分页拉取最大返回结果数</td></tr> <tr><td>9404152</td> <td>无效的分页上下文</td></tr></tbody></table></div><h3 id="_1-9-常见QA"><a href="#_1-9-常见QA" class="header-anchor">#</a> 1.9 常见QA</h3> <p>1、预录入门店信息后，调取信息完成认证正确方式，以及为什么会出现报错情况？</p> <p>答：①品牌帮预录入门店信息：假设手机A被品牌预录入门店信息，任何微信号都可以登录手机A+验证码获取门店信息。一旦门店信息被调取，就需要用最初登录手机A调取门店信息的微信号继续完成认证，否则使用其他微信号会报错。</p> <p>②门店自行预录入门店信息：假设微信号A登录手机B+验证码预录入过门店部分信息后退出插件，后面使用别的微信号登录手机B+验证码调取之前预录入信息继续完成认证是会报错的，需要用最初微信号A登录手机号B＋验证码方可调取。</p> <p>注：无论是哪种预录入情况，完成门店认证流程并认证成功，任何微信都可以调取同一个手机号+验证码获取已认证门店信息和进行门店信息修改</p> <h2 id="_2-消息触达"><a href="#_2-消息触达" class="header-anchor">#</a> 2. 消息触达</h2> <h3 id="_2-1-模板消息交互说明"><a href="#_2-1-模板消息交互说明" class="header-anchor">#</a> 2.1 模板消息交互说明</h3> <p>用户（门店）完成认证授权后，开发者可对用户（门店）利用模板消息进行触达。</p> <p><strong>发送方式：</strong></p> <p>1）api发送模板消息：调用消息接口，向指定用户发送模板消息</p> <p><img src="https://res8.wxqcloud.qq.com.cn/wxdoc/97c513ec-30f1-405d-90ca-7fed2a6b552a.png" alt="B2b 模板消息交互说明"></p> <h3 id="_2-2-模板消息列表及下发api"><a href="#_2-2-模板消息列表及下发api" class="header-anchor">#</a> 2.2 模板消息列表及下发api</h3> <p><strong>调用方式</strong></p> <p>HTTPS 调用</p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/retailnotifybusiness?access_token=ACCESS_TOKEN
</code></pre></div><p><strong>模板列表及发送频次</strong></p> <ol><li>门店物料申请进度通知（不限下发次数）</li> <li>门店订单发货通知（不限下发次数）</li> <li>门店订单派送通知（不限下发次数）</li> <li>门店认证进度通知（不限下发次数）</li> <li>门店任务进展通知（单门店可被发送上限：1次/日）</li> <li>优惠券到期提醒（单门店可被发送上限：4次/月）</li> <li>积分到期提醒（单门店可被发送上限：4次/月）</li> <li>兑换券到期提醒（单门店可被发送上限：4次/月）</li> <li>门店调研通知（单门店可被发送上限：4次/月）</li> <li>订单受理结果通知（不限制下发次数）</li> <li>订单退款进度通知（不限制下发次数）</li> <li>退货申请受理通知（不限制下发次数）</li> <li>订单变动通知（不限制下发次数）</li> <li>订单签收通知（不限制下发次数）</li> <li>验证码通知（不限制下发次数）</li> <li>满意度评价提醒（不限制下发次数）</li> <li>月度账单提醒（不限制下发次数）</li> <li>协议签约审核结果通知（不限制下发次数）</li> <li>电子券已核销通知（不限制下发次数）</li> <li>解绑通知（不限制下发次数）</li></ol> <p><strong>新增模板需求可填写链接</strong><a href="https://wj.qq.com/s2/14907941/64ff/" target="_blank" rel="noopener noreferrer">B2b门店助手模板新增需求<span></span></a></p> <h4 id="请求参数"><a href="#请求参数" class="header-anchor">#</a> 请求参数</h4> <div class="table-wrp"><table><thead><tr><th>参数</th> <th>说明</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>type</td> <td>消息类型</td> <td>是</td> <td>枚举值参考<a href="https://docs.qq.com/sheet/DUnhCS01URmdobExD?tab=BB08J2" target="_blank" rel="noopener noreferrer">B2b门店助手模板消息汇总列表<span></span></a></td></tr> <tr><td>content</td> <td>消息内容的json字符串</td> <td>是</td> <td>消息内容，为json格式的字符串，不同类型对应的字符串示例见模板列表</td></tr> <tr><td>to_user_list</td> <td>门店负责人openid列表</td> <td>否</td> <td>门店负责人openid列表，最多一次发送200个openid</td></tr></tbody></table></div><p>注：对于keyword.DATA等”模板消息参数值内容限制说明“参见该链接：<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html" target="_blank" rel="noopener noreferrer">模板消息--微信开放文档<span></span></a></p> <h3 id="_2-3-错误码说明"><a href="#_2-3-错误码说明" class="header-anchor">#</a> 2.3 错误码说明</h3> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>错误说明</th></tr></thead> <tbody><tr><td>9403000</td> <td>消息类型错误!</td></tr> <tr><td>9403001</td> <td>消息字段的内容过长!</td></tr> <tr><td>9403002</td> <td>消息字段的内容违规!</td></tr> <tr><td>9403003</td> <td>发送的微信号太多!</td></tr> <tr><td>40003</td> <td>存在错误的openid!</td></tr></tbody></table></div><h3 id="_2-4-消息效果数据api"><a href="#_2-4-消息效果数据api" class="header-anchor">#</a> 2.4 消息效果数据api</h3> <p><strong>调用方式</strong></p> <p>HTTPS 调用</p> <div class="language- extra-class"><pre class="language-text"><code>POST https://api.weixin.qq.com/wxa/business/getretailmessagelist?access_token=ACCESS_TOKEN
</code></pre></div><p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>access_token</td> <td>string</td> <td>是</td> <td>接口调用凭证，该参数为 URL 参数，非 Body 参数。使用 <a href="https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/mp-access-token/getAccessToken.html" target="_blank" rel="noopener noreferrer">getAccessToken<span></span></a> 或者 <a href="https://developers.weixin.qq.com/doc/oplatform/openApi/OpenApiDoc/ticket-token/getAuthorizerAccessToken.html" target="_blank" rel="noopener noreferrer">authorizer_access_token<span></span></a></td></tr> <tr><td>begin_date</td> <td>string</td> <td>是</td> <td>开始时间，格式为“xxxx-yy-zz”的字符串，例如：“2024-08-01”</td></tr> <tr><td>end_date</td> <td>string</td> <td>是</td> <td>结束时间，格式为“xxxx-yy-zz”的字符串，例如：“2024-08-10”</td></tr> <tr><td>start</td> <td>number</td> <td>是</td> <td>分页起始位置，从0开始计数，用于分页查询，默认值为0</td></tr> <tr><td>offset</td> <td>number</td> <td>是</td> <td>每页返回的数据条数上限，最大值为1000，默认值为20</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>属性</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>errcode</td> <td>number</td> <td>错误码</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误原因</td></tr> <tr><td>total_num</td> <td>number</td> <td>查询到数据总数</td></tr> <tr><td>data_line</td> <td>array&lt;json&gt;</td> <td>数据列表:<br>{<br>    msg_id: 消息id；<br>    msg_type: 消息类型<br>    date: 消息日期；<br>    send_uv: 发送人数；<br>    entry_uv: 进入人数；<br>    date: 消息日期；<br>    msg_time: 消息发送时间；<br>    business_msg_id: 自定义msg_id；<br>}<br></td></tr></tbody></table></div><p><strong>调用示例</strong></p> <p><strong>请求数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token property">&quot;begin_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-10&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;end_date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-15&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回数据示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total_num&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data_line&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;msg_id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-13&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-13 20:55:37&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;send_uv&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;entry_uv&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;business_msg_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;msg_id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-13&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2024-08-13 20:01:15&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;send_uv&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;entry_uv&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;business_msg_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXX&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>常见错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>说明</th></tr></thead> <tbody><tr><td>0</td> <td>成功</td></tr> <tr><td>-1</td> <td>系统错误</td></tr> <tr><td>40079</td> <td>日期格式错误</td></tr> <tr><td>45165</td> <td>offset格式错误或超过最大限制</td></tr></tbody></table></div><h2 id="_3-B2b支付"><a href="#_3-B2b支付" class="header-anchor">#</a> 3. B2b支付</h2> <p>B2b支付，提供两种支付方式选择：</p> <p><strong>1、微信支付：</strong> 适用于常见的支付场景，C端体验与普通微信支付无区别。</p> <p><strong>2、银行转账：</strong> 适用单笔金额大于5万元的支付场景，无需填写付款信息，到账自动认款对账。</p> <p>商家可以按需选择1）同时接入两种支付方式 2）只接入微信支付。</p> <p>使用本支付服务，核心包括以下几个步骤：</p> <p><strong>3.1、申请商户号（页面端&amp;接口）</strong></p> <p>登录 mp.weixin.qq.com，进入小程序后台页面，在 &quot;门店助手-支付管理&quot; 栏目，申请商户号。也可以通过接口方式进行申请。</p> <p>申请商户号时，商家可以按需选择1）同时接入两种支付方式 2）只接入微信支付。</p> <p><strong>3.2、报名技术服务费优惠活动（页面端&amp;接口）</strong></p> <p>开通成功的商户号，技术服务费费率默认为标准费率。可报名技术服务费优惠活动，获得更低的活动费率。</p> <p>若小程序为服务商代开发模式（代开发权限集 18 or B2b门店助手权限集158，授权给到第三方平台），则需要由服务商代为报名。</p> <p><strong>3.3、支付与退款（接口）</strong></p> <p>对接接口，完成支付与退款操作。</p> <p>请注意，选择接入不同的支付方式，对应的支付接口不同：</p> <p>如需使用微信支付，对接<a href="#%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3">微信支付接口</a>；</p> <p>如需银行转账，对接<a href="#%E9%93%B6%E8%A1%8C%E8%BD%AC%E8%B4%A6%E6%8E%A5%E5%8F%A3">银行转账接口</a></p> <p><strong>3.4、查看账单（页面端&amp;接口）</strong></p> <p>登录 mp.weixin.qq.com，进入小程序后台页面，在&quot;门店助手-支付管理&quot;栏目，可查看交易账单，以及操作提现。也可以通过接口的方式获取交易账单与资金账单。</p> <p><strong>3.5、提现（页面端&amp;接口）</strong></p> <p>支持手动提现或者设置自动提现。</p> <h3 id="_3-1-申请商户号"><a href="#_3-1-申请商户号" class="header-anchor">#</a> 3.1 申请商户号</h3> <h4 id="_1、提交商户相关资料"><a href="#_1、提交商户相关资料" class="header-anchor">#</a> 1、提交商户相关资料</h4> <h5 id="页面端方式："><a href="#页面端方式：" class="header-anchor">#</a> 页面端方式：</h5> <p>登录 mp.weixin.qq.com，进入小程序后台页面，在 &quot;门店助手-支付管理&quot; 栏目，点击申请商户号。</p> <p>申请商户号时，商家可以按需选择1）同时开通微信支付和银行转账 2）只开通微信支付。</p> <p><img src="https://res.wx.qq.com/op_res/y5PMOB9PM-yr8WMfk9ugq2bl8trpEckEGWzVcqWLcq_m7uQBQuWDI8qOUwtlOpt0kmQ0jbJfIZwV4dG_4TnxgA" alt></p> <p>填写企业的营业信息，提现账户信息及支付管理员信息等。</p> <p><img src="https://res.wx.qq.com/op_res/CiIrXJTjDuzOlX9fzwBZofgeD-cIgpnRk6Hsh7U7yu-bnziYU5AFt_kyTWoQ7kv65ItFS8h1dImM3-0IQ0G-Fg" alt></p> <h6 id="常见错误"><a href="#常见错误" class="header-anchor">#</a> 常见错误</h6> <ol><li><p>90006：主体校验不通过，请检查统一社会信用代码/主体名称。请先检查营业执照图片是否完成上传；如果已上传，通常是图片自动识别有误，用户需要仔细检查统一社会信用代码和主体名称是否有多余的空格、括号是否有误、字母和数字是否错误等。</p></li> <li><p>222229：有信息未填写完整，补全后重试。</p></li> <li><p>701：根据错误提示修改信息。</p></li> <li><p>填写账户信息时，如果选择不到期望的银行、或手动填写支行名称报错，请仔细检查是否完整填写了银行/支行全称，是否误将支行名称和银行名称混淆。建议参考：https://pay.weixin.qq.com/doc/v3/merchant/4012076270</p></li></ol> <h5 id="接口端方式：商户号进件-API"><a href="#接口端方式：商户号进件-API" class="header-anchor">#</a> 接口端方式：商户号进件 API</h5> <p>可以通过 api 方式进行商户号的进件。</p> <p><strong>接口说明</strong></p> <p>请求URL：https://api.weixin.qq.com/retail/B2b/retailregistermch?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>id_doc_type_num</td> <td>uint32</td> <td>法人证件类型</td> <td>0-默认即大陆身份证，1-大陆身份证，2-其他国家或地区居民护照，3-中国香港居民来往内地通行证，4-中国澳门居民–来往内地通行证，5-中国台湾居民–来往大陆通行证，6-外国人居留证（仅开通微信支付时支持），7-港澳居民证（仅开通微信支付时支持），8-台湾居民证（仅开通微信支付时支持）<br>[ 注：当前仅微信支付方式支持后三种证件类型，即仅当 open_type = 0 时, id_doc_type_num 可选填 6、7、8 ]</td> <td>是</td></tr> <tr><td>id_card_info</td> <td>JSON</td> <td>经营者/法人身份证信息</td> <td>- id_card_copy: string, 身份证人像面照片id, 通过上传商户资料api获取<br>- id_card_national: string, 身份证国徽面照片id, 通过上传商户资料api获取<br>- id_card_name: string, 身份证姓名<br>- id_card_number: string, 身份证号码<br>- id_card_valid_time: string, 身份证有效期限, 格式如&quot;2026-06-06&quot;、&quot;长期&quot;<br>- id_card_address: string, 身份证地址<br>- id_card_valid_time_begin: string, 身份证有效期开始日期, 格式如&quot;2026-06-06&quot;</td> <td>当id_doc_type_num为0和1时必填</td></tr> <tr><td>id_doc_info</td> <td>JSON</td> <td>经营者/法人其他类型证件信息</td> <td>- id_doc_name：string，证件姓名<br>- id_doc_number: string，证件号码<br>- id_doc_copy：string，证件正面照片，通过上传商户资料 api 获取<br>- doc_period_end: string，证件结束日期，格式如&quot;2022-06-06&quot;、&quot;长期&quot;<br>- doc_period_begin: string，证件有效期开始时间，格式如&quot;2022-06-06&quot;<br>- id_doc_address: string，证件居住地址<br>- id_doc_copy_back: string，证件反面照片，通过上传商户资料 api 获取</td> <td>当id_doc_type_num不为0和1时必填</td></tr> <tr><td>account_info</td> <td>JSON</td> <td>结算银行账户</td> <td>- bank_account_type: string，账户类型，若主体为企业/党政、机关及事业单位/其他组织，可填&quot;74&quot;，表示对公账户；若主体为&quot;小微/个人卖家&quot;，可填&quot;75&quot;，表示对私账户；若主体为个体工商户，可填&quot;74&quot;或&quot;75&quot;<br>- account_bank: string, 开户银行，比如&quot;工商银行&quot;<br>- account_name: string，开户名称<br>- bank_address_code: string，开户银行省市编码，例如&quot;110000&quot;<br>- bank_branch_id: string，开户银行联行号，开户银行全称（含支行）和开户银行联行号二选一<br>- bank_name: string，开户银行全称<br>- account_number: string，银行帐号<br><br>【附】银行信息相关参考<br>省市区编号对照表：https://pay.weixin.qq.com/doc/v3/partner/4012082815<br>开户银行全称对照表：https://pay.weixin.qq.com/doc/v3/partner/4012082812<br>开户银行对照表：https://pay.weixin.qq.com/doc/v3/partner/4012082813</td> <td>是</td></tr> <tr><td>contact_info</td> <td>JSON</td> <td>超级管理员信息</td> <td>- contact_type: string, 主体为&quot;小微/个人卖家&quot;，可填&quot;65&quot;; 主体为&quot;个体工商户/企业/党政、机关及事业单位/其他组织&quot;，可填&quot;65&quot;表示经营者/法人，或者&quot;66&quot;表示经办人。<br>- contact_name: string，超级管理员姓名<br>- contact_id_doc_type：string，超级管理员证件类型 当超级管理员类型是经办人时，请上传超级管理员证件类型。<br>// 中国大陆居民-身份证 <br>  &quot;IDENTIFICATION_TYPE_MAINLAND_IDCARD&quot;<br>  // 其他国家或地区居民-护照<br>  &quot;IDENTIFICATION_TYPE_OVERSEA_PASSPORT&quot;<br>  // 中国香港居民–来往内地通行证<br>  &quot;IDENTIFICATION_TYPE_HONGKONG&quot;<br>  // 中国澳门居民–来往内地通行证<br> &quot;IDENTIFICATION_TYPE_MACAO&quot;<br>  // 中国台湾居民–来往大陆通行证<br>  &quot;IDENTIFICATION_TYPE_TAIWAN&quot;<br>// 外国人居留证（仅开通微信支付时支持）<br> &quot;IDENTIFICATION_TYPE_FOREIGN_RESIDENT&quot;<br>//  港澳居民证（仅开通微信支付时支持）<br> &quot;IDENTIFICATION_TYPE_HONGKONG_MACAO_RESIDENT&quot;<br>// 台湾居民证（仅开通微信支付时支持）<br> &quot;IDENTIFICATION_TYPE_TAIWAN_RESIDENT&quot; <br><br>- contact_id_card_number：string，超级管理员身份证件号码<br>- contact_id_doc_copy：string，超级管理员证件正面照片id，当超级管理员类型是经办人时，请上传超级管理员证件的正面照片。<br>- contact_id_doc_copy_back: string,超级管理员证件反面照片,当超级管理员类型是经办人时，请上传超级管理员证件的反面照片。<br>- contact_id_doc_period_begin: string,超级管理员证件有效期开始时间 当超级管理员类型是经办人时，请上传证件有效期开始时间。<br>- contact_id_doc_period_end: string, 级管理员证件有效期结束时间 当超级管理员类型是经办人时，请上传证件有效期结束时间。<br>- business_authorization_letter: string，业务办理授权函。1、当超级管理员类型是经办人时，请上传业务办理授权函。2、请参照示例图打印业务办理授权函，全部信息需打印，不支持手写商户信息，并加盖公章。<br>- mobile_phone: string, 超级管理员手机,<br>- contact_email: string, 超级管理员邮箱,主体类型为&quot;小微商户/个人卖家&quot;可选填，其他主体需必填。</td> <td>是</td></tr> <tr><td>business_license</td> <td>JSON</td> <td>营业执照</td> <td>- business_license_copy: string, 证件扫描件图片id，可通过上传商户资料 api 获取<br>- business_license_number: string, 证件注册号<br>- merchant_name: string, 商户名称<br>- legal_person: string, 经营者/法定代表人姓名<br>- company_address: string, 注册地址，主体为&quot;党政、机关及事业单位/其他组织&quot;时必填，请填写登记证书的注册地址。<br>- business_time: string, 营业期限，主体为&quot;党政、机关及事业单位/其他组织&quot;时必填。<br>- cert_type: string, 1、主体为&quot;政府机关/事业单位/社会组织&quot;时，请上传登记证书类型。2、主体为&quot;个体工商户/企业&quot;时，不填。当主体为事业单位时，填枚举值：&quot;CERTIFICATE_TYPE_2388&quot;, 表示事业单位法人证书；当主体为政府机关，填枚举值：&quot;CERTIFICATE_TYPE_2389&quot;，表示统一社会信用代码证书</td> <td>是</td></tr> <tr><td>merchant_shortname</td> <td>string</td> <td>商户名缩写</td> <td>-</td> <td>必填</td></tr> <tr><td>organization_type</td> <td>uint32</td> <td>主体类型</td> <td>个体户-0，企业-1</td> <td>必填</td></tr> <tr><td>qualification</td> <td>JSON</td> <td>行业特殊资质资料</td> <td>- qualification_type: string, 行业特殊资质类型，如&quot;速送&quot;, 见：https://kf.qq.com/faq/220228qEfuAz220228bMFji6.html <br> - qualifications: string, 行业特殊资料, 字符串数组构成的字符串，示例值:&quot;[&quot;jTpGmxUX3FBWVQ5NJInE4d2I6_H7I4&quot;]&quot;</td> <td>行业特殊资质类型必填；行业特殊资料在需要上传时必填</td></tr> <tr><td>business_addition_desc</td> <td>string</td> <td>补充说明</td> <td>示例值：特殊情况，说明原因</td> <td>否</td></tr> <tr><td>business_addition_pics</td> <td>string</td> <td>补充材料</td> <td>材料图片id可通过上传商户资料 api 获取。如有多张图片，请拼接成一张后上传。</td> <td>否</td></tr> <tr><td>open_type</td> <td>uint32</td> <td>开通支付方式</td> <td>只开通微信支付-0<br>同时开通微信支付和银行转账-1</td> <td>必填</td></tr> <tr><td>ext_register_info</td> <td>JSON</td> <td>补充信息</td> <td>- door_head_file_id: string, 企业门头照 id，可通过上传商户资料 api 获取<br>- store_file_id: string, 商城截图 id, 可通过上传商户资料 api 获取<br>- online_pay_file_id: string, 确认订单付款界面截图 id，可通过上传商户资料 api 获取<br>- merchant_scale: string, 企业规模，可选枚举值如下：<br>LARGE: 大型企业 2000 人以上<br>MIDDLE: 中型企业 150 至 2000 人<br>SMALL: 小型企业 15 至 150 人<br>TINY: 微型企业 15 人以下<br>- authorization_letter_file_id: string, 银行转账授权书图片 id，当同时开通银行转账（open_type = 1）且超级管理员为经办人时填写。授权书见 https://mqq-imgcache.gtimg.cn/tbep/entrustment_b2b/b2b_protocol_250701.pdf ，图片 id 可通过上传商户资料 api 获取。<br>- contact_id_doc_address: string, 经办人证件地址，当超级管理员为经办人时补充填写</td> <td>必填</td></tr> <tr><td>client_ip</td> <td>string</td> <td>商户 ip 地址</td> <td>支持 iPv4 和 iPv6</td> <td>必填</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>order_no</td> <td>string</td> <td>进件申请单号</td> <td>可用于查询进件状态</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id_doc_type_num&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id_card_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id_card_copy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_national&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;440000199001011111&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_valid_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2041-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北京市朝阳区等等等&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_card_valid_time_begin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-01-01&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;account_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;bank_account_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;74&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;account_bank&quot;</span><span class="token operator">:</span> <span class="token string">&quot;招商银行&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bank_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;招商银行xx支行&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;account_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北京食品有限公司&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;bank_address_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contact_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;contact_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;65&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_id_card_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;440000199001011111&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mobile_phone&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12345678911&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;contact_email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@qq.com&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;business_license&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;business_license_copy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;business_license_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ABC123&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;merchant_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北京食品有限公司&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;legal_person&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小明&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merchant_shortname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;北京食品&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;organization_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ignore_same_entity&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;launch_poll_task&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;qualification&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;qualification_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;食品生鲜&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;open_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ext_register_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;door_head_file_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;store_file_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;online_pay_file_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V1_xxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;merchant_scale&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LARGE&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;client_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;order_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;regorder123&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcorde</th> <th>errmsg</th></tr></thead> <tbody><tr><td>90000</td> <td>商户主体已经处于进件中</td></tr> <tr><td>90001</td> <td>主体类型不符要求</td></tr> <tr><td>90003</td> <td>提交频繁</td></tr> <tr><td>90004</td> <td>证件类型不符</td></tr> <tr><td>90005</td> <td>该商户主体进件数目达到上限</td></tr> <tr><td>222229</td> <td>进件申请字段填写不完整</td></tr> <tr><td>9403200</td> <td>id_doc_type_num字段超出范围</td></tr></tbody></table></div><h5 id="接口端方式：上传商户图片-API"><a href="#接口端方式：上传商户图片-API" class="header-anchor">#</a> 接口端方式：上传商户图片 API</h5> <p>可以通过 api 上传资料获取图片 id，进件时填充图片 id</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/retailuploadmchfile?access_token=ACCESS_TOKEN" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/retailuploadmchfile?access_token=ACCESS_TOKEN<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>file_name</td> <td>string</td> <td>文件名</td> <td>-</td> <td>必填</td></tr> <tr><td>file</td> <td>bytes</td> <td>文件二进制流的 Base64 编码</td> <td>-</td> <td>必填</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>file_id</td> <td>string</td> <td>文件 id</td> <td>-</td></tr></tbody></table></div><h4 id="_2、查询商户号开通状态"><a href="#_2、查询商户号开通状态" class="header-anchor">#</a> 2、查询商户号开通状态</h4> <h5 id="页面端方式：-2"><a href="#页面端方式：-2" class="header-anchor">#</a> 页面端方式：</h5> <p>登录 mp.weixin.qq.com，进入小程序后台页面，在 &quot;门店助手-支付管理&quot; 栏目，可随时查看最新的申请进度。</p> <h5 id="接口端方式：查询商户号开通状态API"><a href="#接口端方式：查询商户号开通状态API" class="header-anchor">#</a> <span id="Mark2">接口端方式：查询商户号开通状态API</span></h5> <p>可以通过api方式查询商户号进件订单（包含状态信息等）</p> <p><strong>接口说明</strong></p> <p>请求URL：https://api.weixin.qq.com/retail/B2b/retailgetmchorder?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>out_registration_id</td> <td>string</td> <td>订单号</td> <td>某个特定的进件订单号</td> <td>否，不填则表示拉出当前小程序的所有进件单</td></tr> <tr><td>page_index</td> <td>uint32</td> <td>分页拉取偏移</td> <td>-</td> <td>否</td></tr> <tr><td>page_size</td> <td>uint32</td> <td>分页拉取总量限制</td> <td>-</td> <td>否</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>list</td> <td>array&lt;JSON&gt;</td> <td>订单列表</td> <td>status:<br>0-初始化<br>1-资料校验中<br>2-待账户验证<br>3-审核中<br>4-已驳回<br>5-待签约<br>6-完成<br>7-已冻结<br>8-已作废<br>9-完成前平台额外准备<br><br>inner_resp: 定义见下表<br><br>wqf_register_statement: 银行转账开通状态，仅开通银行转账（即 open_type = 1）时返回，定义见下表<br><br>wx_pay_rate: 微信支付技术服务费率，万分比，比如 40 指的是 0.40%<br><br>wqf_certified_rate: 银行转账技术服务费率，开通银行转账后返回，万分比，比如 40 指的是 0.40%<br><br>bind_scene_status: 与小程序关联状态<br>1-关联申请中<br>2-关联失败<br>3-待商户号超管同意<br>4-待小程序超管同意<br>5-关联中<br>6-已关联</td></tr> <tr><td>total</td> <td>uint32</td> <td>返回订单总数</td> <td>-</td></tr></tbody></table></div><p><strong>inner_resp</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型[长度限制]</th> <th>必填</th> <th>简述</th> <th>描述</th></tr></thead> <tbody><tr><td>申请状态</td> <td>sub_merchant_registration_status</td> <td>object</td> <td>是</td> <td>申请状态描述</td> <td>具体结构见下表</td></tr></tbody></table></div><p><strong>sub_merchant_registration_status</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型[长度限制]</th> <th>必填</th> <th>简述</th> <th>描述</th> <th>枚举值</th></tr></thead> <tbody><tr><td>申请状态</td> <td>applyment_state</td> <td>string[1,32]</td> <td>是</td> <td>申请状态描述</td> <td>CHECKING: 资料校验中<br>ACCOUNT_NEED_VERIFY: 待账户验证<br>AUDITING: 审核中<br>REJECTED: 已驳回<br>NEED_SIGN: 待签约<br>FINISH: 完成<br>FROZEN: 已冻结<br>CANCELED: 已作废</td> <td>示例值: FINISH</td></tr> <tr><td>申请状态描述</td> <td>applyment_state_desc</td> <td>string[1,1024]</td> <td>是</td> <td>申请状态描述</td> <td>示例值: &quot;完成&quot;</td> <td></td></tr> <tr><td>签约状态</td> <td>sign_state</td> <td>string[1,16]</td> <td>否</td> <td>签约状态描述</td> <td>1. UNSIGNED: 未签约。<br>该状态下，电商平台可查询获取签约链接，引导二级商户的超级管理员完成签约；<br>2. SIGNED: 已签约。<br>指二级商户的超级管理员已完成签约。注意：若申请单被驳回，商户修改了商户主体名称、法人名称、超级管理员信息、主体类型等信息，则需要重新签约。<br>3. NOT_SIGNABLE: 不可签约。<br>该状态下，暂不支持超级管理员签约。一般为申请单处于已驳回、已冻结、机器校验中状态，无法签约。</td> <td>示例值: SIGNED</td></tr> <tr><td>签约链接</td> <td>sign_url</td> <td>string[1,256]</td> <td>否</td> <td>签约链接</td> <td>1. 当申请状态为 NEED_SIGN 或 签约状态为 UNSIGNED 时返回，该链接为永久有效；<br>2. 申请单中的超级管理员，需用已实名认证的微信扫码打开，完成签约。</td> <td>示例值: https://pay.weixin.qq.com/public/apply4ec_sign/s?applymentId=2000002126198476&amp;sign=b207b673049a32c858f3aa0bd7d27c7ec</td></tr> <tr><td>电商平台二级商户号</td> <td>sub_mchid</td> <td>string[1,32]</td> <td>否</td> <td>电商平台二级商户号</td> <td>当申请状态为 NEED_SIGN 或 FINISH 时才返回。</td> <td>示例值: 1542488631</td></tr> <tr><td>汇款账户验证信息</td> <td>account_validation</td> <td>object</td> <td>否</td> <td>汇款账户验证信息</td> <td>当申请状态为 ACCOUNT_NEED_VERIFY 时有返回，具体定义见下表。可根据指引汇款，完成账户验证。</td> <td></td></tr> <tr><td>驳回原因详情</td> <td>audit_detail</td> <td>array</td> <td>否</td> <td>驳回原因详情</td> <td>各项资料的审核情况，具体定义见下表。当申请状态为 REJECTED 或 FROZEN 时才返回。</td> <td></td></tr> <tr><td>法人验证链接</td> <td>legal_validation_url</td> <td>string[1,256]</td> <td>否</td> <td>法人验证链接</td> <td>1. 当申请状态为 ACCOUNT_NEED_VERIFY，且通过系统校验的申请单，将返回链接。<br>2. 建议将链接转为二维码展示，让商户法人用微信扫码打开，完成账户验证。<br>注：商户申请单进入审核状态后，微信侧会校验法人证件号码是否跟营业执照匹配，若匹配，返回该字段；若不匹配，不支持法人扫码验证，不返回该字段。</td> <td>示例值: http://pay.weixin.qq.com/public/apply4ec_sign/s?applymentId=2000002126198476&amp;sign=b207b673049a32c858f3aa0bd7d27c7ec</td></tr></tbody></table></div><p><strong>wqf_register_statement</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型</th> <th>必填</th> <th>描述</th> <th>枚举值</th></tr></thead> <tbody><tr><td>银行转账开通状态</td> <td>wqf_register_state</td> <td>uint32</td> <td>是</td> <td>银行转账开通状态</td> <td>0: 未开通<br>1: 开通中<br>2: 开通成功<br>3: 开通失败，可尝试重新<a href="#Mark3">申请开通银行转账</a><br>4: 申请驳回，商户需<a href="#Mark1">跳转银行转账页面</a>，完善信息后重新提交。<br>5: 申请开通中（已开通微信支付，申请开通银行转账的场景）<br>6: 申请开通失败（已开通微信支付，申请开通银行转账的场景）</td></tr> <tr><td>银行转账开通状态描述</td> <td>wqf_register_state_desc</td> <td>string</td> <td>是</td> <td>银行转账开通状态描述</td> <td>示例值: &quot;待完善信息&quot;</td></tr> <tr><td>银行转账开通单号</td> <td>request_no</td> <td>string</td> <td>否</td> <td>银行转账开通单号，仅当银行转账进入开通状态（开通中、开通成功、开通失败、申请驳回）时返回，可用于获取跳转链接</td> <td>示例值: &quot;MSE123&quot;</td></tr></tbody></table></div><p><strong>account_validation</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型</th> <th>必填</th></tr></thead> <tbody><tr><td>账户名称</td> <td>account_name</td> <td>string</td> <td>是</td></tr> <tr><td>账号</td> <td>account_no</td> <td>string</td> <td>是</td></tr> <tr><td>支付金额</td> <td>pay_amount</td> <td>int64</td> <td>是</td></tr> <tr><td>目的账号</td> <td>destination_account_number</td> <td>string</td> <td>是</td></tr> <tr><td>目的账户名</td> <td>destination_account_name</td> <td>string</td> <td>是</td></tr> <tr><td>目的银行</td> <td>destination_account_bank</td> <td>string</td> <td>是</td></tr> <tr><td>城市</td> <td>city</td> <td>string</td> <td>是</td></tr> <tr><td>标志</td> <td>remark</td> <td>string</td> <td>是</td></tr> <tr><td>截止日期</td> <td>deadline</td> <td>string</td> <td>是</td></tr></tbody></table></div><p><strong>audit_detail</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型</th> <th>必填</th></tr></thead> <tbody><tr><td>参数名称</td> <td>param_name</td> <td>string</td> <td>是</td></tr> <tr><td>驳回理由</td> <td>reject_reason</td> <td>string</td> <td>是</td></tr></tbody></table></div><h4 id="_3、申请开通银行转账"><a href="#_3、申请开通银行转账" class="header-anchor">#</a> <span id="Mark3">3、申请开通银行转账</span></h4> <p>在微信支付开通成功、但未开通银行转账的情况下，商户可以申请开通银行转账支付方式。</p> <h5 id="_1、申请开通银行转账"><a href="#_1、申请开通银行转账" class="header-anchor">#</a> 1、申请开通银行转账</h5> <h6 id="页面端方式：-3"><a href="#页面端方式：-3" class="header-anchor">#</a> 页面端方式：</h6> <p>登录 mp.weixin.qq.com，进入小程序后台页面，在 &quot;B2b门店助手-支付管理&quot; 栏目，点击 &quot;去开通&quot; 申请开通银行转账。</p> <p><img src="https://res.wx.qq.com/op_res/CiIrXJTjDuzOlX9fzwBZoTo3GzlZLFuvDx1Si8esTgI53QDoAQfWl9Bvo_ElFKaXaz0totAsAEI6OFSI5f4UoQ" alt></p> <h6 id="接口端方式：申请开通银行转账-API"><a href="#接口端方式：申请开通银行转账-API" class="header-anchor">#</a> 接口端方式：申请开通银行转账 API</h6> <p>可以通过 api 方式进行银行转账的开通申请。</p> <p><strong>接口说明</strong></p> <p>请求URL：https://api.weixin.qq.com/retail/B2b/registeronlywqf?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>out_registration_id</td> <td>string</td> <td>订单号</td> <td>原有进件订单号</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;out_registration_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;regorder000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h5 id="_2、查询银行转账开通情况"><a href="#_2、查询银行转账开通情况" class="header-anchor">#</a> 2、查询银行转账开通情况</h5> <p>银行转账开通状态查询 API 同<a href="#Mark2">商户号开通状态查询</a>，这里重点关注请求响应中的 wqf_register_statement 字段。</p> <p><strong>wqf_register_statement</strong></p> <div class="table-wrp"><table><thead><tr><th>返回参数</th> <th>参数名</th> <th>类型</th> <th>必填</th> <th>描述</th> <th>枚举值</th></tr></thead> <tbody><tr><td>银行转账开通状态</td> <td>wqf_register_state</td> <td>uint32</td> <td>是</td> <td>银行转账开通状态</td> <td>0: 未开通<br>1: 开通中<br>2: 开通成功<br>3: 开通失败，可尝试重新<a href="#Mark3">申请开通银行转账</a><br>4: 申请驳回，商户需<a href="#Mark1">跳转银行转账页面</a>，完善信息后重新提交。<br>5: 申请开通中（已开通微信支付，申请开通银行转账的场景）<br>6: 申请开通失败（已开通微信支付，申请开通银行转账的场景）</td></tr> <tr><td>银行转账开通状态描述</td> <td>wqf_register_state_desc</td> <td>string</td> <td>是</td> <td>银行转账开通状态描述</td> <td>示例值: &quot;待完善信息&quot;</td></tr> <tr><td>银行转账开通单号</td> <td>request_no</td> <td>string</td> <td>否</td> <td>银行转账开通单号，仅当银行转账进入开通状态（开通中、开通成功、开通失败、申请驳回）时返回，可用于获取跳转链接</td> <td>示例值: &quot;MSE123&quot;</td></tr></tbody></table></div><p>以下为各状态详细说明：</p> <ol><li><p>成功调用申请开通银行转账接口后，状态扭转为“申请开通中”，对应枚举值 5。</p></li> <li><p>若申请开通失败，状态扭转为“申请开通失败”，对应枚举值 6。可尝试重新调用银行转账开通接口进行申请。</p></li> <li><p>若申请开通成功，将正式进入银行转账开通流程，wqf_register_statement 里会携带银行转账开通单号 request_no。此时有四种可能状态：</p> <p>1）开通中 - 1，详细情况将在 wqf_register_state_desc 里返回：</p> <ul><li>待完善信息：商户需<a href="#Mark1">跳转银行转账页面</a>，完善信息后重新提交。</li> <li>待用户签约：商户需<a href="#Mark1">跳转银行转账页面</a>，完成银行转账签约。</li> <li>资料校验中：无需操作。</li> <li>系统审核中：无需操作。</li></ul> <p>2）开通成功 - 2。</p> <p>3）开通失败 - 3，可尝试重新调用银行转账开通接口进行申请。</p> <p>4）申请驳回 - 4，商户需<a href="#Mark1">跳转银行转账页面</a>，修改资料后重新提交。</p></li></ol> <h5 id="_3、跳转银行转账页面"><a href="#_3、跳转银行转账页面" class="header-anchor">#</a> <span id="Mark1">3、跳转银行转账页面</span></h5> <p>申请开通银行转账后，当开通状态描述为“待完善信息”、“待用户签约”、“申请驳回”时，都需要跳转到微企付页面完成相应操作。</p> <h6 id="页面端方式：-4"><a href="#页面端方式：-4" class="header-anchor">#</a> 页面端方式：</h6> <p><img src="https://res.wx.qq.com/op_res/CiIrXJTjDuzOlX9fzwBZobdPKS9ny2DSx79wB_aCmk-btG3xQCkYIUsw7kstH7FDZ9bTjiRsDLkgtlofIZvrLw" alt></p> <h6 id="接口端方式："><a href="#接口端方式：" class="header-anchor">#</a> 接口端方式：</h6> <p>可以通过 api 方式获取微企付页面跳转链接。</p> <p>注意：该跳转链接有过期时限，且限制点击次数，应在每次跳转前调用接口生成新的链接。</p> <p><strong>接口说明</strong></p> <p>请求URL：https://api.weixin.qq.com/retail/B2b/createwqflink?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>request_no</td> <td>string</td> <td>银行转账开通单号</td> <td>-</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;request_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MSE123&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;https://tencent.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span><span class="token string">&quot;2025-03-19T16:08:17+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4、进行账户验证（若支付管理员为公司法人，无该步骤）"><a href="#_4、进行账户验证（若支付管理员为公司法人，无该步骤）" class="header-anchor">#</a> 4、进行账户验证（若支付管理员为公司法人，无该步骤）</h4> <p>若支付管理员不是法人，则需进行账户验证，可以选择以下任一方式。</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGr6OgIcTXosW4csqdlZt3m3AeTDYhXP159slvhXLBMLhLdUZX2cN2ZuWTYjTSKMADfQ" alt></p> <h4 id="_5、资料审核与账户状态查询"><a href="#_5、资料审核与账户状态查询" class="header-anchor">#</a> 5、资料审核与账户状态查询</h4> <p>完成商户资料提交及账户验证后，将进入平台审核环节，审核一般需要1-7个工作日，你可以随时进入页面或通过查询
API查看最新审核状态。</p> <h4 id="_6、签约"><a href="#_6、签约" class="header-anchor">#</a> 6、签约</h4> <p>平台审核通过后，进入最终商户号开通签约环节，请超级管理员根据指引扫码完成签约。</p> <p>完成签约后，将进入&quot;商户号开通中&quot;状态，平台将为你开通商户号，稍后片刻即可完成最终开通。当状态变成&quot;已开通&quot;后，即可通过该商户号使用本支付服务。</p> <h4 id="_7、完成商户号与小程序的关联"><a href="#_7、完成商户号与小程序的关联" class="header-anchor">#</a> 7、完成商户号与小程序的关联</h4> <p>商户号完成开通后，需根据指引进行相关操作，确保&quot;与小程序关联状态&quot;为&quot;已关联&quot;，商户号方可在小程序中成功发起支付！</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGr-PVmY-Z7UxwghDwfdq69Z3xrjEtuEnPJkSJIT3FudNu6aF1ehQce0QH_HCqMp4Z1Q" alt></p> <p><strong>1）当&quot;与小程序关联状态&quot;为&quot;待商户号超管同意&quot;时</strong></p> <p>请商户号超管前往&quot;微信支付商家助手&quot;公众号按照收到的&quot;创建经营场景申请进展通知&quot;，或者pc
登录商户平台<a href="https://pay.weixin.qq.com" target="_blank" rel="noopener noreferrer">pay.weixin.qq.com<span></span></a>按照站内信通知，进行相关操作：</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGrw2ojTSHlofBocjAhAl8fXTFAjnBrrHd5jMizkhYu8zchtWyvM7sZ9xU7JWCuweBUA" alt></p> <p>【特别说明】因平台运营规范要求，实物交易类小程序后续均需要接入<a href="https://developers.weixin.qq.com/miniprogram/product/jiaoyilei/fahuoguanligongneng.html" target="_blank" rel="noopener noreferrer">订单发货管理功能<span></span></a>，其中部分小程序已经要求接入。</p> <p>对于要求接入的小程序，商户号超管进行创建经营场景确认的时候，需按照页面指引进行相关确认授权。</p> <p>确认授权后，正常交易情况下，交易都会
T+0自动结算，无需用户确认收货，无需对接订单发货管理接口。仅当交易出现违规时，平台会进行介入。请放心操作。</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGr0-kCl6_OmFutGeHiAPa8Y5yGCRGWiQ9pnVL-t5LcwQpS6qbxu_1g9bJNdCHRChT6A" alt></p> <p><strong>2）当&quot;与小程序关联状态&quot;为&quot;待小程序超管同意&quot;时</strong></p> <p>请小程序超管pc 登录小程序后台
mp.weixin.qq.com，前往【功能-微信支付】，针对以下两个待确认流程进行确认操作。</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGr4JiI-FqkmLUhoHW6_YpfoRqm4DbX6CTWd2CIjMqY7kSO2jrQUkN0WtCPa_vkAsdBw" alt> <img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGr6PCkOmEY_41BqYgyvtizoo7reCS8dyMiWFzjUhrxC41AAQE2aWpw8NAs3idV28OPg" alt></p> <h4 id="_8、获取小程序下所有商户的信息"><a href="#_8、获取小程序下所有商户的信息" class="header-anchor">#</a> 8、获取小程序下所有商户的信息</h4> <p>可以通过 api 方式获取某个小程序下所有商户的信息。</p> <p><strong>接口说明</strong></p> <p>请求URL：https://api.weixin.qq.com/retail/B2b/getmchinfo?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <p>无</p> <p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>mch_list</td> <td>array&lt;MerchantInfoDetail&gt;</td> <td>商户列表</td> <td>具体结构如下表</td></tr> <tr><td>total</td> <td>uint32</td> <td>总数</td> <td>-</td></tr> <tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr></tbody></table></div><p><strong>MerchantInfoDetail</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>sub_mchid</td> <td>string</td> <td>商户号</td> <td>注：有商户号不代表已开通成功，当 wxpay_status 值为 “完成” 才能使用。</td></tr> <tr><td>company_name</td> <td>string</td> <td>企业名称</td> <td>-</td></tr> <tr><td>bank_name</td> <td>string</td> <td>开户银行</td> <td>-</td></tr> <tr><td>bank_account</td> <td>string</td> <td>银行账号</td> <td>脱敏处理，仅保留前两位和后两位，中间用 * 代替。</td></tr> <tr><td>wxpay_status</td> <td>string</td> <td>微信支付开通状态</td> <td>枚举：<br>- 完成前平台额外准备<br>- 完成</td></tr> <tr><td>bank_transfer_status</td> <td>string</td> <td>银行转账开通状态</td> <td>枚举：<br>- 未开通<br>- 开通中<br>- 开通成功<br>- 开通失败<br>- 申请驳回</td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;mch_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;sub_mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;company_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xx有限公司&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bank_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xx银行&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bank_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11***************11&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;wxpay_status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;完成&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;bank_transfer_status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;开通中&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;total&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-报名技术服务费优惠活动"><a href="#_3-2-报名技术服务费优惠活动" class="header-anchor">#</a> 3.2 报名技术服务费优惠活动</h3> <h4 id="页面端方式：-5"><a href="#页面端方式：-5" class="header-anchor">#</a> 页面端方式：</h4> <p>商户号开通成功后，可分别报名微信支付、银行转账的技术服务费优惠活动。</p> <h4 id="接口端方式（微信支付侧报名）："><a href="#接口端方式（微信支付侧报名）：" class="header-anchor">#</a> 接口端方式（微信支付侧报名）：</h4> <h5 id="_1、报名微信支付技术服务费优惠活动"><a href="#_1、报名微信支付技术服务费优惠活动" class="header-anchor">#</a> 1、报名微信支付技术服务费优惠活动</h5> <p><strong>接口说明</strong></p> <p>请求
URL：https://api.weixin.qq.com/retail/B2b/setmchprofitrate?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>sub_mchid</td> <td>string</td> <td>商户号</td> <td>-</td> <td>是</td></tr> <tr><td>profit_rate</td> <td>uint32</td> <td>费率</td> <td>万分比，比如 40 指的是 0.40%</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sub_mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;profit_rate&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>errmsg</th></tr></thead> <tbody><tr><td>11</td> <td>缺少设置费率的权限</td></tr> <tr><td>12</td> <td>不在可以设置费率的时间范围内</td></tr> <tr><td>13</td> <td>费率只能下调</td></tr> <tr><td>14</td> <td>费率不在范围内调</td></tr></tbody></table></div><h5 id="_2、查询微信支付技术服务费率"><a href="#_2、查询微信支付技术服务费率" class="header-anchor">#</a> 2、查询微信支付技术服务费率</h5> <p>同<a href="#Mark2">商户号开通状态查询</a>，见请求响应中的 wx_pay_rate 字段。</p> <h4 id="接口端方式（银行转账侧报名）："><a href="#接口端方式（银行转账侧报名）：" class="header-anchor">#</a> 接口端方式（银行转账侧报名）：</h4> <h5 id="_1、报名银行转账技术服务费优惠活动"><a href="#_1、报名银行转账技术服务费优惠活动" class="header-anchor">#</a> 1、报名银行转账技术服务费优惠活动</h5> <p><strong>接口说明</strong></p> <p>请求
URL：https://api.weixin.qq.com/retail/B2b/updatewqfchargefee?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>sub_mchid</td> <td>string</td> <td>商户号</td> <td>-</td> <td>是</td></tr> <tr><td>certified_charge_fee_numerator</td> <td>int32</td> <td>认证费率分子</td> <td>认证门店的费率分子，分母统一为10000，certified_charge_fee_numerator 取值范围应该大于等于22，小于等于40。<br>示例：费率千四（4/1000）, certified_charge_fee_numerator = 40</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>merchant_name</td> <td>string</td> <td>商户名称</td> <td>-</td></tr> <tr><td>certified_charge_fee_numerator</td> <td>int32</td> <td>认证费率分子</td> <td>认证的门店的费率分子，分母统一为10000。<br>示例：费率千四（4/1000）, certified_charge_fee_numerator = 40</td></tr> <tr><td>uncertified_charge_fee_numerator</td> <td>int32</td> <td>未认证的费率分子</td> <td>未认证的费率分子，分母统一为10000。<br>示例：费率千六（6/1000）, uncertified_charge_fee_numerator = 60</td></tr> <tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sub_mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;certified_charge_fee_numerator&quot;</span><span class="token operator">:</span> <span class="token number">22</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;merchant_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;xx公司&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;certified_charge_fee_numerator&quot;</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uncertified_charge_fee_numerator&quot;</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">,</span>
    <span class="token property">&quot;effect_time&quot;</span><span class="token operator">:</span><span class="token string">&quot;2025-03-12T20:03:54+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span><span class="token string">&quot;2125-03-12T20:03:24+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>errmsg</th></tr></thead> <tbody><tr><td>2</td> <td>参数填写错误</td></tr> <tr><td>14</td> <td>设置费率不在合法范围内</td></tr></tbody></table></div><h5 id="_2、查询银行转账的技术服务费率"><a href="#_2、查询银行转账的技术服务费率" class="header-anchor">#</a> 2、查询银行转账的技术服务费率</h5> <p>可以通过<a href="#Mark2">商户号状态查询</a>获取，见请求响应中的 wqf_certified_rate 字段。也可通过以下 api 接口单独获取。</p> <p><strong>接口说明</strong></p> <p>请求
URL：https://api.weixin.qq.com/retail/B2b/getwqfchargefee?access_token=ACCESS_TOKEN</p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>sub_mchid</td> <td>string</td> <td>商户号</td> <td>-</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>merchant_name</td> <td>string</td> <td>商户名称</td> <td>-</td></tr> <tr><td>certified_charge_fee_numerator</td> <td>int32</td> <td>认证费率分子</td> <td>认证的门店的费率分子，分母统一为10000。<br>示例：费率千四（4/1000）, certified_charge_fee_numerator = 40</td></tr> <tr><td>uncertified_charge_fee_numerator</td> <td>int32</td> <td>未认证的费率分子</td> <td>未认证的费率分子，分母统一为10000。<br>示例：费率千六（6/1000）, uncertified_charge_fee_numerator = 60</td></tr> <tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;sub_mchid&quot;</span><span class="token operator">:</span><span class="token string">&quot;123&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;merchant_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;xx公司&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;certified_charge_fee_numerator&quot;</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uncertified_charge_fee_numerator&quot;</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">,</span>
    <span class="token property">&quot;effect_time&quot;</span><span class="token operator">:</span><span class="token string">&quot;2025-03-12T20:03:54+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expire_time&quot;</span><span class="token operator">:</span><span class="token string">&quot;2125-03-12T20:03:24+08:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th>errcode</th> <th>errmsg</th></tr></thead> <tbody><tr><td>1</td> <td>尚未开通银行转账</td></tr> <tr><td>2</td> <td>参数填写错误</td></tr></tbody></table></div><h3 id="_3-3-支付与退款"><a href="#_3-3-支付与退款" class="header-anchor">#</a> 3.3 支付与退款</h3> <h4 id="_1、签名详解"><a href="#_1、签名详解" class="header-anchor">#</a> <span id="1签名详解">1、签名详解 </span></h4> <p>在基础库wx.requestCommonPayment会涉及用户态签名signature和支付签名paySig，在服务器API接口会涉及支付签名pay_sig，和小程序接口的paySig签名方式一致，都遵循本签名详解。</p> <p><strong>支付签名</strong></p> <p>签名算法伪代码为
<code>signature = to_hex(hmac_sha256(sessionKey,signData))</code></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">wxAPI</th> <th style="text-align:left">服务器API</th></tr></thead> <tbody><tr><td style="text-align:left">appKey</td> <td style="text-align:left">可通过小程序MP查看：门店助手 -&gt; 支付管理 -&gt; 商户号管理查看详情-&gt;基本配置中的沙箱AppKey和现网AppKey。注意：记得根据env值选择不同AppKey，env = 0对应现网AppKey，env = 1对应沙箱AppKey<br><span>此外，也可以直接调用API接口获取AppKey，见<a href="#Mark">7、获取AppKey</a></span></td> <td style="text-align:left">获得方式相同，服务器API只用现网AppKey，不区分环境</td></tr> <tr><td style="text-align:left">signData</td> <td style="text-align:left">基础库的signData字段</td> <td style="text-align:left">api的post body</td></tr> <tr><td style="text-align:left">uri</td> <td style="text-align:left">requestCommonPayment</td> <td style="text-align:left">举例：对于https://api.weixin.qq.com/retail/B2b/getorder 来说，uri = /retail/B2b/getorder</td></tr></tbody></table></div><p><strong>用户态签名</strong></p> <p>签名算法伪代码为：</p> <div class="language- extra-class"><pre class="language-text"><code>signature = to_hex(hmac_sha256(sessionKey,signData))
</code></pre></div><div class="table-wrp"><table><thead><tr><th><strong>参数</strong></th> <th><strong>wxAPI</strong></th> <th><strong>服务器API</strong></th></tr></thead> <tbody><tr><td>sessionKey</td> <td>session_key</td> <td>获得方式相同，服务器API暂不需要</td></tr> <tr><td>signData</td> <td>基础库的signData字段</td> <td>api的post body</td></tr></tbody></table></div><p><span id="签名算法"><strong>参考的python脚本</strong></span></p> <p>以调用getorder为例，签名计算如下：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#!/usr/bin/python</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot; pay_sig签名算法计算示例 &quot;&quot;&quot;</span>

<span class="token keyword">import</span> hmac
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> json
<span class="token keyword">import</span> time

<span class="token keyword">def</span> <span class="token function">calc_pay_sig</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> post_body<span class="token punctuation">,</span> appkey<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; pay_sig签名算法
      Args:
     uri - 当前请求的API的uri部分，不带query_string 例如：/retail/B2b/getorder
          post_body - http POST的数据包体
          appkey    - 对应环境的AppKey
      Returns:
          支付请求签名pay_sig
    &quot;&quot;&quot;</span>
    need_sign_msg <span class="token operator">=</span> uri <span class="token operator">+</span> <span class="token string">'&amp;'</span> <span class="token operator">+</span> post_body
    pay_sig <span class="token operator">=</span> hmac<span class="token punctuation">.</span>new<span class="token punctuation">(</span>key <span class="token operator">=</span> appkey<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msg <span class="token operator">=</span> need_sign_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                       digestmod<span class="token operator">=</span>hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> pay_sig

<span class="token keyword">def</span> <span class="token function">calc_signature</span><span class="token punctuation">(</span>post_body<span class="token punctuation">,</span> session_key<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; 用户登录态signature签名算法
      Args:
          post_body   - http POST的数据包体
          session_key - 当前用户有效的session_key，参考auth.code2Session接口
      Returns:
          用户登录态签名signature
    &quot;&quot;&quot;</span>
    need_sign_msg <span class="token operator">=</span> post_body
    signature <span class="token operator">=</span> hmac<span class="token punctuation">.</span>new<span class="token punctuation">(</span>key <span class="token operator">=</span> session_key<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> msg <span class="token operator">=</span> need_sign_msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                       digestmod<span class="token operator">=</span>hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> signature

<span class="token comment"># uri，切记不可带参数，即去掉&quot;?&quot;及后面的部分</span>
<span class="token comment"># 如果是基础库的wx.requestCommonPayment，uri固定为requestCommonPayment</span>
uri <span class="token operator">=</span> <span class="token string">'/retail/B2b/getorder'</span>

<span class="token comment"># 此处appkey为假设值，实际使用应根据支付环境(env参数)替换为对应的AppKey</span>
appkey <span class="token operator">=</span> <span class="token string">&quot;12345&quot;</span>

<span class="token comment"># 注意：JSON数据序列化结果，不同语言/版本结果可能不同</span>
<span class="token comment"># 所以示例为了保证稳定性，直接用其中一个序列化的版本</span>
<span class="token comment"># 实际使用时只需要保证，参与签名的post_body和真正发起http请求的一致即可</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;
# 不同接口要求的Post Body参数不一样，此处以getorder接口为例(和uri对应）
post_body = json.dumps({
    &quot;mchid&quot;: &quot;1230000109&quot;,
    &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;
})
&quot;&quot;&quot;</span>
post_body <span class="token operator">=</span> <span class="token string">'{&quot;mchid&quot;: &quot;1230000109&quot;,&quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;}'</span>

<span class="token comment"># step1. pay_sig签名计算（支付请求签名算法）</span>
pay_sig <span class="token operator">=</span> calc_pay_sig<span class="token punctuation">(</span>uri<span class="token punctuation">,</span> post_body<span class="token punctuation">,</span> appkey<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;pay_sig:&quot;</span><span class="token punctuation">,</span> pay_sig<span class="token punctuation">)</span>

<span class="token comment"># 若实际请求返回pay_sig签名不对，根据以下步骤排查：</span>
<span class="token comment"># 1. 确认算法：uri、post_body、appkey写死以上参数，确保你的签名算法和示例calc_pay_sig结果完全一致</span>
<span class="token comment"># 2. 确认参数：</span>
<span class="token comment">#    - uri不可带参数（即&quot;?&quot;及后续部分全部舍去）</span>
<span class="token comment">#    - post_body必须和真正发起HTTP请求的post body完全一致</span>
<span class="token comment">#    - appkey必须是与请求中对应的环境匹配（env参数决定）</span>
<span class="token comment">#    - 注：签名区分大小写</span>
<span class="token keyword">assert</span> pay_sig <span class="token operator">==</span> <span class="token string">&quot;2cb3e9fda4da9774f0c6f747bbf6c56e9045969d9921db7344fffdc945c1dc23&quot;</span>

<span class="token comment"># step2. signature签名计算（用户登录态签名算法）</span>
<span class="token comment"># session_key需要为当前用户有效session_key（参考auth.code2Session接口获取）</span>
<span class="token comment"># 注：签名区分大小写</span>
<span class="token comment"># 此处写死方便复现算法</span>
session_key <span class="token operator">=</span> <span class="token string">&quot;9hAb/NEYUlkaMBEsmFgzig==&quot;</span>
signature <span class="token operator">=</span> calc_signature<span class="token punctuation">(</span>post_body<span class="token punctuation">,</span> session_key<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;signature:&quot;</span><span class="token punctuation">,</span> signature<span class="token punctuation">)</span>
<span class="token keyword">assert</span> signature <span class="token operator">==</span> <span class="token string">&quot;47784191c740b0522d39d0a3926a19aa0e30c77975f689a9739c9553ffac2d9d&quot;</span>
</code></pre></div><h4 id="_2、下单"><a href="#_2、下单" class="header-anchor">#</a> 2、下单</h4> <p>选择接入不同的支付方式，对应的支付接口会有不同：</p> <p>如需使用微信支付，对接<a href="#%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E6%8E%A5%E5%8F%A3">微信支付接口</a></p> <p>如需银行转账，对接<a href="#%E9%93%B6%E8%A1%8C%E8%BD%AC%E8%B4%A6%E6%8E%A5%E5%8F%A3">银行转账接口</a></p> <h5 id="微信支付接口"><a href="#微信支付接口" class="header-anchor">#</a> <span id="微信支付接口">微信支付接口</span></h5> <p>如果需要使用微信支付，则可对接此接口方式。</p> <p><strong>接口说明</strong></p> <p>小程序接口 wx.requestCommonPayment(Object object)</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>signData</td> <td>Object</td> <td>是</td> <td>具体支付参数，详见<strong>signData</strong>，该参数以string传递。<br>示例值：'{&quot;mchid&quot;:&quot;1654806452&quot;,&quot;out_trade_no&quot;:&quot;test1244&quot;,&quot;description&quot;:&quot;测试测试&quot;,&quot;amount&quot;:{&quot;order_amount&quot;:1,&quot;currency&quot;:&quot;CNY&quot;},&quot;attach&quot;:&quot;test_attach&quot;,&quot;env&quot;:1}'</td></tr> <tr><td>mode</td> <td>string</td> <td>是</td> <td>支付类型，不同mode的signData不同，B2b支付固定填retail_pay_goods<br>示例值：retail_pay_goods</td></tr> <tr><td>paySig</td> <td>string</td> <td>是</td> <td>支付签名，详见签名详解</td></tr> <tr><td>signature</td> <td>string</td> <td>是</td> <td>用户态签名，详见签名详解</td></tr> <tr><td>success</td> <td>function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table></div><p><strong>1) signData</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">商品描述</td> <td style="text-align:left">description</td> <td style="text-align:left">string[1,127]</td> <td style="text-align:left">是</td> <td style="text-align:left">商品描述，最多 127 字节<br><span style="color: green;"> 示例值：Image形象店-深圳腾大-QQ公仔</span></td></tr> <tr><td style="text-align:left">订单金额</td> <td style="text-align:left">amount</td> <td style="text-align:left">object</td> <td style="text-align:left">是</td> <td style="text-align:left">订单金额信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td style="text-align:left">附加数据</td> <td style="text-align:left">attach</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">否</td> <td style="text-align:left">附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。<br><span style="color: green;">示例值：自定义数据</span></td></tr> <tr><td style="text-align:left">商品信息</td> <td style="text-align:left">product_info</td> <td style="text-align:left">Object</td> <td style="text-align:left">否</td> <td style="text-align:left">订单详细商品信息，格式见<strong>ProductInfo</strong></td></tr> <tr><td style="text-align:left">配送方式</td> <td style="text-align:left">delivery_type</td> <td style="text-align:left">uint32</td> <td style="text-align:left">否</td> <td style="text-align:left">配送方式，具体取值为： 1.同城配送 2.快递配送 3.门店自提 4.无需配送与提货<br><span style="color: green;"> 示例值：2</span></td></tr> <tr><td style="text-align:left">下单环境</td> <td style="text-align:left">env</td> <td style="text-align:left">uint32</td> <td style="text-align:left">是</td> <td style="text-align:left">下单环境，具体取值为：0.生产环境 1.沙箱环境<br><span style="color: green;">示例值：0 </span></td></tr></tbody></table></div><p><strong>2）Amount</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品原总金额</td> <td>product_amount</td> <td>int64</td> <td>否</td> <td>订单所有商品的原价总和，单位为分<br><span style="color: green;">示例值：1000</span></td></tr> <tr><td>运费</td> <td>freight</td> <td>int64</td> <td>否</td> <td>订单运费，单位为分<br><span style="color: green;">示例值：200</span></td></tr> <tr><td>总优惠金额</td> <td>discount</td> <td>int64</td> <td>否</td> <td>订单总计优惠金额，单位为分<br><span style="color: green;">示例值：500</span></td></tr> <tr><td>其他费用</td> <td>other_fee</td> <td>int64</td> <td>否</td> <td>订单其他费用总金额，单位为分<br><span style="color: green;">示例值：600</span></td></tr> <tr><td>订单总金额</td> <td>order_amount</td> <td>int64</td> <td>是</td> <td>订单总需支付金额，也即是真正下单总金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>货币类型</td> <td>currency</td> <td>string</td> <td>否</td> <td>货币类型，仅支持&quot;CNY&quot;。<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>3）ProductInfo</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品编号</td> <td>spu_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的spuid<br><span style="color: green;">示例值：spu123456</span></td></tr> <tr><td>商品规格编号</td> <td>sku_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的skuid<br><span style="color: green;">示例值：sku123</span></td></tr> <tr><td>商品标题</td> <td>title</td> <td>string[1,60]</td> <td>是</td> <td>商品标题<br><span style="color: green;">示例值：QQ长鹅</span></td></tr> <tr><td>商详页小程序路径</td> <td>path</td> <td>string</td> <td>是</td> <td>商户商品详请页小程序路径<br><span style="color: green;">示例值：pages/index</span></td></tr> <tr><td>商品主图</td> <td>head_img</td> <td>string</td> <td>是</td> <td>商品主图的url，大小建议64*64<br><span style="color: green;">示例值：https://mp.weixin.qq.com/123</span></td></tr> <tr><td>类目</td> <td>category</td> <td>string</td> <td>是</td> <td>商户侧该商品所属的类目<br><span style="color: green;">示例值：玩偶</span></td></tr> <tr><td>sku属性</td> <td>sku_attr</td> <td>string</td> <td>是</td> <td>商户系统内该商品的sku属性<br><span style="color: green;">示例值：50cm</span></td></tr> <tr><td>商品原价</td> <td>org_price</td> <td>int32</td> <td>是</td> <td>该商品原价，单位为分<br><span style="color: green;">示例值：5000</span></td></tr> <tr><td>商品售价</td> <td>sale_price</td> <td>int32</td> <td>是</td> <td>该商品售价，单位为分<br><span style="color: green;">示例值：4000</span></td></tr> <tr><td>商品数量</td> <td>quantity</td> <td>int32</td> <td>是</td> <td>用户购买该商品的数量<br><span style="color: green;">示例值：5</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;signData&quot;: &quot;{\&quot;mchid\&quot;:\&quot;1654806452\&quot;,\&quot;out_trade_no\&quot;:\&quot;test1244\&quot;,\&quot;description\&quot;:\&quot;测试测试\&quot;,\&quot;amount\&quot;:{\&quot;order_amount\&quot;:1,\&quot;currency\&quot;:\&quot;CNY\&quot;},\&quot;attach\&quot;:\&quot;test_attach\&quot;,\&quot;env\&quot;:1}&quot;,
  &quot;mode&quot;: &quot;retail_pay_goods&quot;,
  &quot;paySig&quot;: &quot;xxxxxxxxxx&quot;,
  &quot;signature&quot;: &quot;xxxxxxxxxx&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <p>object.success 回调函数</p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>errMsg</td> <td>string</td> <td>调用成功信息</td></tr></tbody></table></div><p>object.fail 回调函数</p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>errMsg</td> <td>string</td> <td>错误信息</td></tr> <tr><td>errCode</td> <td>number</td> <td>错误码</td></tr></tbody></table></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">说明</th></tr></thead> <tbody><tr><td style="text-align:left">1000</td> <td style="text-align:left">系统错误</td></tr> <tr><td style="text-align:left">1022</td> <td style="text-align:left">参数json格式非法</td></tr> <tr><td style="text-align:left">702001</td> <td style="text-align:left">参数错误，具体原因见err_msg</td></tr> <tr><td style="text-align:left">702002</td> <td style="text-align:left">用户态签名错误</td></tr> <tr><td style="text-align:left">702003</td> <td style="text-align:left">支付签名错误</td></tr> <tr><td style="text-align:left">702004</td> <td style="text-align:left">mode不合法</td></tr> <tr><td style="text-align:left">702005</td> <td style="text-align:left">out_trade_no重复，请更换新单号重试</td></tr> <tr><td style="text-align:left">702006</td> <td style="text-align:left">二级商户进件未完成</td></tr> <tr><td style="text-align:left">702008</td> <td style="text-align:left">正式版小程序只能用生产环境下单</td></tr> <tr><td style="text-align:left">702009</td> <td style="text-align:left">未开通银行转账，或订单金额小于5万</td></tr></tbody></table></div><h5 id="银行转账接口"><a href="#银行转账接口" class="header-anchor">#</a> <span id="银行转账接口">银行转账接口</span></h5> <p>提供银行转账支付能力。目前该接口仅支持 B2b 支付类型。</p> <p><strong>接口说明</strong></p> <p>小程序接口 wx.enterpriseBankTransfer(Object object)</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>signData</td> <td>Object</td> <td>是</td> <td>具体支付参数，详见<strong>signData</strong>，该参数以string传递。<br>示例值：'{&quot;mchid&quot;:&quot;1654806452&quot;,&quot;out_trade_no&quot;:&quot;test1244&quot;,&quot;description&quot;:&quot;测试测试&quot;,&quot;amount&quot;:{&quot;order_amount&quot;:1,&quot;currency&quot;:&quot;CNY&quot;},&quot;attach&quot;:&quot;test_attach&quot;,&quot;env&quot;:1}'</td></tr> <tr><td>mp_path</td> <td>string</td> <td>否</td> <td>用于安卓系统支付完成后回跳指定页面。建议指定订单详情页或支付结果页，并在页面 onShow 时查询最新订单状态更新展示。</td></tr> <tr><td>paySig</td> <td>string</td> <td>是</td> <td>支付签名，详见签名详解</td></tr> <tr><td>signature</td> <td>string</td> <td>是</td> <td>用户态签名，详见签名详解</td></tr> <tr><td>success</td> <td>function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table></div><p><strong>1) signData</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">商品描述</td> <td style="text-align:left">description</td> <td style="text-align:left">string[1,127]</td> <td style="text-align:left">是</td> <td style="text-align:left">商品描述，最多 127 字节<br><span style="color: green;"> 示例值：Image形象店-深圳腾大-QQ公仔</span></td></tr> <tr><td style="text-align:left">订单金额</td> <td style="text-align:left">amount</td> <td style="text-align:left">object</td> <td style="text-align:left">是</td> <td style="text-align:left">订单金额信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td style="text-align:left">附加数据</td> <td style="text-align:left">attach</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">否</td> <td style="text-align:left">附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。<br><span style="color: green;">示例值：自定义数据</span></td></tr> <tr><td style="text-align:left">商品信息</td> <td style="text-align:left">product_info</td> <td style="text-align:left">Object</td> <td style="text-align:left">否</td> <td style="text-align:left">订单详细商品信息，格式见<strong>ProductInfo</strong></td></tr> <tr><td style="text-align:left">配送方式</td> <td style="text-align:left">delivery_type</td> <td style="text-align:left">uint32</td> <td style="text-align:left">否</td> <td style="text-align:left">配送方式，具体取值为： 1.同城配送 2.快递配送 3.门店自提 4.无需配送与提货<br><span style="color: green;"> 示例值：2</span></td></tr> <tr><td style="text-align:left">下单环境</td> <td style="text-align:left">env</td> <td style="text-align:left">uint32</td> <td style="text-align:left">是</td> <td style="text-align:left">下单环境，具体取值为：0.生产环境 1.沙箱环境<br><span style="color: green;">示例值：0 </span></td></tr></tbody></table></div><p><strong>2）Amount</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品原总金额</td> <td>product_amount</td> <td>int64</td> <td>否</td> <td>订单所有商品的原价总和，单位为分<br><span style="color: green;">示例值：1000</span></td></tr> <tr><td>运费</td> <td>freight</td> <td>int64</td> <td>否</td> <td>订单运费，单位为分<br><span style="color: green;">示例值：200</span></td></tr> <tr><td>总优惠金额</td> <td>discount</td> <td>int64</td> <td>否</td> <td>订单总计优惠金额，单位为分<br><span style="color: green;">示例值：500</span></td></tr> <tr><td>其他费用</td> <td>other_fee</td> <td>int64</td> <td>否</td> <td>订单其他费用总金额，单位为分<br><span style="color: green;">示例值：600</span></td></tr> <tr><td>订单总金额</td> <td>order_amount</td> <td>int64</td> <td>是</td> <td>订单总需支付金额，也即是真正下单总金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>货币类型</td> <td>currency</td> <td>string</td> <td>否</td> <td>货币类型，仅支持&quot;CNY&quot;。<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>3）ProductInfo</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品编号</td> <td>spu_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的spuid<br><span style="color: green;">示例值：spu123456</span></td></tr> <tr><td>商品规格编号</td> <td>sku_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的skuid<br><span style="color: green;">示例值：sku123</span></td></tr> <tr><td>商品标题</td> <td>title</td> <td>string[1,60]</td> <td>是</td> <td>商品标题<br><span style="color: green;">示例值：QQ长鹅</span></td></tr> <tr><td>商详页小程序路径</td> <td>path</td> <td>string</td> <td>是</td> <td>商户商品详请页小程序路径<br><span style="color: green;">示例值：pages/index</span></td></tr> <tr><td>商品主图</td> <td>head_img</td> <td>string</td> <td>是</td> <td>商品主图的url，大小建议64*64<br><span style="color: green;">示例值：https://mp.weixin.qq.com/123</span></td></tr> <tr><td>类目</td> <td>category</td> <td>string</td> <td>是</td> <td>商户侧该商品所属的类目<br><span style="color: green;">示例值：玩偶</span></td></tr> <tr><td>sku属性</td> <td>sku_attr</td> <td>string</td> <td>是</td> <td>商户系统内该商品的sku属性<br><span style="color: green;">示例值：50cm</span></td></tr> <tr><td>商品原价</td> <td>org_price</td> <td>int32</td> <td>是</td> <td>该商品原价，单位为分<br><span style="color: green;">示例值：5000</span></td></tr> <tr><td>商品售价</td> <td>sale_price</td> <td>int32</td> <td>是</td> <td>该商品售价，单位为分<br><span style="color: green;">示例值：4000</span></td></tr> <tr><td>商品数量</td> <td>quantity</td> <td>int32</td> <td>是</td> <td>用户购买该商品的数量<br><span style="color: green;">示例值：5</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>wx.enterpriseBankTransfer({
    signData: JSON.stringify(signDataObj),
    paySig: &quot;&quot;,
    signature: &quot;&quot;,
    mp_path: &quot;pages/index/index&quot;,
    success: (res: any) =&gt; {
    console.log(&quot;成功&quot;);
    console.log(res);
    wx.showModal({
        title: &quot;发起成功&quot;,
        content: `${JSON.stringify(res)}（当前时间：${Date.now()}）`,
    });
    },
    fail: (e: any) =&gt; {
        console.log(signDataObj);
        console.log(&quot;失败&quot;);
        console.log(e);
        const costTime = Date.now() - beginTime;
        wx.showModal({
            title: &quot;发起失败&quot;,
            content: `${JSON.stringify(
            e
            )}（从“发起支付”到“发起失败”耗时：${costTime}ms）`,
        });
    },
});
</code></pre></div><p><strong>返回参数</strong></p> <p>object.success 回调函数</p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>errMsg</td> <td>string</td> <td>调用成功信息</td></tr></tbody></table></div><p>object.fail 回调函数</p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型</strong></th> <th><strong>说明</strong></th></tr></thead> <tbody><tr><td>errMsg</td> <td>string</td> <td>错误信息</td></tr> <tr><td>errCode</td> <td>number</td> <td>错误码</td></tr></tbody></table></div><p><strong>错误码</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">说明</th></tr></thead> <tbody><tr><td style="text-align:left">1000</td> <td style="text-align:left">系统错误</td></tr> <tr><td style="text-align:left">1022</td> <td style="text-align:left">参数json格式非法</td></tr> <tr><td style="text-align:left">702001</td> <td style="text-align:left">参数错误，具体原因见err_msg</td></tr> <tr><td style="text-align:left">702002</td> <td style="text-align:left">用户态签名错误</td></tr> <tr><td style="text-align:left">702003</td> <td style="text-align:left">支付签名错误</td></tr> <tr><td style="text-align:left">702004</td> <td style="text-align:left">mode不合法</td></tr> <tr><td style="text-align:left">702005</td> <td style="text-align:left">out_trade_no重复，请更换新单号重试</td></tr> <tr><td style="text-align:left">702006</td> <td style="text-align:left">二级商户进件未完成</td></tr> <tr><td style="text-align:left">702008</td> <td style="text-align:left">正式版小程序只能用生产环境下单</td></tr> <tr><td style="text-align:left">702009</td> <td style="text-align:left">未开通银行转账，或订单金额小于5万</td></tr></tbody></table></div><h5 id="接入支付错误排查参考"><a href="#接入支付错误排查参考" class="header-anchor">#</a> 接入支付错误排查参考</h5> <h6 id="_1000-系统错误"><a href="#_1000-系统错误" class="header-anchor">#</a> 1000 系统错误</h6> <ol><li>结合传递的具体错误信息进行排查。例如：<code>{&quot;code&quot;:&quot;INVALID REQUEST&quot;,&quot;message&quot;:&quot;sub_mchid与sub_appid不匹配&quot;}</code>，通常指商户号和 appid 的绑定关系有问题。</li></ol> <h6 id="_1022-参数-json-格式非法"><a href="#_1022-参数-json-格式非法" class="header-anchor">#</a> 1022 参数 json 格式非法</h6> <ol><li>检查 json 格式，例如是否将 object 类型传成了 string 类型。</li></ol> <h6 id="_702001-参数错误"><a href="#_702001-参数错误" class="header-anchor">#</a> 702001 参数错误</h6> <ol><li><p>检查传参类型，如是否将 int64 类型误传成 string 类型。</p></li> <li><p>检查传参结构是否错误。</p></li></ol> <h6 id="_702002-signature-签名错误"><a href="#_702002-signature-签名错误" class="header-anchor">#</a> 702002 signature 签名错误</h6> <ol><li><p>排查 signature 计算算法是否正确：仔细阅读<a href="#%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95">参考的python脚本</a>，检查相同数据下的计算结果是否与平台一致。如不一致，请修改算法直至一致。</p></li> <li><p>排查参与计算的 signData 是否和真正发起 HTTP 请求的 signData 完全一致。</p></li> <li><p>排查 session_key 是否过期：https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.checkSession.html</p></li></ol> <h6 id="_702003-paySig-支付签名错误"><a href="#_702003-paySig-支付签名错误" class="header-anchor">#</a> 702003 paySig 支付签名错误</h6> <ol><li><p>排查 paySig 计算算法是否正确：仔细阅读<a href="#%E7%AD%BE%E5%90%8D%E7%AE%97%E6%B3%95">参考的python脚本</a>，检查相同数据下的计算结果是否与平台一致。如不一致，请修改算法直至一致。</p></li> <li><p>排查使用的 appkey 是否正确：应根据 env 值选择不同 appkey，env = 0 对应现网 appkey，env = 1 对应沙箱 appkey。建议调用接口<a href="#Mark">7、获取AppKey</a>来检查传入的 appKey 是否正确。</p></li> <li><p>排查参与计算的 signData 是否和真正发起 HTTP 请求的 signData 完全一致。</p></li> <li><p>对于合单支付场景，paySig 要传多个商户号对应的签名，例如：<code>'[{&quot;mchid&quot;: &quot;1651234567&quot;, &quot;paysig&quot;: &quot;XXXXXX&quot;}, {&quot;mchid&quot;:&quot;1661234567&quot;,&quot;paysig&quot;:&quot;YYYYYY&quot;}]'</code>，这里实际是用同一份 signData 和不同商户的 appkey 分别生成签名。</p></li></ol> <h6 id="_702004-mode-错误"><a href="#_702004-mode-错误" class="header-anchor">#</a> 702004 mode 错误</h6> <ol><li><p>检查传参是否携带 mode 字段， 或 mode 字符串是否错误。</p></li> <li><p>检查传参结构是否错误。mode 和 signData 应为同级字段。</p></li></ol> <h6 id="_702006-二级商户进件未完成"><a href="#_702006-二级商户进件未完成" class="header-anchor">#</a> 702006 二级商户进件未完成</h6> <ol><li><p>检查当前商户号是否开通完成。</p></li> <li><p>检查预期商户号是否为当前实际传参的商户号（通常是这个原因）。</p></li></ol> <h6 id="_702009-未开通银行转账，或订单金额小于5万"><a href="#_702009-未开通银行转账，或订单金额小于5万" class="header-anchor">#</a> 702009 未开通银行转账，或订单金额小于5万</h6> <ol><li><p>检查当前商户号是否完成了银行转账的开通。</p></li> <li><p>检查当前订单金额是否大于等于 5 万元。</p></li></ol> <h4 id="_3、关闭订单"><a href="#_3、关闭订单" class="header-anchor">#</a> 3、关闭订单</h4> <p><strong>接口说明</strong></p> <p>仅当订单处于待支付状态（ORDER_PRE_PAY）时，可以调用本接口主动关闭订单。对于合单支付的订单，任一子单关单会使同主单下的所有子单都被关闭。</p> <p>注：关闭订单为异步操作，可通过查询订单获取状态。</p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/closeb2border?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/closeb2border?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109 </span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的商户订单号。商户订单号和B2b支付订单号必填其一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">B2b支付订单号</td> <td style="text-align:left">order_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的B2b支付订单号。商户订单号和B2b支付订单号必填其一<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;
}
或
{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">错误码</td> <td style="text-align:left">errcode</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">接口返回的错误码，0表示成功；其他非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">错误信息</td> <td style="text-align:left">errmsg</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><h4 id="_4、支付通知"><a href="#_4、支付通知" class="header-anchor">#</a> 4、支付通知</h4> <p><strong>接口说明</strong></p> <p>通过<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/server-ability/message-push.html" target="_blank" rel="noopener noreferrer">消息推送功能<span></span></a>发送给业务方服务器，业务方按照消息推送的要求回复，否则会认为通知失败。通知失败后会按照一定的策略重新发起通知，以尽可能通知到商户，但并不保证通知最终能成功。（通知重试频率为10s,
30s, 60s, 5min, 15min, 30min, 60m, 3h, 6h, 12h）</p> <p><strong>通知参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>小程序原始ID</td> <td>ToUserName</td> <td>string</td> <td>是</td> <td>小程序原始ID<br><span style="color: green;">示例值：gh_xxxxx</span></td></tr> <tr><td>事件消息openid</td> <td>FromUserName</td> <td>string</td> <td>是</td> <td>微信官方的openid<br><span style="color: green;">示例值：oUpF8uMuAJO_M2pxb1Q9zNjWeS6o</span></td></tr> <tr><td>消息发送时间</td> <td>CreateTime</td> <td>int64</td> <td>是</td> <td>消息发送时间戳<br><span style="color: green;">示例值：1698643478</span></td></tr> <tr><td>消息类型</td> <td>MsgType</td> <td>string</td> <td>是</td> <td>消息类型，固定为event<br><span style="color: green;">示例值：event</span></td></tr> <tr><td>事件类型</td> <td>Event</td> <td>string</td> <td>是</td> <td>事件类型，固定为retail_pay_notify<br><span style="color: green;">示例值：retail_pay_notify</span></td></tr> <tr><td>小程序ID</td> <td>appid</td> <td>string[1,32]</td> <td>是</td> <td>商户申请的小程序对应的appid<br><span style="color: green;">示例值：wx8888888888888888</span></td></tr> <tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td>商户订单号</td> <td>out_trade_no</td> <td>string[6,32]</td> <td>是</td> <td>商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td>B2b支付订单号</td> <td>order_id</td> <td>string[1,32]</td> <td>是</td> <td>B2b支付生成的订单号<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr> <tr><td>订单状态</td> <td>pay_status</td> <td>string[1,32]</td> <td>是</td> <td>订单状态，枚举值<br>ORDER_PAY_SUCC：订单支付成功<br>ORDER_CLOSE：订单已关闭<br><span style="color: green;">示例值：ORDER_PAY_SUCC</span></td></tr> <tr><td>支付完成时间</td> <td>pay_time</td> <td>string[1,32]</td> <td>否</td> <td>支付完成时间，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss<br><span style="color: green;">示例值：2023-07-20 17:04:28</span></td></tr> <tr><td>附加数据</td> <td>attach</td> <td>string[1,128]</td> <td>否</td> <td>附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。<br><span style="color: green;">示例值：自定义数据</span></td></tr> <tr><td>支付者</td> <td>payer_openid</td> <td>string[1,128]</td> <td>是</td> <td>用户在直连商户appid下的唯一标识。<br><span style="color: green;">示例值：oUpF8uMuAJO_M2pxb1Q9zNjWeS6o</span></td></tr> <tr><td>订单金额</td> <td>amount</td> <td>object</td> <td>否</td> <td>订单金额信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td>微信支付订单号</td> <td>wxpay_transaction_id</td> <td>string[1,32]</td> <td>否</td> <td>微信支付生成的订单号<br><span style="color: green;">示例值：2123191423123564754773</span></td></tr> <tr><td>订单环境</td> <td>env</td> <td>int32</td> <td>是</td> <td>订单环境 0：正式环境 1：沙箱环境<br><span style="color: green;">示例值：0</span></td></tr></tbody></table></div><p><strong>1) Amount</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>订单总金额</td> <td>order_amount</td> <td>int64</td> <td>是</td> <td>订单总需支付金额，也即是真正下单总金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>用户支付金额</td> <td>payer_amount</td> <td>int64</td> <td>是</td> <td>用户支付金额，单位为分（指使用优惠券的情况下，这里等于总金额-优惠券金额，目前暂不支持优惠券）<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>货币类型</td> <td>currency</td> <td>string</td> <td>是</td> <td>货币类型，仅支持人民币&quot;CNY&quot;<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>3、通知示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;ToUserName&quot;: &quot;gh_xxxxx&quot;,
  &quot;FromUserName&quot;: &quot;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o&quot;,
  &quot;CreateTime&quot;: &quot;1698643478&quot;,
  &quot;MsgType&quot;: &quot;event&quot;,
  &quot;Event&quot;: &quot;retail_pay_notify&quot;,
  &quot;appid&quot;: &quot;wx8888888888888888&quot;,
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;,
  &quot;pay_status&quot;: &quot;ORDER_PAY_SUCC&quot;,
  &quot;pay_time&quot;: &quot;2023-07-20 17:04:28&quot;,
  &quot;attach&quot;: &quot;&quot;,
  &quot;payer_openid&quot;: &quot;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o&quot;,
  &quot;amount&quot;: {
    &quot;order_amount&quot;: 1,
	&quot;payer_amount&quot;: 1,
	&quot;currency&quot;: &quot;CNY&quot;,
  },
  &quot;wxpay_transaction_id&quot;: &quot;2123191423123564754773&quot;,
  &quot;env&quot;: 0
}
</code></pre></div><p><strong>应答参数</strong></p> <ol><li><p>直接回复success（推荐方式）</p></li> <li><p>直接回复空串（指字节长度为0的空字符串，而不是结构体中content字段的内容为空）</p></li></ol> <h4 id="_5、查询订单"><a href="#_5、查询订单" class="header-anchor">#</a> 5、查询订单</h4> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/getorder?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/getorder?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;
}
或
{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">小程序ID</td> <td style="text-align:left">appid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户申请的小程序对应的appid<br><span style="color: green;">示例值：wx8888888888888888</span></td></tr> <tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018 </span></td></tr> <tr><td style="text-align:left">B2b支付订单号</td> <td style="text-align:left">order_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">B2b支付生成的订单号<br><span style="color: green;">示例值：o202307291423123564754773 </span></td></tr> <tr><td style="text-align:left">订单状态</td> <td style="text-align:left">pay_status</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">订单状态，枚举值<br>ORDER_INIT：订单初始化<br>ORDER_PRE_PAY：订单预下单成功，待支付<br>ORDER_PAY_SUCC：订单支付成功<br>ORDER_CLOSE：订单已关闭<br>ORDER_REFUND_PROCESSING：订单正在退款中<br>ORDER_REFUND：订单已有退款<br><span style="color: green;"> 示例值：ORDER_PAY_SUCC</span></td></tr> <tr><td style="text-align:left">支付完成时间</td> <td style="text-align:left">pay_time</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">支付完成时间，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss<br><span style="color: green;">示例值：2023-07-20 17:04:28</span></td></tr> <tr><td style="text-align:left">附加数据</td> <td style="text-align:left">attach</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">否</td> <td style="text-align:left">附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。<br><span style="color: green;">示例值：自定义数据</span></td></tr> <tr><td style="text-align:left">支付者</td> <td style="text-align:left">payer_openid</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">用户在直连商户appid下的唯一标识。<br><span style="color: green;">示例值：oUpF8uMuAJO_M2pxb1Q9zNjWeS6o</span></td></tr> <tr><td style="text-align:left">订单金额</td> <td style="text-align:left">amount</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">订单金额信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td style="text-align:left">微信支付订单号</td> <td style="text-align:left">wxpay_transaction_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">微信支付生成的订单号（合单支付场景不返回）<br><span style="color: green;"> 示例值：2123191423123564754773</span></td></tr> <tr><td style="text-align:left">订单环境</td> <td style="text-align:left">env</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">订单环境 0：正式环境  1：沙箱环境<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">结算状态</td> <td style="text-align:left">settle_status</td> <td style="text-align:left">uint32</td> <td style="text-align:left">是</td> <td style="text-align:left">结算状态，枚举值<br>0：未结算<br>1：结算中<br>2：结算完成<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">结算完成时间</td> <td style="text-align:left">settle_finish_time</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">结算完成时间，当结算状态为结算完成时有返回，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss<br><span style="color: green;">示例值：2025-01-01 00:00:00</span></td></tr> <tr><td style="text-align:left">技术服务费率</td> <td style="text-align:left">platform_profit_percent</td> <td style="text-align:left">uint64</td> <td style="text-align:left">否</td> <td style="text-align:left">技术服务费率，万分比（比如 60 指的是 0.60%），当结算状态为结算完成时有返回<br><span style="color: green;">示例值：60</span></td></tr> <tr><td style="text-align:left">技术服务费</td> <td style="text-align:left">platform_profit_fee</td> <td style="text-align:left">uint64</td> <td style="text-align:left">否</td> <td style="text-align:left">技术服务费，单位为分，当结算状态为结算完成时有返回<br><span style="color: green;">示例值：6</span></td></tr> <tr><td style="text-align:left">银行类型</td> <td style="text-align:left">bank_type</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">支付类型说明。仅支付方式为微信支付且订单支付成功后返回，格式为银行简码_具体类型(DEBIT借记卡/CREDIT信用卡/ECNY数字人民币)，例如ICBC_DEBIT代表工商银行借记卡，非银行卡支付类型(例如余额/零钱通等)统一为OTHERS，具体请参考<a href="https://pay.weixin.qq.com/doc/v3/merchant/4012076355" target="_blank" rel="noopener noreferrer">《银行类型对照表》<span></span></a>。<br><span style="color: green;">示例值：ICBC_DEBIT</span></td></tr> <tr><td style="text-align:left">错误码</td> <td style="text-align:left">errcode</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">接口返回的错误码，0表示成功；其他非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">错误信息</td> <td style="text-align:left">errmsg</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>1) Amount</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">订单总金额</td> <td style="text-align:left">order_amount</td> <td style="text-align:left">int64</td> <td style="text-align:left">是</td> <td style="text-align:left">订单总需支付金额，也即是真正下单总金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td style="text-align:left">用户支付金额</td> <td style="text-align:left">payer_amount</td> <td style="text-align:left">int64</td> <td style="text-align:left">是</td> <td style="text-align:left">用户支付金额，单位为分（指使用优惠券的情况下，这里等于总金额-优惠券金额，目前暂不支持优惠券）<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td style="text-align:left">货币类型</td> <td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">货币类型，仅支持人民币&quot;CNY&quot;<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>通知示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;appid&quot;: &quot;wx8888888888888888&quot;,
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;,
  &quot;pay_status&quot;: &quot;ORDER_PAY_SUCC&quot;,
  &quot;pay_time&quot;: &quot;2023-07-20 17:04:28&quot;,
  &quot;attach&quot;: &quot;&quot;,
  &quot;payer_openid&quot;: &quot;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o&quot;,
  &quot;amount&quot;: {
    &quot;order_amount&quot;: 1,
	&quot;payer_amount&quot;: 1,
	&quot;currency&quot;: &quot;CNY&quot;,
  },
  &quot;wxpay_transaction_id&quot;: &quot;2123191423123564754773&quot;,
  &quot;env&quot;: 0
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: OK
}
</code></pre></div><h4 id="_6、退款"><a href="#_6、退款" class="header-anchor">#</a> 6、退款</h4> <p>当交易发生之后160天内，由于买家或者卖家的原因需要退款时，卖家可以通过退款接口将支付金额退还给买家，微信支付将在收到退款请求并且验证成功之后，将支付款按原路退还至买家账号上。</p> <p><em>注：</em></p> <p><em>a、订单如需多次退款，同笔订单发起退款的间隔须大于一分钟</em></p> <p><em>b、退款接口只是发起退款请求，不表示退款成功，请2分钟后调用退款查询结果轮询退款状态</em></p> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/refund?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/refund?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p>注：pay_sig的计算用现网AppKey</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109 </span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的商户订单号。商户订单号和B2b支付订单号必填其一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">B2b支付订单号</td> <td style="text-align:left">order_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的B2b支付订单号。商户订单号和B2b支付订单号必填其一<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr> <tr><td style="text-align:left">商户退款单号</td> <td style="text-align:left">out_refund_no</td> <td style="text-align:left">string[6, 32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部退款单号，商户系统内部唯一，只能是数字、大小写字母_-*，同一退款单号多次请求只退一笔。<br><span style="color: green;">示例值：12177525012014070332321235</span></td></tr> <tr><td style="text-align:left">退款金额</td> <td style="text-align:left">refund_amount</td> <td style="text-align:left">int64</td> <td style="text-align:left">是</td> <td style="text-align:left">退款金额，单位为分，只能为整数，不能超过原订单支付金额。<br><span style="color: green;"> 示例值：888</span></td></tr> <tr><td style="text-align:left">退款来源</td> <td style="text-align:left">refund_from</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">退款来源，枚举值 1：人工客服退款 2：用户自己退款 3：其他<br><span style="color: green;"> 示例值：1</span></td></tr> <tr><td style="text-align:left">退款原因</td> <td style="text-align:left">refund_reason</td> <td style="text-align:left">int32</td> <td style="text-align:left">否</td> <td style="text-align:left">退款原因，枚举值 0：暂无描述 1：产品问题 2：售后问题 3：意愿问题 4：价格问题 5：其他原因<br><span style="color: green;"> 示例值：3</span></td></tr> <tr><td style="text-align:left">退款商品描述</td> <td style="text-align:left">description</td> <td style="text-align:left">string[1,127]</td> <td style="text-align:left">否</td> <td style="text-align:left">退款商品描述。<br><span style="color: green;"> 示例值：抱枕</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;,
  &quot;out_refund_no&quot;: &quot;12177525012014070332321235&quot;,
  &quot;refund_amount&quot;: 1,
  &quot;refund_from&quot;: 2,
  &quot;refund_reason&quot;: 3
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">B2b支付退款单号</td> <td style="text-align:left">refund_id</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">B2b支付退款单号<br><span style="color: green;">示例值：r202307281444591411763685 </span></td></tr> <tr><td style="text-align:left">商户退款单号</td> <td style="text-align:left">out_refund_no</td> <td style="text-align:left">string[6, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">商户系统内部退款单号，商户系统内部唯一，只能是数字、大小写字母_-*，同一退款单号多次请求只退一笔。<br><span style="color: green;">示例值：12177525012014070332321235 </span></td></tr> <tr><td style="text-align:left">B2b支付订单号</td> <td style="text-align:left">order_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的B2b支付订单号<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">否</td> <td style="text-align:left">原支付交易对应的商户订单号<br><span style="color: green;"> 示例值：1217752501201407033233368018 </span></td></tr> <tr><td style="text-align:left">错误码</td> <td style="text-align:left">errcode</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">接口返回的错误码，0表示成功，非0请参考(7、错误码处理)<br><span style="color: green;"> 示例值：0</span></td></tr> <tr><td style="text-align:left">错误信息</td> <td style="text-align:left">errmsg</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>退款错误码</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">错误描述</th> <th style="text-align:left">解决方案</th></tr></thead> <tbody><tr><td style="text-align:left">9403200</td> <td style="text-align:left">参数为空或不合法</td> <td style="text-align:left">按照文档要求传参，根据返回的具体错误描述检查参数</td></tr> <tr><td style="text-align:left">9403201</td> <td style="text-align:left">数据不存在</td> <td style="text-align:left">订单不存在，请检查入参</td></tr> <tr><td style="text-align:left">9403202</td> <td style="text-align:left">退款单已受理</td> <td style="text-align:left">请调用查询退款接口确认退款请求</td></tr> <tr><td style="text-align:left">9403205</td> <td style="text-align:left">订单无法退款（订单状态不对或超过160天）</td> <td style="text-align:left">请检查订单状态或订单时间</td></tr> <tr><td style="text-align:left">9403209</td> <td style="text-align:left">不允许结算前退款</td> <td style="text-align:left">请等待订单结算后再退款</td></tr> <tr><td style="text-align:left">10604</td> <td style="text-align:left">单笔订单的退款频率过高</td> <td style="text-align:left">在一分钟内只能发起一次退款，请稍后重试</td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;refund_id&quot;: &quot;r202307281444591411763685&quot;,
  &quot;out_refund_no&quot;: &quot;12177525012014070332321235&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;,
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: OK
}
</code></pre></div><h4 id="_7、退款通知"><a href="#_7、退款通知" class="header-anchor">#</a> 7、退款通知</h4> <p><strong>接口说明</strong></p> <p>通过<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/server-ability/message-push.html" target="_blank" rel="noopener noreferrer">消息推送功能<span></span></a>发送给业务方服务器，业务方按照消息推送的要求回复，否则会认为通知失败。通知失败后会按照一定的策略重新发起通知，以尽可能通知到商户，但并不保证通知最终能成功。（通知重试频率为10s,
30s, 60s, 5min, 15min, 30min, 60m, 3h, 6h, 12h）</p> <p><strong>通知参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>小程序原始ID</td> <td>ToUserName</td> <td>string</td> <td>是</td> <td>小程序原始ID<br><span style="color: green;">示例值：gh_xxxxx</span></td></tr> <tr><td>事件消息openid</td> <td>FromUserName</td> <td>string</td> <td>是</td> <td>微信官方的openid<br><span style="color: green;">示例值：oUpF8uMuAJO_M2pxb1Q9zNjWeS6o</span></td></tr> <tr><td>消息发送时间</td> <td>CreateTime</td> <td>int64</td> <td>是</td> <td>消息发送时间戳<br><span style="color: green;">示例值：1698643478</span></td></tr> <tr><td>消息类型</td> <td>MsgType</td> <td>string</td> <td>是</td> <td>消息类型，固定为event<br><span style="color: green;">示例值：event</span></td></tr> <tr><td>事件类型</td> <td>Event</td> <td>string</td> <td>是</td> <td>事件类型，固定为retail_refund_notify<br><span style="color: green;">示例值：retail_refund_notify</span></td></tr> <tr><td>小程序ID</td> <td>appid</td> <td>string[1,32]</td> <td>是</td> <td>商户申请的小程序对应的appid<br><span style="color: green;">示例值：wx8888888888888888</span></td></tr> <tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td>商户退款单号</td> <td>out_refund_no</td> <td>string[6, 32]</td> <td>是</td> <td>商户系统内部退款单号，商户系统内部唯一，只能是数字、大小写字母_-*，同一退款单号多次请求只退一笔。<br><span style="color: green;">示例值：12177525012014070332321235</span></td></tr> <tr><td>B2b支付退款单号</td> <td>refund_id</td> <td>string[1, 32]</td> <td>否</td> <td>B2b支付退款单号<br><span style="color: green;">示例值：r202307281444591411763685 </span></td></tr> <tr><td>商户订单号</td> <td>out_trade_no</td> <td>string[6,32]</td> <td>是</td> <td>商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td>B2b支付订单号</td> <td>order_id</td> <td>string[1,32]</td> <td>是</td> <td>B2b支付生成的订单号<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr> <tr><td>退款金额</td> <td>refund_amount</td> <td>int64</td> <td>是</td> <td>退款金额，单位为分，只能为整数，不能超过原订单支付金额。<br><span style="color: green;"> 示例值：888</span></td></tr> <tr><td>订单总金额</td> <td>order_amount</td> <td>int64</td> <td>是</td> <td>订单总支付金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>退款来源</td> <td>refund_from</td> <td>string</td> <td>是</td> <td>退款来源，枚举值 1：人工客服退款 2：用户自己退款 3：其他<br><span style="color: green;"> 示例值：1</span></td></tr> <tr><td>退款原因</td> <td>refund_reason</td> <td>string</td> <td>否</td> <td>退款原因，枚举值 0：暂无描述 1：产品问题 2：售后问题 3：意愿问题 4：价格问题 5：其他原因<br><span style="color: green;"> 示例值：3</span></td></tr> <tr><td>退款创建时间</td> <td>create_time</td> <td>string[1, 32]</td> <td>是</td> <td>退款受理时间，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss。<br><span style="color: green;"> 示例值：2023-07-30 17:04:23 </span></td></tr> <tr><td>退款成功时间</td> <td>refund_time</td> <td>string[1, 32]</td> <td>否</td> <td>退款成功时间，当退款状态为退款成功时有返回，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss。<br><span style="color: green;">示例值：2023-07-30 17:04:28</span></td></tr> <tr><td>退款状态</td> <td>refund_status</td> <td>string[1, 32]</td> <td>是</td> <td>仅退款成功或失败时通知，枚举值：<br>REFUND_SUCC：退款成功<br>REFUND_FAIL：退款失败<br><span style="color: green;">示例值：REFUND_SUCC</span></td></tr> <tr><td>微信支付退款单号</td> <td>wxpay_refund_id</td> <td>string[1, 32]</td> <td>否</td> <td>微信支付退款单号<br><span style="color: green;">示例值：1235481444591411763685</span></td></tr> <tr><td>订单环境</td> <td>env</td> <td>int32</td> <td>是</td> <td>订单环境 0：正式环境 1：沙箱环境<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>交易渠道类型</td> <td>pay_channel</td> <td>int32</td> <td>是</td> <td>交易渠道类型 0：微信支付 1：银行转账<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>退款说明</td> <td>refund_desc</td> <td>string[1, 256]</td> <td>否</td> <td>退款说明<br><span style="color: green;">示例值：账户资金不足，请待充足后重新发起</span></td></tr></tbody></table></div><p><strong>3、通知示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ToUserName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gh_xxxxx&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;FromUserName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;oUpF8uMuAJO_M2pxb1Q9zNjWeS6o&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;CreateTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1741168258&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;MsgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;retail_refund_notify&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wx8888888888888888&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1230000109&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;out_refund_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12177525012014070332321235&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;r202307281444591411763685&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1217752501201407033233368018&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;order_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;o202307291423123564754773&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_amount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;order_amount&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_from&quot;</span><span class="token operator">:</span> <span class="token string">&quot;REFUND_FROM_USER&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_reason&quot;</span><span class="token operator">:</span> <span class="token string">&quot;REFUND_REASON_WILLING&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2025-03-05 17:50:50&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2025-03-05 17:50:53&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;REFUND_SUCC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;wxpay_refund_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50302002662025030599670471876&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pay_channel&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refund_desc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><strong>应答参数</strong></p> <ol><li><p>直接回复success（推荐方式）</p></li> <li><p>直接回复空串（指字节长度为0的空字符串，而不是结构体中content字段的内容为空）</p></li></ol> <h4 id="_8、查询退款"><a href="#_8、查询退款" class="header-anchor">#</a> 8、查询退款</h4> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/getrefund?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/getrefund?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td style="text-align:left">商户退款单号</td> <td style="text-align:left">out_refund_no</td> <td style="text-align:left">string[6, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">商户系统内部退款单号，商户系统内部唯一，只能是数字、大小写字母_-*，同一退款单号多次请求只退一笔。商户退款单号和B2b支付退款单号必填其一<br><span style="color: green;">示例值：12177525012014070332321235</span></td></tr> <tr><td style="text-align:left">B2b支付退款单号</td> <td style="text-align:left">refund_id</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">B2b支付退款单号。商户退款单号和B2b支付退款单号必填其一<br><span style="color: green;">示例值：r202307281444591411763685 </span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_refund_no&quot;: &quot;12177525012014070332321235&quot;
}
或
{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;refund_id&quot;: &quot;r202307281444591411763685&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">B2b支付退款单号</td> <td style="text-align:left">refund_id</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">是</td> <td style="text-align:left">B2b支付退款单号<br><span style="color: green;">示例值：r202307281444591411763685 </span></td></tr> <tr><td style="text-align:left">商户退款单号</td> <td style="text-align:left">out_refund_no</td> <td style="text-align:left">string[6, 32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部退款单号，商户系统内部唯一，只能是数字、大小写字母_-*，同一退款单号多次请求只退一笔。<br><span style="color: green;">示例值：12177525012014070332321235</span></td></tr> <tr><td style="text-align:left">B2b支付订单号</td> <td style="text-align:left">order_id</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">原支付交易对应的B2b支付订单号<br><span style="color: green;">示例值：o202307291423123564754773</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">原支付交易对应的商户订单号<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">退款创建时间</td> <td style="text-align:left">create_time</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">是</td> <td style="text-align:left">退款受理时间，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss。<br><span style="color: green;"> 示例值：2023-07-30 17:04:23 </span></td></tr> <tr><td style="text-align:left">退款成功时间</td> <td style="text-align:left">refund_time</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">退款成功时间，当退款状态为退款成功时有返回，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss。<br><span style="color: green;">示例值：2023-07-30 17:04:28</span></td></tr> <tr><td style="text-align:left">退款状态</td> <td style="text-align:left">refund_status</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">是</td> <td style="text-align:left">退款单状态，枚举值：<br>REFUND_INIT：退款单初始化<br>REFUND_PROCESSING：退款处理中<br>REFUND_SUCC：退款成功<br>REFUND_FAIL：退款失败<br><span style="color: green;">示例值：REFUND_SUCC</span></td></tr> <tr><td style="text-align:left">退款说明</td> <td style="text-align:left">refund_desc</td> <td style="text-align:left">string[1, 256]</td> <td style="text-align:left">否</td> <td style="text-align:left">退款说明<br><span style="color: green;">示例值：账户资金不足，请待充足后重新发起</span></td></tr> <tr><td style="text-align:left">金额信息</td> <td style="text-align:left">amount</td> <td style="text-align:left">object</td> <td style="text-align:left">是</td> <td style="text-align:left">金额详细信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td style="text-align:left">微信支付退款单号</td> <td style="text-align:left">wxpay_refund_id</td> <td style="text-align:left">string[1, 32]</td> <td style="text-align:left">否</td> <td style="text-align:left">微信支付退款单号<br><span style="color: green;">示例值：1235481444591411763685</span></td></tr> <tr><td style="text-align:left">技术服务费回退状态</td> <td style="text-align:left">reverse_sett_state</td> <td style="text-align:left">uint32</td> <td style="text-align:left">是</td> <td style="text-align:left">技术服务费回退状态，枚举值：<br>0：技术服务费未回退<br>1：技术服务费回退处理中<br>2：技术服务费回退成功<br>3：无需回退技术服务费<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">技术服务费回退完成时间</td> <td style="text-align:left">reverse_sett_finish_time</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">技术服务费回退完成时间，当技术服务费回退状态为成功时有返回，标准北京时间，时区为东八区，格式为yyyy-MM-dd HH:mm:ss<br><span style="color: green;">示例值：2023-07-30 17:04:28</span></td></tr> <tr><td style="text-align:left">技术服务费率</td> <td style="text-align:left">platform_profit_percent</td> <td style="text-align:left">uint64</td> <td style="text-align:left">否</td> <td style="text-align:left">技术服务费率，万分比（比如 60 指的是 0.60%），当技术服务费回退状态为成功时有返回<br><span style="color: green;">示例值：60</span></td></tr> <tr><td style="text-align:left">回退技术服务费</td> <td style="text-align:left">reverse_sett_amt</td> <td style="text-align:left">uint64</td> <td style="text-align:left">否</td> <td style="text-align:left">回退技术服务费，单位为分，当技术服务费回退状态为成功时有返回<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">退款渠道信息</td> <td style="text-align:left">refund_channel_info</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">退款渠道信息，仅支付方式为微信支付且订单退款成功后返回，格式见<strong>Refund_channel_info</strong></td></tr> <tr><td style="text-align:left">退款商品描述</td> <td style="text-align:left">description</td> <td style="text-align:left">string[1,127]</td> <td style="text-align:left">否</td> <td style="text-align:left">退款商品描述。<br><span style="color: green;"> 示例值：抱枕</span></td></tr> <tr><td style="text-align:left">错误码</td> <td style="text-align:left">errcode</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">接口返回的错误码，0表示成功，非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">错误信息</td> <td style="text-align:left">errmsg</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>1) Amount</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">订单总金额</td> <td style="text-align:left">order_amount</td> <td style="text-align:left">int64</td> <td style="text-align:left">是</td> <td style="text-align:left">订单总金额，单位为分<br><span style="color: green;"> 示例值：1300</span></td></tr> <tr><td style="text-align:left">退款金额</td> <td style="text-align:left">refund_amount</td> <td style="text-align:left">int64</td> <td style="text-align:left">是</td> <td style="text-align:left">退款金额，单位为分，可以做部分退款<br><span style="color: green;">示例值：100</span></td></tr> <tr><td style="text-align:left">货币类型</td> <td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">货币类型，仅支持人民币&quot;CNY&quot;<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>2) Refund_channel_info</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">退款渠道</td> <td style="text-align:left">channel</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">订单退款渠道，有以下枚举：<br>ORIGINAL: 原路退款<br>BALANCE: 退回到余额<br>OTHER_BALANCE: 原账户异常退到其他余额账户<br><span style="color: green;"> 示例值：ORIGINAL</span></td></tr> <tr><td style="text-align:left">退款入账账户</td> <td style="text-align:left">user_received_account</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">当前退款单的退款入账方，取值有以下几种情况：<br>1）退回银行卡：{银行名称}{卡类型}{卡尾号}<br>2）退回支付用户零钱：支付用户零钱<br>3）退还商户：商户基本账户商户结算银行账户<br>4）退回支付用户零钱通：支付用户零钱通<br>5）退回支付用户银行电子账户：支付用户银行电子账户<br>6）退回支付用户零花钱：支付用户零花钱<br>7）退回用户经营账户：用户经营账户<br>8）退回支付用户来华零钱包：支付用户来华零钱包<br>9）退回企业支付商户：企业支付商户<br><span style="color: green;">示例值：100</span></td></tr> <tr><td style="text-align:left">资金账户</td> <td style="text-align:left">funds_account</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">退款所使用资金对应的资金账户类型，有以下枚举：<br>AVAILABLE: 可提现金额账户<br>UNAVAILABLE: 待结算金额账户<br><span style="color: green;">示例值：AVAILABLE</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;refund_id&quot;: &quot;r202307281444591411763685&quot;,
  &quot;out_refund_no&quot;: &quot;12177525012014070332321235&quot;,
  &quot;order_id&quot;: &quot;o202307291423123564754773&quot;,
  &quot;out_trade_no&quot;: &quot;1217752501201407033233368018&quot;,
  &quot;create_time&quot;: &quot;2023-07-30 17:04:23&quot;,
  &quot;refund_time&quot;: &quot;2023-07-30 17:04:28&quot;,
  &quot;refund_status&quot;: &quot;REFUND_SUCC&quot;,
  &quot;amount&quot;: {
    &quot;order_amount&quot;: 1300,
	&quot;refund_amount&quot;: 100,
	&quot;currency&quot;: &quot;CNY&quot;
  },
  &quot;wxpay_refund_id&quot;: &quot;1235481444591411763685&quot;,
  &quot;reverse_sett_state&quot;: 3,
  &quot;refund_channel_info&quot;: {
      &quot;channel&quot;: &quot;ORIGINAL&quot;,
      &quot;user_received_account&quot;: &quot;招商银行借记卡0000&quot;,
      &quot;funds_account&quot;: &quot;UNAVAILABLE&quot;
  },
  &quot;description&quot;:&quot;&quot;,
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: OK
}
</code></pre></div><h4 id="_9、获取AppKey"><a href="#_9、获取AppKey" class="header-anchor">#</a> <span id="Mark">9、获取AppKey</span></h4> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/getappkey?access_token=ACCESS_TOKEN" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/getappkey?access_token=ACCESS_TOKEN<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">现网AppKey</td> <td style="text-align:left">appkey</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">由平台生成并下发的现网应用密钥。</td></tr> <tr><td style="text-align:left">沙箱AppKey</td> <td style="text-align:left">sandbox_appkey</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">由平台生成并下发的沙箱应用密钥。</td></tr> <tr><td style="text-align:left">错误码</td> <td style="text-align:left">errcode</td> <td style="text-align:left">int32</td> <td style="text-align:left">是</td> <td style="text-align:left">接口返回的错误码，0表示成功；其他非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td style="text-align:left">错误信息</td> <td style="text-align:left">errmsg</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">是</td> <td style="text-align:left">错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;appkey&quot;: &quot;xxx&quot;,
    &quot;sandbox_appkey&quot;: &quot;xxx&quot;,
    &quot;errcode&quot;: 0,
    &quot;errmsg&quot;: &quot;OK&quot;
}
</code></pre></div><h4 id="_10、错误码"><a href="#_10、错误码" class="header-anchor">#</a> 10、错误码</h4> <div class="table-wrp"><table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">错误描述</th> <th style="text-align:left">解决方案</th></tr></thead> <tbody><tr><td style="text-align:left">9403200</td> <td style="text-align:left">参数为空或不合法</td> <td style="text-align:left">按照文档要求传参，根据返回的具体错误描述检查参数</td></tr> <tr><td style="text-align:left">9403201</td> <td style="text-align:left">数据不存在</td> <td style="text-align:left">订单或者退款单等要查询的数据不存在，请检查入参</td></tr> <tr><td style="text-align:left">9403202</td> <td style="text-align:left">退款单已受理</td> <td style="text-align:left">请调用查询退款接口确认退款请求</td></tr> <tr><td style="text-align:left">9403203</td> <td style="text-align:left">建档未完成，还不能发起支付或退款</td> <td style="text-align:left">请完成建档签约流程</td></tr> <tr><td style="text-align:left">9403205</td> <td style="text-align:left">订单无法退款（订单状态不对或超过160天）</td> <td style="text-align:left">请检查订单状态或订单时间</td></tr> <tr><td style="text-align:left">9403206</td> <td style="text-align:left">退款状态未知，请商户2分钟后主动查询退款状态</td> <td style="text-align:left">请2分钟后调用查询退款接口确认退款状态</td></tr> <tr><td style="text-align:left">9403208</td> <td style="text-align:left">该订单正在退款中，请等待退款完成再发起新的退款</td> <td style="text-align:left">请等待退款完成再发起新的退款</td></tr></tbody></table></div><h3 id="_3-4-查看账单"><a href="#_3-4-查看账单" class="header-anchor">#</a> 3.4 查看账单</h3> <h4 id="_1、接口下载交易账单与资金账单"><a href="#_1、接口下载交易账单与资金账单" class="header-anchor">#</a> 1、接口下载交易账单与资金账单</h4> <p><strong>接口说明</strong></p> <p>支持查询近 90 天内的账单。</p> <p>请求地址：
<a href="https://api.weixin.qq.com/wxaretail/unifiedorder?access_token=ACCESSTOKEN" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/downloadbill?access_token=ACCESSTOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>mchid</td> <td>string</td> <td>是</td> <td>商户号</td></tr> <tr><td>bill_date</td> <td>string</td> <td>是</td> <td>账单日期，格式:yyyymmdd,比如20231102</td></tr></tbody></table></div><p><strong>返回结果</strong></p> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>errcode</td> <td>int</td> <td>是</td> <td>错误码</td></tr> <tr><td>errmsg</td> <td>string</td> <td>否</td> <td>错误信息</td></tr> <tr><td>success_bill_url</td> <td>string</td> <td>否</td> <td>微信支付渠道支付成功订单下载链接，包括支付成功时间在当天的订单</td></tr> <tr><td>refund_bill_url</td> <td>string</td> <td>否</td> <td>微信支付渠道退款单下载链接，发起退款成功在当天的退款单</td></tr> <tr><td>all_bill_url</td> <td>string</td> <td>否</td> <td>包括微信支付渠道支付成功和退款单的下载链接</td></tr> <tr><td>fund_bill_url</td> <td>string</td> <td>否</td> <td>微信支付渠道的资金账单下载链接</td></tr> <tr><td>ended_day_avail_amt</td> <td>int64</td> <td>否</td> <td>日终账户可提现金额</td></tr> <tr><td>ended_day_frozen_amt</td> <td>int64</td> <td>否</td> <td>日终账户待结算金额</td></tr> <tr><td>ended_day_total_amt</td> <td>int64</td> <td>否</td> <td>日终账户总金额，等于日终账户可提现金额+日终账户待结算金额</td></tr> <tr><td>profit_sharing_bill_url</td> <td>string</td> <td>否</td> <td>分账成功订单下载链接，包括分账成功时间在当天的订单</td></tr> <tr><td>profit_refund_bill_url</td> <td>string</td> <td>否</td> <td>分账回退单下载链接，发起分账回退成功在当天的退款单</td></tr> <tr><td>bankpay_fund_bill_url</td> <td>string</td> <td>否</td> <td>银行转账渠道资金帐单下载链接</td></tr></tbody></table></div><p><strong>说明</strong></p> <ol><li><p>下载链接是https的接口，获取后30min有效</p></li> <li><p>下载后的交易账单文件内容说明：</p> <p>a. 文件中的内容是以csv文件格式返回，第一行为表头</p> <p>b. 从第二行起，为数据记录，各参数值以逗号分隔，参数值前增加`符号，为标准键盘1左边键的字符</p> <p>c. 表头字段顺序与说明：</p></li></ol> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>说明</th> <th>示例</th></tr></thead> <tbody><tr><td>交易时间</td> <td>指该笔交易的支付成功时间或发起退款成功时间（注：不是退款成功时间），格式为yyyy-MM-DD HH:MM:SS</td> <td>2023-10-23 09:00:00</td></tr> <tr><td>公众账号ID</td> <td>发起该笔交易时使用的小程序appid</td> <td>wxab8acb865bb11234</td></tr> <tr><td>交易商户号</td> <td>进行交易收款的微信支付子商户号，8~10位数字</td> <td>1234567890</td></tr> <tr><td>微信订单号</td> <td>微信小程序平台为该笔订单分配的订单号</td> <td></td></tr> <tr><td>商户订单号</td> <td>商户传入的该笔订单商户订单号，对应下单接口里的out_trade_no字段</td> <td></td></tr> <tr><td>用户标识</td> <td>微信为支付用户在公众账号ID(appid)下分配的唯一标识(openid)</td> <td></td></tr> <tr><td>交易状态</td> <td>识该笔明细数据的类型：<br>SUCCESS，支付成功，说明该行数据为一笔支付成功的订单<br>REFUND，转入退款，说明该行数据为一笔发起退款成功的退款单</td> <td>SUCCESS</td></tr> <tr><td>微信退款单号</td> <td>微信小程序平台为该笔退款分配的退款单号，如果该行数据为订单（交易状态SUCCESS）则展示0</td> <td></td></tr> <tr><td>商户退款单号</td> <td>商户发起退款时填入的商户退款单号，如果该行数据为订单（交易状态SUCCESS）则展示0</td> <td></td></tr> <tr><td>退款金额</td> <td>该笔退款单参与计费的应结算金额（申请退款金额-免充值券退款金额），如果该行数据为订单则展示为0.00，非负数、单位元，保留到小数点后2位</td> <td>6.66</td></tr> <tr><td>退款状态</td> <td>生成账单文件时该笔退款的状态、出账后不会更新，如果该行数据为订单（交易状态SUCCESS），则留空<br>SUCCESS：退款成功<br>PROCESSING：退款处理中</td> <td></td></tr> <tr><td>商品名称</td> <td>商户传入的该笔订单（或该笔退款对应的订单）的商品名称，对应下单接口里的body字段,目前都为空</td> <td></td></tr> <tr><td>商户数据包</td> <td>商户传入的该笔订单（或该笔退款对应的订单）的商户数据包，对应下单接口里的attach字段，不传时留空</td> <td></td></tr> <tr><td>技术服务费</td> <td>该笔订单/退款对应的技术服务费费金额，订单对应正数、退款对应负数，单位元，保留小数点后2位</td> <td>0.01</td></tr> <tr><td>技术服务费费率</td> <td>该笔交易收取技术服务费所使用的费率，百分数</td> <td>0.22%</td></tr> <tr><td>订单金额</td> <td>该笔订单的支付金额，如果该行数据为退款或撤销则填0.00，单位元，保留到小数点后2位</td> <td>2.33</td></tr> <tr><td>申请退款金额</td> <td>商户发起退款的金额，包括退给用户的金额、充值券退款金额、免充值券退款金额，如果该行数据订单则填0.00，单位元，保留到小数点后2位</td> <td>2.22</td></tr> <tr><td>结算状态</td> <td>生成账单文件时该笔订单的结算状态、出账后不会更新。该笔订单的结算状态：<br>SUCCESS:已结算<br>NO_SETTLE:未结算<br>SETTLING:结算中</td> <td></td></tr> <tr><td>结算时间</td> <td>结算的时间，在结算状态为&quot;已结算&quot;的时候展示，格式为yyyy-MM-DD HH:MM:SS</td> <td>2023-10-23 02:00:00</td></tr> <tr><td>交易渠道类型</td> <td>订单的支付方式，仅当前商户号开通了银行转账时携带此字段。<br>1：微信支付<br>2：银行转账</td> <td>1</td></tr></tbody></table></div><ol start="3"><li>下载后的资金账单文件内容说明：</li></ol> <p>​      a. 资金账单是针对账户整体（包括可提现部分与待结算部分之和）的资金流入流出变动情况</p> <p>​      b. 文件中的内容是以csv文件格式返回，第一行为表头</p> <p>​      c. 从第二行起，为数据记录，各参数值以逗号分隔，参数值前增加`符号，为标准键盘1左边键的字符</p> <p>​      d. 表头字段顺序与说明：</p> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>说明</th> <th>示例</th></tr></thead> <tbody><tr><td>记账时间</td> <td>格式为yyyy-MM-DD HH:MM:SS</td> <td>2023-10-23 09:00:00</td></tr> <tr><td>B2b支付业务单号</td> <td>展示该笔资金变动来自的业务。<br>交易业务：展示支付单号<br>退款业务：展示退款单号<br>提现业务：展示提现单号</td> <td></td></tr> <tr><td>资金流水单号</td> <td>该笔资金变动的系统单号</td> <td></td></tr> <tr><td>业务名称</td> <td></td> <td></td></tr> <tr><td>业务类型</td> <td></td> <td></td></tr> <tr><td>收支类型</td> <td></td> <td></td></tr> <tr><td>收支金额(元)</td> <td>该笔资金变动的金额</td> <td></td></tr> <tr><td>账户结余(元)</td> <td>展示该笔资金变动后，剩余的账户总金额</td> <td></td></tr></tbody></table></div><p>其中，业务名称、业务类型、收支类型有这几种情况：</p> <div class="table-wrp"><table><thead><tr><th>业务名称</th> <th>业务类型</th> <th>收支类型</th></tr></thead> <tbody><tr><td>交易</td> <td>交易</td> <td>收入</td></tr> <tr><td>退款</td> <td>退款</td> <td>支出</td></tr> <tr><td>交易</td> <td>交易结算扣除手续费</td> <td>支出</td></tr> <tr><td>退款</td> <td>已结算退款返还手续费</td> <td>收入</td></tr> <tr><td>提现</td> <td>提现</td> <td>支出</td></tr></tbody></table></div><h4 id="_2、后台页面下载交易账单"><a href="#_2、后台页面下载交易账单" class="header-anchor">#</a> 2、后台页面下载交易账单</h4> <p>平台后台页面，提供交易查询、退款查询、以及下载账单能力。</p> <p><img src="https://res.wx.qq.com/op_res/SEOBYWlQLt6cYSM1cZBGryrhoB1A-U1Plax6IH6N5TQe9tPoEyFoypmUpi7u3Q_4y_nom4-GK7D2Tti5-OIa6w" alt></p> <h4 id="_3、账单说明"><a href="#_3、账单说明" class="header-anchor">#</a> 3、账单说明</h4> <p><strong>1）技术服务费说明</strong></p> <p>每笔交易收取的技术服务费=订单金额x技术服务费费率，保留到单位分，最后一位小数按四舍五入。</p> <p><strong>2）退款返还技术服务费说明</strong></p> <p>对于退款，平台将根据退款金额返还相关技术服务费。</p> <p>退款的返还技术服务费规则：</p> <ol><li><p>如果为全额退款，则全部返还原来收取的技术服务费；</p></li> <li><p>如果为部分退款，按0.22%计算后保留到单位分，最后一位小数按向下取整（如计算出来返还0.238，实际只返还0.23）</p></li> <li><p>如果经过多笔部分退款后，最后一笔变成全额退款，则最终返还技术服务费的总金额=原来收取的技术服务费</p></li></ol> <h3 id="_3-5-提现"><a href="#_3-5-提现" class="header-anchor">#</a> 3.5 提现</h3> <p>发起提现申请后，需要 T+1 日完成处理并到账。</p> <h4 id="_1、微信支付手动提现："><a href="#_1、微信支付手动提现：" class="header-anchor">#</a> 1、微信支付手动提现：</h4> <h5 id="页面端方式：-6"><a href="#页面端方式：-6" class="header-anchor">#</a> 页面端方式：</h5> <p>对于已结算部分的资金，可在 &quot;资金管理 -- 微信支付 &quot; 页面中申请提现。</p> <p><img src="https://res.wx.qq.com/op_res/6zSk-NQ1AfVTIuTLeDDTjNwiS5y_eR24ne5CB0qWK6rAfTaCWEmQmwWbjnPPTIRzjnJ1Pp209YsKNztzyq7apQ" alt></p> <h5 id="接口端方式：-2"><a href="#接口端方式：-2" class="header-anchor">#</a> 接口端方式：</h5> <h6 id="_1）-查询账户余额"><a href="#_1）-查询账户余额" class="header-anchor">#</a> 1） 查询账户余额</h6> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/getmchbalance?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/getmchbalance?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>账户资金</td> <td>balance_list</td> <td>array&lt;BalanceInfo&gt;</td> <td>是</td> <td>商户号的账户资金，BalanceInfo结构详见下表</td></tr> <tr><td>错误码</td> <td>errcode</td> <td>int32</td> <td>是</td> <td>接口返回的错误码，0表示成功，非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>错误信息</td> <td>errmsg</td> <td>string[1,128]</td> <td>是</td> <td>错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>BalanceInfo</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>资金类型</td> <td>balance_type</td> <td>string</td> <td>是</td> <td>枚举值<br>BALANCE_TYPE_AVAILABLE：可提现金额<br>BALANCE_TYPE_FROZEN：待结算金额<br><span style="color: green;">示例值：BALANCE_TYPE_AVAILABLE</span></td></tr> <tr><td>金额值</td> <td>amount</td> <td>string</td> <td>是</td> <td>单位为元<br><span style="color: green;">示例值：0.00</span></td></tr> <tr><td>货币类型</td> <td>currency</td> <td>string</td> <td>是</td> <td>货币类型<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;balance_list&quot;: [
    {
      &quot;balance_type&quot;: &quot;BALANCE_TYPE_AVAILABLE&quot;,
      &quot;amount&quot;: &quot;0.00&quot;,
      &quot;currency&quot;: &quot;CNY&quot;
    },
    {
      &quot;balance_type&quot;: &quot;BALANCE_TYPE_FROZEN&quot;,
      &quot;amount&quot;: &quot;0.00&quot;,
      &quot;currency&quot;: &quot;CNY&quot;
    }
  ],
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: &quot;OK&quot;
}
</code></pre></div><h6 id="_2）-发起手动提现"><a href="#_2）-发起手动提现" class="header-anchor">#</a> 2） 发起手动提现</h6> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/withdraw?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/withdraw?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td>提现金额</td> <td>withdraw_amount</td> <td>int64</td> <td>是</td> <td>提现金额，单位为分，金额需大于0。<br><span style="color: green;">示例值：100</span></td></tr> <tr><td>外部提现单号</td> <td>out_withdraw_no</td> <td>string[6,32]</td> <td>是</td> <td>商户外部提现单号，同一个商户号下唯一，只允许数字和大小写字母_-*，长度要求为[6,32]。<br><span style="color: green;">示例值：aaa123</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;withdraw_amount&quot;: 100,
  &quot;out_withdraw_no&quot;: &quot;aaa123&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>错误码</td> <td>errcode</td> <td>int32</td> <td>是</td> <td>接口返回的错误码，0表示成功，非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>错误信息</td> <td>errmsg</td> <td>string[1,128]</td> <td>是</td> <td>错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: OK
}
</code></pre></div><h6 id="_3）-查询提现状态"><a href="#_3）-查询提现状态" class="header-anchor">#</a> 3） 查询提现状态</h6> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/querywithdraw?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/querywithdraw?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td>外部提现单号</td> <td>out_withdraw_no</td> <td>string[6,32]</td> <td>是</td> <td>商户发起提现时传入的外部提现单号。<br><span style="color: green;">示例值：aaa123</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;out_withdraw_no&quot;: &quot;aaa123&quot;
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>外部提现单号</td> <td>out_withdraw_no</td> <td>string[6,32]</td> <td>是</td> <td>商户发起提现时传入的外部提现单号。<br><span style="color: green;">示例值：aaa123</span></td></tr> <tr><td>提现金额</td> <td>withdraw_amount</td> <td>int64</td> <td>是</td> <td>提现金额，单位为分。<br><span style="color: green;">示例值：100</span></td></tr> <tr><td>提现状态</td> <td>status</td> <td>string</td> <td>是</td> <td>枚举值<br>WITHDRAW_INIT：初始化<br>WITHDRAW_PROCESSING：进行中<br>WITHDRAW_SUCC：成功<br>WITHDRAW_FAIL：失败<br>WITHDRAW_REFUND：提现退票（银行回退）<br><span style="color: green;">示例值：WITHDRAW_SUCC</span></td></tr> <tr><td>提现失败原因</td> <td>fail_reason</td> <td>string</td> <td>否</td> <td>仅当提现状态为 WITHDRAW_FAIL 时返回<br><span style="color: green;">示例值：申请提现金额小于留存额</span></td></tr> <tr><td>错误码</td> <td>errcode</td> <td>int32</td> <td>是</td> <td>接口返回的错误码，0表示成功，非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>错误信息</td> <td>errmsg</td> <td>string[1,128]</td> <td>是</td> <td>错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;out_withdraw_no&quot;: &quot;aaa123&quot;,
    &quot;withdraw_amount&quot;: 100,
    &quot;status&quot;: &quot;WITHDRAW_SUCC&quot;,
    &quot;errcode&quot;: 0,
    &quot;errmsg&quot;: &quot;OK&quot;
}
</code></pre></div><h4 id="_2、银行转账手动提现"><a href="#_2、银行转账手动提现" class="header-anchor">#</a> 2、银行转账手动提现</h4> <p>可在 &quot;资金管理 -- 银行转账 -- 查看详情 -- 商家中心 -- 资金中心 -- 提现管理&quot; 页面中设置手动提现。</p> <p><img src="https://res.wx.qq.com/op_res/Sdqkh8ZNld9MiKRMjrHJso-9MO6ZxTysDclrFPwO3ScCO7W91g3c5c709hylCJQPoaok9HcXV6s7PdZvJfOrYQ" alt></p> <p><img src="https://res.wx.qq.com/op_res/6zSk-NQ1AfVTIuTLeDDTjOW4xBXwavcXmpejY7v7lV_lHvJHUPR3K75dV7sskzw4D6cDwZYf8UX_iYjjqFUygA" alt></p> <p><img src="https://res.wx.qq.com/op_res/Sdqkh8ZNld9MiKRMjrHJssu1cuGYJ7NpPsE0V7oUdMnCbnBzs-PKd4oBHmMdBCmbQtFJjv956vYoeS_ROMt0eQ" alt></p> <h4 id="_3、自动提现："><a href="#_3、自动提现：" class="header-anchor">#</a> 3、自动提现：</h4> <h5 id="页面端方式：-7"><a href="#页面端方式：-7" class="header-anchor">#</a> 页面端方式：</h5> <h6 id="微信支付"><a href="#微信支付" class="header-anchor">#</a> 微信支付</h6> <p>可在 &quot;资金管理 -- 微信支付 &quot; 页面中开启自动提现功能。开启后，平台将每天定时发起提现申请。</p> <p><img src="https://res.wx.qq.com/op_res/6zSk-NQ1AfVTIuTLeDDTjOm3ayWII-Chs0YcbFcarih06cAzfqsHAqo71CyvnlVSnCJYRAAn_0VXO5ZJ8j4lCw" alt></p> <h6 id="银行转账"><a href="#银行转账" class="header-anchor">#</a> 银行转账</h6> <p>可在 &quot;资金管理 -- 银行转账 -- 查看详情 -- 商家中心 -- 资金中心 -- 提现管理&quot; 页面中开通自动提现。</p> <p><img src="https://res.wx.qq.com/op_res/Sdqkh8ZNld9MiKRMjrHJso-9MO6ZxTysDclrFPwO3ScCO7W91g3c5c709hylCJQPoaok9HcXV6s7PdZvJfOrYQ" alt></p> <p><img src="https://res.wx.qq.com/op_res/6zSk-NQ1AfVTIuTLeDDTjOW4xBXwavcXmpejY7v7lV_lHvJHUPR3K75dV7sskzw4D6cDwZYf8UX_iYjjqFUygA" alt></p> <p><img src="https://res.wx.qq.com/op_res/6zSk-NQ1AfVTIuTLeDDTjKQEzQ-KRqIzDtF7EFu0jA0bqAUkmRrmL8EB-KaWjgssoN_MR38gWgHCHdzxCJZrRQ" alt></p> <h5 id="微信支付自动提现接口端方式："><a href="#微信支付自动提现接口端方式：" class="header-anchor">#</a> 微信支付自动提现接口端方式：</h5> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/setautowithdraw?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/setautowithdraw?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>微信商户号</td> <td>mchid</td> <td>string[1,32]</td> <td>是</td> <td>由微信支付生成并下发的商户号。<br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td>自动提现状态</td> <td>status</td> <td>int32</td> <td>否</td> <td>是否开启自动提现，枚举值 1：开启自动提现功能 2：关闭自动提现功能<br><span style="color: green;">示例值：1</span></td></tr> <tr><td>留存额</td> <td>retain_amt</td> <td>int64</td> <td>否</td> <td>账户留存金额，单位为分。每天根据昨日&quot;可提现金额&quot;账户的日终余额减去留存额，发起提现并到账。若发起提现申请时，&quot;可提现金额账户&quot;的当前余额少于昨日日终余额，则提现失败，返回余额不足的错误。<br><span style="color: green;">示例值：500000</span></td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;mchid&quot;: &quot;1230000109&quot;,
  &quot;status&quot;: 1,
  &quot;retain_amt&quot;: 500000
}
</code></pre></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>错误码</td> <td>errcode</td> <td>int32</td> <td>是</td> <td>接口返回的错误码，0表示成功，非0表示失败<br><span style="color: green;">示例值：0</span></td></tr> <tr><td>错误信息</td> <td>errmsg</td> <td>string[1,128]</td> <td>是</td> <td>错误信息描述<br><span style="color: green;">示例值：OK</span></td></tr></tbody></table></div><p><strong>返回示例</strong></p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;errcode&quot;: 0,
  &quot;errmsg&quot;: OK
}
</code></pre></div><h5 id="自动提现金额计算："><a href="#自动提现金额计算：" class="header-anchor">#</a> 自动提现金额计算：</h5> <div class="table-wrp"><table><thead><tr><th><strong>提现金额规则</strong></th> <th><strong>设置留存额规则</strong></th></tr></thead> <tbody><tr><td>【日终账户余额】前一日的日终可提现账户余额减留存额</td> <td>设置留存额以防提现后账户余额不足，影响退款业务，请根据业务实际情况进行设置。<br><br>当系统自动发起提现时，若当前可提现金额&lt;前一日日终可提现金额-留存额，则提现会失败</td></tr></tbody></table></div><h5 id="自动提现说明："><a href="#自动提现说明：" class="header-anchor">#</a> 自动提现说明：</h5> <p>开启自动提现功能后，平台会每天自动将“可提现金额账户”内的资金提取至你的结算银行卡：
1、自动提现发起时间：每日 8:30，自动发起提现申请
2、提现规则：提现时，若“可提现金额账户”的当前余额少于昨日日终余额，则提现失败，返回余额不足的错误。否则，提现金额= 日终余额-留存额。
3、附言格式：B2b支付_YYYYMMDD_商户号</p> <h3 id="_3-6-分账"><a href="#_3-6-分账" class="header-anchor">#</a> 3.6 分账</h3> <h4 id="_1、添加分账方"><a href="#_1、添加分账方" class="header-anchor">#</a> 1、添加分账方</h4> <p>可以通过 api 方式添加分账方，单个小程序添加的分账接收方上限为 1000。</p> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/addprofitsharingaccount?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/addprofitsharingaccount?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>profit_sharing_relation_type</td> <td>string</td> <td>分账接收方关系类型</td> <td>枚举值：&quot;RELATION_TYPE_SUPPLIER&quot; - 供应商；&quot;RELATION_TYPE_DISTRIBUTOR&quot; - 分销商；&quot;RELATION_TYPE_SERVICE_PROVIDER&quot; - 服务商；&quot;RELATION_TYPE_PLATFORM&quot; - 平台；&quot;RELATION_TYPE_OTHERS&quot; - 其他；</td> <td>是</td></tr> <tr><td>payee_type</td> <td>string</td> <td>分账接收方类型</td> <td>枚举值：&quot;PAYEE_TYPE_EXTERNAL_USER&quot; - 外部用户；&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot; - 外部商户；</td> <td>是</td></tr> <tr><td>payee_id</td> <td>string</td> <td>分账接收方标识</td> <td>根据payee_type填入openid或商户号：当payee_type=&quot;PAYEE_TYPE_EXTERNAL_USER&quot;时填openid；当payee_type=&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;时填商户号；</td> <td>是</td></tr> <tr><td>payee_name</td> <td>string</td> <td>分账接收方名称</td> <td>当payee_type=&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;时，填写商户名称；</td> <td>否（分账接收方为商户号时必填）</td></tr></tbody></table></div><p><strong>返回结果</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;profit_sharing_relation_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RELATION_TYPE_SERVICE_PROVIDER&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;payee_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;payee_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;payee_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXX公司&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码说明</strong></p> <div class="table-wrp"><table><thead><tr><th>errcorde</th> <th>errmsg</th></tr></thead> <tbody><tr><td>210001</td> <td>添加分账方频繁</td></tr> <tr><td>210002</td> <td>添加分账方传入环境参数错误</td></tr> <tr><td>210003</td> <td>添加分账方传入账户类型错误</td></tr> <tr><td>210004</td> <td>重复添加分账方</td></tr> <tr><td>210006</td> <td>单个小程序绑定的分账方超过上限</td></tr></tbody></table></div><h4 id="_2、删除分账方"><a href="#_2、删除分账方" class="header-anchor">#</a> 2、删除分账方</h4> <p>可以通过 api 方式删除分账方</p> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/delprofitsharingaccount?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/delprofitsharingaccount?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>payee_type</td> <td>string</td> <td>分账接收方类型</td> <td>枚举值：&quot;PAYEE_TYPE_EXTERNAL_USER&quot; - 外部用户；&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot; - 外部商户；</td> <td>是</td></tr> <tr><td>payee_id</td> <td>string</td> <td>分账接收方标识</td> <td>根据payee_type填入openid或商户号：当payee_type=&quot;PAYEE_TYPE_EXTERNAL_USER&quot;时填openid；当payee_type=&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;时填商户号；</td> <td>是</td></tr></tbody></table></div><p><strong>返回结果</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;payee_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;payee_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码说明</strong></p> <div class="table-wrp"><table><thead><tr><th>errcorde</th> <th>errmsg</th></tr></thead> <tbody><tr><td>210001</td> <td>删除分账方频繁</td></tr> <tr><td>210002</td> <td>删除分账方传入环境参数错误</td></tr> <tr><td>210003</td> <td>删除分账方传入账户类型错误</td></tr> <tr><td>210005</td> <td>分账接受方已被删除</td></tr> <tr><td>210007</td> <td>分账账户不存在</td></tr></tbody></table></div><h4 id="_3、查询分账方"><a href="#_3、查询分账方" class="header-anchor">#</a> 3、查询分账方</h4> <p>可以通过 api 方式查询分账方</p> <p><strong>接口说明</strong></p> <p>请求地址：<a href="https://api.weixin.qq.com/retail/B2b/queryprofitsharingaccount?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/queryprofitsharingaccount?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th> <th>必填</th></tr></thead> <tbody><tr><td>offset</td> <td>uint32</td> <td>偏移量</td> <td>分账方数据起始位置的偏移量，默认值为0</td> <td>否</td></tr> <tr><td>limit</td> <td>uint32</td> <td>最大数量</td> <td>返回分账方数据的最大条数，默认值为10</td> <td>否</td></tr></tbody></table></div><p><strong>返回结果</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>account_list</td> <td>json list</td> <td>分账账户信息列表</td> <td>包含多个RetailProfitSharingAccountInfo对象</td></tr></tbody></table></div><p>RetailProfitSharingAccountInfo对象字段说明：</p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>sharing_account_type</td> <td>string</td> <td>分账接收方类型</td> <td>枚举值：&quot;PAYEE_TYPE_EXTERNAL_USER&quot; - 外部用户；&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot; - 外部商户；（与添加分账方 API 中的 payee_type 对应）</td></tr> <tr><td>sharing_account</td> <td>string</td> <td>分账接收方标识</td> <td>类型为外部用户时，表示个人 openid；类型为外部商户时，表示商户号；（与添加分账方 API 中的 payee_id 对应）</td></tr> <tr><td>add_time</td> <td>uint32</td> <td>添加时间</td> <td>-</td></tr> <tr><td>update_time</td> <td>uint32</td> <td>更新时间</td> <td>-</td></tr> <tr><td>name</td> <td>string</td> <td>商户名称</td> <td>类型为外部商户时，返回对应的商户名称</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">1000</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;account_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		<span class="token property">&quot;sharing_account_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;sharing_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1234567890&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;add_time&quot;</span><span class="token operator">:</span> <span class="token number">1724222992</span><span class="token punctuation">,</span>
		<span class="token property">&quot;update_time&quot;</span><span class="token operator">:</span> <span class="token number">1724222992</span><span class="token punctuation">,</span>
		<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXX公司&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>错误码说明</strong></p> <div class="table-wrp"><table><thead><tr><th>errcorde</th> <th>errmsg</th></tr></thead> <tbody><tr><td>1</td> <td>查询不到可用分账方</td></tr></tbody></table></div><h4 id="_4、下单时标识这笔单需要分账"><a href="#_4、下单时标识这笔单需要分账" class="header-anchor">#</a> 4、下单时标识这笔单需要分账</h4> <p>可以通过 api 方式查询分账方</p> <p><strong>接口说明</strong></p> <p>请求方式：同<a href="#33-%E6%94%AF%E4%BB%98%E4%B8%8E%E9%80%80%E6%AC%BE">3.3 支付与退款</a>调用相同的接口：wx.requestCommonPayment(Object object)</p> <p><strong>请求参数</strong></p> <p>在signData具体支付参数字段(Object类型)中，添加need_profit_sharing的字段，数字 0（或者不填）标识不需要分账，数字 1 标识需要分账</p> <p><strong>返回参数</strong></p> <p>同<a href="#33-%E6%94%AF%E4%BB%98%E4%B8%8E%E9%80%80%E6%AC%BE">3.3 支付与退款</a></p> <p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;signData&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;mchid\&quot;:\&quot;1654806452\&quot;,\&quot;out_trade_no\&quot;:\&quot;test1244\&quot;,\&quot;description\&quot;:\&quot;测试测试\&quot;,\&quot;amount\&quot;:{\&quot;order_amount\&quot;:1,\&quot;currency\&quot;:\&quot;CNY\&quot;},\&quot;attach\&quot;:\&quot;test_attach\&quot;,\&quot;env\&quot;:1, \&quot;need_profit_sharing\&quot;:1}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;retail_pay_goods&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;paySig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <p>同<a href="#33-%E6%94%AF%E4%BB%98%E4%B8%8E%E9%80%80%E6%AC%BE">3.3 支付与退款</a></p> <h4 id="_5、请求分账"><a href="#_5、请求分账" class="header-anchor">#</a> 5、请求分账</h4> <p>通过此接口发起分账请求，将结算后的资金分给分账接收方。（注意：结算完成的订单才能分账，而沙箱环境不走结算环境，建议用正式环境测试。）</p> <p>单笔订单，单个分账接收方只允许发起一次。单笔订单只允许最多 45 个接收方，总分账比例金额不超过单笔订单总额的29%。</p> <p>分账资金的冻结期默认是180天。从订单支付成功之日起，180天内需要发起分账，若180天内未发起分账，待分账资金将会自动解冻给分账方。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/createprofitsharingorder?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/createprofitsharingorder?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>mchid</td> <td>string</td> <td>子商户id</td> <td>在B2b小程序中进件完成返回的子商户 id</td> <td>是</td></tr> <tr><td>out_trade_no</td> <td>string</td> <td>支付单 id</td> <td>在B2b小程序中下单的订单 id</td> <td>是</td></tr> <tr><td>profit_fee</td> <td>uint64</td> <td>分账费用</td> <td>单位:分，不超过支付单本身的金额</td> <td>是</td></tr> <tr><td>receiver_type</td> <td>string</td> <td>分账接收方类型</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>receiver_account</td> <td>string</td> <td>分账接收方账号</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1654806452&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;400128912435668818922107515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;profit_fee&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;receiver_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1654806451&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_6、查询分账结果"><a href="#_6、查询分账结果" class="header-anchor">#</a> 6、查询分账结果</h4> <p>可用于查询某笔支付单的某笔分账单是否已经分账完成。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/queryprofitsharingorder?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/queryprofitsharingorder?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>out_trade_no</td> <td>string</td> <td>支付单 id</td> <td>在B2b小程序中下单的订单 id</td> <td>是</td></tr> <tr><td>receiver_type</td> <td>string</td> <td>分账接收方类型</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>receiver_account</td> <td>string</td> <td>分账接收方账号</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>mchid</td> <td>string</td> <td>商户号</td> <td>商户号</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>order_status</td> <td>uint32</td> <td>分帐状态</td> <td>枚举值：<br>1：初始化 <br>2：成功<br>3：失败</td></tr> <tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>若 order_status 不为成功，且 errmsg 非空，可参考具体原因：<br>S_NO_ENOUGH_MONEY：分账余额不足。可能是分账金额超过可分账余额，或者订单已过期解冻。建议调用查询分账余额接口检查。<br> ACCOUNT_ABNORMAL： 收款方账号异常。解决异常后，分帐单会自动扭转成功。<br>S_TOO_MANY_PROFIT_TIMES：分账次数过多，超过50次。</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4001289118922107515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;receiver_account&quot;</span><span class="token operator">:</span> <span class="token string">&quot;15480651&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;order_status&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_7、查询分账剩余金额"><a href="#_7、查询分账剩余金额" class="header-anchor">#</a> 7、查询分账剩余金额</h4> <p>可用于查询某笔支付单还能够分账的总金额。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/queryprofitsharingremainamt?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/queryprofitsharingremainamt?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>mchid</td> <td>string</td> <td>子商户id</td> <td>在B2b小程序中进件完成返回的子商户 id</td> <td>是</td></tr> <tr><td>out_trade_no</td> <td>string</td> <td>订单 id</td> <td>在B2b小程序中下单的订单 id</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>remain_amt</td> <td>uint64</td> <td>冻结金额，单位：分</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4001289122107515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16548451&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;remain_amt&quot;</span><span class="token operator">:</span> <span class="token number">98</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_8、完成分账"><a href="#_8、完成分账" class="header-anchor">#</a> 8、完成分账</h4> <p>某笔支付单在下单时标识需要分账后，该笔支付单的金额会被冻结，直到调用该接口告知完成分账后，金额才会解冻，能够发起提现。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/finishprofitsharingorder?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/finishprofitsharingorder?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>mchid</td> <td>string</td> <td>子商户id</td> <td>在B2b小程序中进件完成返回的子商户 id</td> <td>是</td></tr> <tr><td>out_trade_no</td> <td>string</td> <td>订单 id</td> <td>在B2b小程序中下单的订单 id</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40012891243522107515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1654806451&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_9、发起分账的支付单的退款规则说明"><a href="#_9、发起分账的支付单的退款规则说明" class="header-anchor">#</a> 9、发起分账的支付单的退款规则说明</h4> <div class="table-wrp"><table><thead><tr><th><strong>订单分账状态</strong></th> <th><strong>申请退款金额</strong></th> <th><strong>退款前提</strong></th> <th><strong>退款出款账户</strong></th></tr></thead> <tbody><tr><td>订单标记为需要分账</td> <td>申请全额退款</td> <td>1、需要先调“完成分账”接口，将订单剩余冻结资金从“待结算金额”账户全部解冻至“可提现金额”账户 <br> 2、“可提现金额”账户余额≥申请退款金额，支付单扣除手续费将在退款成功后返还</td> <td>“可提现金额”账户</td></tr> <tr><td></td> <td>申请部分退款</td> <td>当申请退款金额≤订单未分账冻结金额，直接可退</td> <td>“待结算金额”账户</td></tr> <tr><td></td> <td></td> <td>1、当申请退款金额＞订单未分账冻结金额，需要先调“完成分账”接口，将订单剩余冻结资金从“待结算金额”账户全部解冻至“可提现金额”账户 <br> 2、“可提现金额”账户余额≥申请退款金额，支付单扣除手续费将在退款成功后返还</td> <td>“可提现金额”账户</td></tr> <tr><td>订单已完结分账</td> <td>申请全额/部分退款</td> <td>“可提现金额”账户余额≥申请退款金额，支付单扣除手续费将在退款成功后返还</td> <td>“可提现金额”账户</td></tr></tbody></table></div><h4 id="_10、请求分账回退"><a href="#_10、请求分账回退" class="header-anchor">#</a> 10、请求分账回退</h4> <p>已分账订单，在完成退款后，通过调用此接口，可将已分账的资金从分账接收方的账户回退给分账方。单笔退款单对单个分账接收方只能回退一次。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/refundprofitsharing?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/refundprofitsharing?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>out_trade_no</td> <td>string</td> <td>订单 id</td> <td>在B2b小程序中下单的订单 id</td> <td>是</td></tr> <tr><td>out_refund_no</td> <td>string</td> <td>退款单 id</td> <td>在B2b小程序中下单的退款单 id</td> <td>是</td></tr> <tr><td>payee_type</td> <td>string</td> <td>退款分账方类型</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>payee_id</td> <td>string</td> <td>退款分账方 id</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>mchid</td> <td>string</td> <td>商户号 id</td> <td>发起这笔订单的商户号</td> <td>是</td></tr> <tr><td>refund_amt</td> <td>int64</td> <td>退款金额</td> <td>退款金额，单位为分</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>参数名</th> <th>类型</th> <th>内容</th> <th>描述</th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40012891249207515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;out_refund_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4001289124357515929&quot;</span><span class="token punctuation">,</span>
 	<span class="token property">&quot;payee_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;payee_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;165406451&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;166321431&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_11、查询分账回退结果"><a href="#_11、查询分账回退结果" class="header-anchor">#</a> 11、查询分账回退结果</h4> <p>通过此接口查询回退结果。</p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/queryrefundprofitsharingorder?access_token=ACCESS_TOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/queryrefundprofitsharingorder?access_token=ACCESS_TOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th> <th><strong>必填</strong></th></tr></thead> <tbody><tr><td>out_trade_no</td> <td>string</td> <td>订单 id</td> <td>在B2b小程序中下单后返回的订单 id</td> <td>是</td></tr> <tr><td>out_refund_no</td> <td>string</td> <td>退款单 id</td> <td>在B2b小程序中下单后返回的退款单 id</td> <td>是</td></tr> <tr><td>mchid</td> <td>string</td> <td>商户号 id</td> <td>发起这笔订单的商户号</td> <td>是</td></tr> <tr><td>payee_type</td> <td>string</td> <td>退款分账方类型</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr> <tr><td>payee_id</td> <td>string</td> <td>退款分账方 id</td> <td>同添加分账方时填入的内容</td> <td>是</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>类型</strong></th> <th><strong>内容</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>errcode</td> <td>int32</td> <td>错误码</td> <td>-</td></tr> <tr><td>errmsg</td> <td>string</td> <td>错误信息</td> <td>-</td></tr> <tr><td>order_status</td> <td>uint32</td> <td>订单状态</td> <td>1: 分账退回中 <br> 2: 分账退回完成 <br>3: 分账退回失败</td></tr></tbody></table></div><p><strong>请求示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  	<span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;40012891243522107515929&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;out_refund_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;400128912435605688225929&quot;</span><span class="token punctuation">,</span>
 	<span class="token property">&quot;payee_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;PAYEE_TYPE_EXTERNAL_MERCHANT&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;payee_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;165406451&quot;</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span><span class="token string">&quot;166732131&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>返回示例</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;errcode&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  	<span class="token property">&quot;errmsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;order_status&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_12、业务分账账单查询"><a href="#_12、业务分账账单查询" class="header-anchor">#</a> 12、业务分账账单查询</h4> <p>接口详情请看<a href="#34-%E6%9F%A5%E7%9C%8B%E8%B4%A6%E5%8D%95">3.4-查看账单</a></p> <p><strong>接口说明</strong></p> <p>请求URL：<a href="https://api.weixin.qq.com/retail/B2b/downloadbill?access_token=ACCESSTOKEN&pay_sig=xxxxx" target="_blank" rel="noopener noreferrer">https://api.weixin.qq.com/retail/B2b/downloadbill?access_token=ACCESSTOKEN&amp;pay_sig=xxxxx<span></span></a></p> <p>请求方式：POST</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>mchid</td> <td>string</td> <td>是</td> <td>商户号</td></tr> <tr><td>bill_date</td> <td>string</td> <td>是</td> <td>账单日期，格式:yyyymmdd,比如20231102</td></tr></tbody></table></div><p><strong>返回参数</strong></p> <div class="table-wrp"><table><thead><tr><th>字段名</th> <th>类型</th> <th>必填</th> <th>说明</th></tr></thead> <tbody><tr><td>errcode</td> <td>int</td> <td>是</td> <td>错误码</td></tr> <tr><td>errmsg</td> <td>string</td> <td>否</td> <td>错误信息</td></tr> <tr><td>success_bill_url</td> <td>string</td> <td>否</td> <td>支付成功订单下载链接，包括支付成功时间在当天的订单</td></tr> <tr><td>refund_bill_url</td> <td>string</td> <td>否</td> <td>退款单下载链接，发起退款成功在当天的退款单</td></tr> <tr><td>all_bill_url</td> <td>string</td> <td>否</td> <td>包括支付成功和退款单的下载链接</td></tr> <tr><td>fund_bill_url</td> <td>string</td> <td>否</td> <td>资金账单下载链接</td></tr> <tr><td>ended_day_avail_amt</td> <td>int64</td> <td>否</td> <td>日终账户可提现金额</td></tr> <tr><td>ended_day_frozen_amt</td> <td>int64</td> <td>否</td> <td>日终账户待结算金额</td></tr> <tr><td>ended_day_total_amt</td> <td>int64</td> <td>否</td> <td>日终账户总金额，等于日终账户可提现金额+日终账户待结算金额</td></tr> <tr><td>profit_sharing_bill_url</td> <td>string</td> <td>否</td> <td>分账成功订单下载链接，包括分账成功时间在当天的订单</td></tr> <tr><td>profit_refund_bill_url</td> <td>string</td> <td>否</td> <td>分账回退单下载链接，发起分账回退成功在当天的退款单</td></tr></tbody></table></div><h4 id="_13、资金流水账单查询"><a href="#_13、资金流水账单查询" class="header-anchor">#</a> 13、资金流水账单查询</h4> <p>在原有资金流水下载链接里会包含第三方分账。接口详情请看<a href="#34-%E6%9F%A5%E7%9C%8B%E8%B4%A6%E5%8D%95">3.4-查看账单</a></p> <h3 id="_3-7-合单支付"><a href="#_3-7-合单支付" class="header-anchor">#</a> 3.7 合单支付</h3> <h4 id="合单支付特性说明"><a href="#合单支付特性说明" class="header-anchor">#</a> 合单支付特性说明</h4> <p>B2b 合单支付仅在「下单」接口格式（signData, mode 和 paySig）上与普通支付不同。合单下单成功后，系统会以<strong>子单维度</strong>处理后续业务，包括：1) 支付通知; 2) 订单查询; 3) 发起退款; 4) 退款查询等。</p> <p>子单的后续操作与普通订单一致，开发者需以子单的 <code>mchid</code> 和 <code>out_trade_no</code> 为维度处理业务。</p> <h4 id="_1、下单"><a href="#_1、下单" class="header-anchor">#</a> 1、下单</h4> <p><strong>接口说明</strong></p> <p>小程序接口 wx.requestCommonPayment(Object object)</p> <p><strong>请求参数</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>属性</strong></th> <th><strong>类型</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>signData</td> <td>string</td> <td>是</td> <td>支付参数的 JSON 字符串，结构见下方 <strong>signData</strong>。示例值见下文。<br>示例值：<code>'{env: 0, combined_order_list: [{mchid: &quot;1651234567&quot;, out_trade_no: &quot;test1234&quot;, description: &quot;测试1&quot;, amount: {order_amount: 10, currency: &quot;CNY&quot;}, attach: &quot;test1&quot;}, {mchid: &quot;1661234567&quot;, out_trade_no: &quot;test1235&quot;, description: &quot;测试2&quot;,amount: {order_amount: 20, currency: &quot;CNY&quot;}, attach: &quot;test2&quot;}]}'</code></td></tr> <tr><td>mode</td> <td>string</td> <td>是</td> <td>支付类型，B2b合单支付固定填 <strong>&quot;retail_pay_combined_goods&quot;</strong>。<br>示例值：<code>&quot;retail_pay_combined_goods&quot;</code></td></tr> <tr><td>paySig</td> <td>string</td> <td>是</td> <td>支付签名列表的 JSON 字符串，结构见下方 <strong>paySig</strong>。 示例值见下文。<br>示例值：<code>'[{&quot;mchid&quot;: &quot;1651234567&quot;, &quot;paysig&quot;: &quot;XXXXXX&quot;}, {&quot;mchid&quot;:&quot;1661234567&quot;,&quot;paysig&quot;:&quot;YYYYYY&quot;}]'</code><br>支付签名的计算，见<a href="#1%E7%AD%BE%E5%90%8D%E8%AF%A6%E8%A7%A3">3.3.1签名详解</a></td></tr> <tr><td>signature</td> <td>string</td> <td>是</td> <td>用户态签名，详见<a href="#1%E7%AD%BE%E5%90%8D%E8%AF%A6%E8%A7%A3">3.3.1签名详解</a></td></tr> <tr><td>success</td> <td>function</td> <td>否</td> <td>接口调用成功的回调函数</td></tr> <tr><td>fail</td> <td>function</td> <td>否</td> <td>接口调用失败的回调函数</td></tr> <tr><td>complete</td> <td>function</td> <td>否</td> <td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table></div><p><strong>1) signData</strong></p> <p>规范示例：（需将以下 JSON 对象转为字符串传递）</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;combined_order_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1651234567&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test1234&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试订单1&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;order_amount&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CNY&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;attach&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1661234567&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test1235&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;测试订单2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;order_amount&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CNY&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;attach&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>字段说明：</p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">下单环境</td> <td style="text-align:left">env</td> <td style="text-align:left">uint32</td> <td style="text-align:left">是</td> <td style="text-align:left">下单环境，具体取值为：0.生产环境 1.沙箱环境<br><span style="color: green;">示例值：0 </span></td></tr> <tr><td style="text-align:left">子单列表</td> <td style="text-align:left">combined_order_list</td> <td style="text-align:left">array<object></object></td> <td style="text-align:left">是</td> <td style="text-align:left">子订单列表，目前一次最多可支持50笔子单进行合单支付。子订单格式见<strong>CombinedOrder</strong></td></tr></tbody></table></div><p><strong>2）CombinedOrder</strong></p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">由微信支付生成并下发的商户号。<br><strong>注：子单的 mchid 必须唯一，不允许出现重复的商户号</strong><br><span style="color: green;">示例值：1230000109</span></td></tr> <tr><td style="text-align:left">商户订单号</td> <td style="text-align:left">out_trade_no</td> <td style="text-align:left">string[6,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">商户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一<br><span style="color: green;">示例值：1217752501201407033233368018</span></td></tr> <tr><td style="text-align:left">商品描述</td> <td style="text-align:left">description</td> <td style="text-align:left">string[1,127]</td> <td style="text-align:left">是</td> <td style="text-align:left">商品描述，最多 127 字节<br><span style="color: green;"> 示例值：Image形象店-深圳腾大-QQ公仔</span></td></tr> <tr><td style="text-align:left">订单金额</td> <td style="text-align:left">amount</td> <td style="text-align:left">object</td> <td style="text-align:left">是</td> <td style="text-align:left">订单金额信息，仅支持人民币，格式见<strong>Amount</strong></td></tr> <tr><td style="text-align:left">附加数据</td> <td style="text-align:left">attach</td> <td style="text-align:left">string[1,128]</td> <td style="text-align:left">否</td> <td style="text-align:left">附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。<br><span style="color: green;">示例值：自定义数据</span></td></tr> <tr><td style="text-align:left">商品信息</td> <td style="text-align:left">product_info</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">订单详细商品信息，格式见<strong>ProductInfo</strong></td></tr> <tr><td style="text-align:left">配送方式</td> <td style="text-align:left">delivery_type</td> <td style="text-align:left">uint32</td> <td style="text-align:left">否</td> <td style="text-align:left">配送方式，具体取值为： 1.同城配送 2.快递配送 3.门店自提 4.无需配送与提货<br><span style="color: green;"> 示例值：2</span></td></tr></tbody></table></div><p><strong>3）Amount</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品原总金额</td> <td>product_amount</td> <td>int64</td> <td>否</td> <td>订单所有商品的原价总和，单位为分<br><span style="color: green;">示例值：1000</span></td></tr> <tr><td>运费</td> <td>freight</td> <td>int64</td> <td>否</td> <td>订单运费，单位为分<br><span style="color: green;">示例值：200</span></td></tr> <tr><td>总优惠金额</td> <td>discount</td> <td>int64</td> <td>否</td> <td>订单总计优惠金额，单位为分<br><span style="color: green;">示例值：500</span></td></tr> <tr><td>其他费用</td> <td>other_fee</td> <td>int64</td> <td>否</td> <td>订单其他费用总金额，单位为分<br><span style="color: green;">示例值：600</span></td></tr> <tr><td>订单总金额</td> <td>order_amount</td> <td>int64</td> <td>是</td> <td>订单总需支付金额，也即是真正下单总金额，单位为分<br><span style="color: green;">示例值：1300</span></td></tr> <tr><td>货币类型</td> <td>currency</td> <td>string</td> <td>否</td> <td>货币类型，仅支持&quot;CNY&quot;。<br><span style="color: green;">示例值：CNY</span></td></tr></tbody></table></div><p><strong>4）ProductInfo</strong></p> <div class="table-wrp"><table><thead><tr><th><strong>参数名</strong></th> <th><strong>变量</strong></th> <th><strong>类型[长度限制]</strong></th> <th><strong>必填</strong></th> <th><strong>描述</strong></th></tr></thead> <tbody><tr><td>商品编号</td> <td>spu_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的spuid<br><span style="color: green;">示例值：spu123456</span></td></tr> <tr><td>商品规格编号</td> <td>sku_id</td> <td>string</td> <td>是</td> <td>商户系统内该商品的skuid<br><span style="color: green;">示例值：sku123</span></td></tr> <tr><td>商品标题</td> <td>title</td> <td>string[1,60]</td> <td>是</td> <td>商品标题<br><span style="color: green;">示例值：QQ长鹅</span></td></tr> <tr><td>商详页小程序路径</td> <td>path</td> <td>string</td> <td>是</td> <td>商户商品详请页小程序路径<br><span style="color: green;">示例值：pages/index</span></td></tr> <tr><td>商品主图</td> <td>head_img</td> <td>string</td> <td>是</td> <td>商品主图的url，大小建议64*64<br><span style="color: green;">示例值：https://mp.weixin.qq.com/123</span></td></tr> <tr><td>类目</td> <td>category</td> <td>string</td> <td>是</td> <td>商户侧该商品所属的类目<br><span style="color: green;">示例值：玩偶</span></td></tr> <tr><td>sku属性</td> <td>sku_attr</td> <td>string</td> <td>是</td> <td>商户系统内该商品的sku属性<br><span style="color: green;">示例值：50cm</span></td></tr> <tr><td>商品原价</td> <td>org_price</td> <td>int32</td> <td>是</td> <td>该商品原价，单位为分<br><span style="color: green;">示例值：5000</span></td></tr> <tr><td>商品售价</td> <td>sale_price</td> <td>int32</td> <td>是</td> <td>该商品售价，单位为分<br><span style="color: green;">示例值：4000</span></td></tr> <tr><td>商品数量</td> <td>quantity</td> <td>int32</td> <td>是</td> <td>用户购买该商品的数量<br><span style="color: green;">示例值：5</span></td></tr></tbody></table></div><p><strong>5）paySig</strong></p> <p>规范示例：（需将以下 JSON 对象转为字符串传递）</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1651234567&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paysig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;XXXXXX&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;mchid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1661234567&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paysig&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YYYYYY&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>字段说明：</p> <div class="table-wrp"><table><thead><tr><th style="text-align:left">参数名</th> <th style="text-align:left">变量</th> <th style="text-align:left">类型[长度限制]</th> <th style="text-align:left">必填</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">微信商户号</td> <td style="text-align:left">mchid</td> <td style="text-align:left">string[1,32]</td> <td style="text-align:left">是</td> <td style="text-align:left">子单对应的微信商户号。</td></tr> <tr><td style="text-align:left">支付签名</td> <td style="text-align:left">paysig</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">该商户号对 signData 的支付签名，签名规则详见<a href="#1%E7%AD%BE%E5%90%8D%E8%AF%A6%E8%A7%A3">3.3.1签名详解</a>。需使用商户号对应的 appkey 生成。</td></tr></tbody></table></div></div> <div class="fixed-translate" style="display:none;"><span>The translations are provided by WeChat Translation and are for reference only. In case of any inconsistency and discrepancy between the Chinese version and the English version, the Chinese version shall prevail.Incorrect translation. <a href="javascript:;" class="fixed-translate-btn">Tap to report.</a></span></div></div> <!----> <div class="related"><!----> <!----></div> <footer class="page-edit"><!----></footer>  <footer class="footer"><ul class="footer-links"><li class="footer-link"><a href="http://www.tencent.com/zh-cn/index.shtml" target="_blank">关于腾讯</a></li> <li class="footer-link"><a href="https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html?t=1484641676" target="_blank">文档中心</a></li> <li class="footer-link"><a href="https://kf.qq.com/faq/17030722muuu170307MFBny2.html" target="_blank">辟谣中心</a></li> <li class="footer-link"><a href="http://kf.qq.com/faq/120911VrYVrA1509086vyumm.html" target="_blank">客服中心</a></li></ul> <p class="copyright">Copyright © 2012-<span>2026</span> Tencent. All Rights Reserved.</p></footer></div></main></div> <!----></div></div> <div id="popoverWrapId" class="pop-links__wrp popover_hide"><ul class="pop-links__list"><li class="pop-links__item"><button class="pop-link">复制</button></li> <li class="pop-links__item"><button class="pop-link">问题反馈</button></li></ul></div> <div class="fixed-btns"><a href="javascript:;" class="fixed-btn fixed-btn__feedback"><div class="fixed-btn__inner"><span class="fixed-btn__icon"></span> <span class="fixed-btn__text">反馈</span></div></a> <a href="javascript:;" class="fixed-btn fixed-btn__top" style="display:none;"><div class="fixed-btn__inner"><span class="fixed-btn__icon"></span></div></a></div></div></div></div>
    <script src="https://res.wx.qq.com/wxdoc/dist/assets/js/app.5befb301.js" defer></script><script src="https://res.wx.qq.com/wxdoc/dist/assets/js/3580.9421c50c.js" defer></script>
  </body>
</html>
